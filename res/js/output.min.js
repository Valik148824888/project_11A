(()=>{function Il(e,t,r){return r?`${e}_${t}_${r}`:`${e}_${t}`}function vy(e,t={},r){let o=[e];r&&o.push(r);let n=o.slice();for(let i of Object.keys(t)){let a=t[i];for(let s of o)if(typeof a=="boolean")a&&n.push(Il(s,i,null));else if(typeof a=="string")n.push(Il(s,i,a));else throw new Error(`modifier '${i}' has invalid type`)}return n.join(" ")}window.__getCssClass=vy;function Ml(e,t){return t||e}var y=class{static log(t,...r){console.log(t,...r)}static warn(t,...r){console.warn(t,...r)}static error(t,...r){console.error(t,...r)}static assert(t,r){t||y.error("Assertion failed"+(r?": "+r:""))}};function m(e,t){return y.assert(e,t),e}function De(e){return e!==void 0}function gn(e){let t=typeof e;return t=="object"&&e!=null||t=="function"}function cs(e){return typeof e=="function"}function Ot(e){return typeof e=="string"}function Al(e){return Array.isArray(e)}var wr=e=>e!=null,L=(e,t=`Unhandled value: ${JSON.stringify(e,null," ")}`)=>y.error(t);function Fl(e,t,r){return function(...o){r&&r(...o);let n=e(...o);return t(this,n,...o),n}}var by=0,yn=class{constructor(t,r,o,n,i=null){this.listener=t,this.src=r,this.type=o,this.capture=!!n,this.handler=i,this.key=++by}};var _n=class extends yn{constructor(t,r,o,n,i,a){super(t,o,n,i,a),this.proxy=r,this.callOnce=!1,this.removed=!1}markAsRemoved(){this.removed=!0,this.listener=null,this.proxy=null,this.src=null,this.handler=null}};function Pl(e,t,r){for(let o in e)if(t.call(r,e[o],o,e))return!0;return!1}function Ol(e,t,r){if(e){for(let o in e)if(t.call(r,e[o],o,e))return o}}function Jr(e,t){for(let r in e)if(!(r in t)||e[r]!==t[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}function Ll(e,t,r){let o={};if(e)for(let n in e)t.call(r,e[n],n,e)&&(o[n]=e[n]);return o}function kn(e,t,r){for(let o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function $l(e,t){let r={};for(let o of Object.keys(e))r[o]=t(e[o]);return r}function Cn(e,t){let r=t(e);if(r!==void 0)return r;if(typeof e!="object"||e==null)return e;if(Array.isArray(e))return e.map(n=>Cn(n,t));let o={};for(let n of Object.keys(e))o[n]=Cn(e[n],t);return o}function ls(e,t){if(typeof e=="object"&&typeof t=="object"&&e&&t){let r=Object.keys(e),o=Object.keys(t);if(!r.length&&!o.length)return e.toString()===t.toString();if(r.length!=o.length)return!1;for(let n of r)if(!o.includes(n)||!ls(e[n],t[n]))return!1;return!0}return e===t}function Kl(e,t){for(let r of Object.keys(t))e[r]=t[r]}function xt(e){return e&&JSON.parse(JSON.stringify(e))}var Ko=class{constructor(t){this.src=t,this.listeners={},this._typeCount=0}getTypeCount(){return this._typeCount}getListenerCount(){let t=0;for(let r of Object.keys(this.listeners))t+=this.listeners[r].length;return t}add(t,r,o,n,i){let a=t.toString(),s=this.listeners[a];s||(s=this.listeners[a]=[],this._typeCount++);let c,l=this._findListenerIndex(s,r,n,i);return l>-1?(c=s[l],o||(c.callOnce=!1)):(c=new _n(r,null,this.src,a,!!n,i),c.callOnce=o,s.push(c)),c}remove(t,r,o,n){let i=t.toString();if(!(i in this.listeners))return!1;let a=this.listeners[i],s=this._findListenerIndex(a,r,o,n);return s>-1?(a[s].markAsRemoved(),a.splice(s,1),a.length==0&&(delete this.listeners[i],this._typeCount--),!0):!1}removeByKey(t){let r=t.type;if(!(r in this.listeners))return!1;let o=this.listeners[r],n=o.indexOf(t),i=n>=0;return i&&(o.splice(n,1),t.markAsRemoved(),this.listeners[r].length==0&&(delete this.listeners[r],--this._typeCount)),i}getListeners(t,r){let o=this.listeners[t.toString()],n=[];if(o)for(let i=0;i<o.length;++i){let a=o[i];a.capture==r&&n.push(a)}return n}getListener(t,r,o,n){let i=this.listeners[t.toString()],a=-1;return i&&(a=this._findListenerIndex(i,r,o,n)),a>-1?i[a]:null}hasListener(t="",r){let o=De(t),n=o?t.toString():"",i=De(r);return Pl(this.listeners,a=>{for(let s=0;s<a.length;++s)if((!o||a[s].type==n)&&(!i||a[s].capture==r))return!0;return!1})}_findListenerIndex(t,r,o,n){for(let i=0;i<t.length;++i){let a=t[i];if(!a.removed&&a.listener==r&&a.capture==!!o&&a.handler==n)return i}return-1}};var ms="ispring_lm_"+(Math.random()*1e6|0),ds;function Ty(){if(!Me.addEventListener||!Object.defineProperty)return!1;let e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return Me.addEventListener("test",Function.prototype,t),Me.removeEventListener("test",Function.prototype,t),e}function wy(){return De(ds)||(ds=Ty()),ds}function us(e){let t=e[ms];return t instanceof Ko?t:null}function Bt(e){let t=e;if(!t||t.removed)return!1;let r=t.src,o=t.type,n=t.proxy;r.removeEventListener&&r.removeEventListener(o,n,t.capture);let i=us(r);return i?(i.removeByKey(t),i.getTypeCount()==0&&(r[ms]=null)):t.markAsRemoved(),!0}function Dy(e){let{listener:t,handler:r,callOnce:o}=e,n=r?t.bind(r):t;return o?(...i)=>{n(...i),Bt(e)}:n}function pt(e,t,r,o,n=null){let i=gn(o)?m(o).capture:!!o,a=us(e);a||(a=new Ko(e),e[ms]=a);let s=!!(o&&o.once),c=a.add(t,r,s,i,n);if(c.proxy)return c;let l=Dy(c);if(c.proxy=l,e.addEventListener){let d=wy()?o:i;De(d)||(d=!1),e.addEventListener(t.toString(),l,d)}else throw new Error("addEventListener is unavailable.");return c}function Nl(e,t,r,o,n){o=!!o;let i=us(e);return i?i.getListener(t,r,o,n):null}var Sn=class{dispose(){}};var Ey=0,Jt=class extends Sn{constructor(){super(),this._listenersKeys=null,this._activeSignals=null,this._disposables=null,this._customDestructHandlers=null}addDestructHandler(t){this._customDestructHandlers=this._customDestructHandlers||[],this._customDestructHandlers.push(t)}dispose(){if(this._destruct(),this._customDestructHandlers)for(let t of this._customDestructHandlers)t();if(this._disposables)for(let t of this._disposables)ps(t);if(this._listenersKeys){for(let t of this._listenersKeys)Bt(t);this._listenersKeys=null}if(this._activeSignals)for(let t of Object.keys(this._activeSignals))this._removeSignalByKey(t)}_listen(t,r,o,n){this._listenersKeys=this._listenersKeys||[];let i=pt(this._getEventTarget(t),r,o,n,this);return this._listenersKeys.push(i),i}_unlisten(t,r,o){let n=Nl(this._getEventTarget(t),r,o,!1);return!!n&&this._unlistenByKey(n)}_unlistenByKey(t){let r=m(this._listenersKeys),o=r.indexOf(t);return o>=0&&r.splice(o,1),Bt(t)}_addSignal(t,r,o){this._activeSignals=this._activeSignals||{},t.add(r,this,o);let n=++Ey;return this._activeSignals[n]={dispatcher:t,fn:r,priority:o},n}_addSignalCallOnce(t,r,o){let n=(...i)=>{r.apply(this,i),this._removeSignal(t,n,o)};this._addSignal(t,n,o)}_removeSignal(t,r,o){let n=Ol(this._activeSignals,i=>Jr(i,{dispatcher:t,fn:r,priority:o}));n?this._removeSignalByKey(n):!1&&y.warn("unknown signal")}_removeSignalByKey(t){if(!(this._activeSignals&&this._activeSignals[t])){y.warn("unknown signal key");return}let{dispatcher:r,fn:o,priority:n}=this._activeSignals[t];r.remove(o,this,n),delete this._activeSignals[t]}_removeAllEvents(t){if(!!t){if(this._activeSignals){let r=Ll(this._activeSignals,o=>o.dispatcher.eventOwner()==t);for(let o of Object.keys(r))this._removeSignalByKey(o)}if(this._listenersKeys){let r=this._getEventTarget(t),o=this._listenersKeys.filter(n=>n.src==r);for(let n of o)this._unlistenByKey(n)}}}_name(){let t=this,r=t.owner,o=`[${this.constructor.name}]`;return r&&(o+=` in [${r.constructor.name}].${t.ownerPropertyName()}`),o}_addDisposable(t){if(this._disposables=this._disposables||[],!t||this._disposables.includes(t))return t;if(!1){let r=t;m(this._disposables.indexOf(t)<0),m(!r.owner),r.owner=this,r.ownerPropertyName=()=>{let o=this;for(let n of Object.keys(o))if(o[n]==r)return n;return"unknown"}}return this._disposables.push(t),t}_removeDisposable(...t){if(!!this._disposables){for(let r of t)if(r){this._cleanItemDependencies(r);let o=this._disposables.indexOf(r);o>=0&&(this._disposables.splice(o,1),ps(r))}}}_cleanItemDependencies(t){this._removeAllEvents(t)}_cleanDependencies(...t){for(let r of t)r&&this._cleanItemDependencies(r)}_getEventTarget(t){return t}_destruct(){}};function fs(e,t){return e>t?1:e<t?-1:0}function Vl(e,t){if(!e)return!1;let r=e.indexOf(t),o=r>=0;return o&&e.splice(r,1),o}function Ry(e,t,r,o,n){let i=0,a=e.length,s;for(;i<a;){let c=i+a>>1,l;r?l=t.call(n,e[c],c,e):l=t(o,e[c]),l>0?i=c+1:(a=c,s=!l)}return s?i:~i}function Iy(e,t,r=fs){return Ry(e,r,!1,t)}function Hl(e,t,r){let o=Iy(e,t,r);return o<0?(e.splice(-(o+1),0,t),!0):!1}function hs(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}function xn(e){return e.filter(t=>t)}var Bn=class{constructor(){this._priorities=null,this._values=null,this._zeroPriorityValues=null}push(t,r){this._addPriority(r);let o=this._getPriorityValues(r);o?o.push(t):y.warn("Priority array values are zero")}remove(t,r){let o=this._getPriorityValues(r);o&&Vl(o,t)}removeAt(t,r){let o=this._getPriorityValues(r);o&&o.splice(t,1)}getValuesWithPriority(t){if(t==0)return this._zeroPriorityValues||[];if(!this._values)return y.warn("Priority array values are zero"),[];if(!(t in this._values))return[];let r=this._getPriorityValues(t);return r||(y.warn("Priority array values are zero"),[])}getAllValues(){if(!this._values)return this._zeroPriorityValues?this._zeroPriorityValues.slice():[];let t=[],r=m(this._priorities);for(let o=0;o<r.length;++o){let n=r[o],i=this._getPriorityValues(n);i&&t.push(...i)}return t}_addPriority(t){if(t==0){this._zeroPriorityValues=this._zeroPriorityValues||[];return}this._priorities=this._priorities||[0],this._values=this._values||{},t in this._values||(this._values[t]=[],Hl(this._priorities,t))}_getPriorityValues(t){return t==0?this._zeroPriorityValues:m(this._values)[t]}};var Ae=class extends Jt{constructor(t=null){super(),this._handlers=null,this._owner=t}eventOwner(){return this._owner}add(t,r,o=0){this._handlers=this._handlers||new Bn,this._handlers.push({fn:t,context:r},o)}addCallOnce(t,r,o=0){let n=i=>{t.call(r,i),this.remove(n,r,o)};this.add(n,r,o)}remove(t,r,o=0){if(!this._handlers){y.warn("Signal has no handlers!");return}let n=this._handlers.getValuesWithPriority(o),i=n.length;for(let a=0;a<i;++a){let s=n[a];if(s.fn==t&&s.context==r){this._handlers.removeAt(a,o);break}}}has(t,r,o=0){if(!this._handlers)return!1;let n=this._handlers.getValuesWithPriority(o),i=n.length;for(let a=0;a<i;++a){let s=n[a];if(s.fn==t&&s.context==r)return!0}return!1}dispatch(t){if(!this._handlers)return;let r=this._handlers.getAllValues(),o=r.length;for(let n=0;n<o;++n){let i=r[n];if(this._handlers.getAllValues().indexOf(i)!=-1)if(!1)i.fn.apply(i.context,[t]);else try{i.fn.apply(i.context,[t])}catch(a){gs(a,!0)}}}toFn(){return t=>this.dispatch(t)}handlersCount(){return this._handlers?this._handlers.getAllValues().length:0}};var Me=Function("return this")(),My=()=>!0;function vn(e,t){if(!!My()){if(t){y.error(e);return}y.warn(e)}}function gs(e,t){let r=e.stack||e.toString();String(r).indexOf(e.message)<0&&vn(e.message,t),vn(r,t)}var Ay=Object.getPrototypeOf({});function ps(e){!e||(m(!e.disposed),!1&&setTimeout(()=>{let t=e.owner?e.owner.constructor.name:null,r=e.owner?e.ownerPropertyName():null;if(e.owner=null,e.ownerPropertyName=null,e instanceof Ae){let i=t?`[${t}].${r} have active signals`:void 0;m(e.handlersCount()==0,i)}let o=e,n=new Set;for(;(o=m(Object.getPrototypeOf(o)))!=Ay;)Object.getOwnPropertyNames(o).forEach(i=>{i!="constructor"&&n.add(i)});n.forEach(i=>{cs(e[i])&&(e[i]=Fl(e[i].bind(e),()=>{vn(`using method ${i} from disposed object ${e.constructor.name}`,!0)}))})},100),cs(e.dispose)&&e.dispose(),e.disposed=!0)}function Wl(e,t){let r=e.split("."),o=Me;!(r[0]in o)&&typeof o.execScript!="undefined"&&o.execScript("var "+r[0]);for(let n;r.length&&(n=r.shift());)!r.length&&De(t)?o[n]=t:o[n]&&o[n]!==Object.prototype[n]?o=o[n]:o=o[n]={}}!1||(Me.onerror=function(...e){let[t,,,,r]=e;return r?gs(r,!0):vn(t,!0),!0});function Lt(e,t,r){return Math.max(t,Math.min(r,e))}function Fy(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function Py(e,t,r,o="g"){return e.replace(new RegExp(Fy(t),o),r)}function Oy(e,t,r,o){return e.substr(0,r)+t+e.substr(o)}function Ul(e,t){let r=e;return t.sort((o,n)=>n.startIndex-o.startIndex).forEach(({text:o,startIndex:n,endIndex:i})=>{r=Oy(r,o,n,i)}),r}function zl(e,t,r){let o=e;for(let n of Object.keys(t)){let i=t[n],a=r(n);o=Py(o,a,i)}return o}function Gl(e,t){return e.slice(0,t).replace(/[^\s]*\s*$/,"").length}function ql(e,t){let r=/^\s*[^\s]*/i.exec(e.slice(t)),o=r?r[0].length:0;return t+o}function ys(e,t={}){return new Promise((r,o)=>{let n=new XMLHttpRequest;m(t),n.open(t.method||"get",e,!0);for(let a in t.headers)t.headers.hasOwnProperty(a)&&n.setRequestHeader(a,t.headers[a]);n.withCredentials=t.credentials=="include",n.onload=()=>{r(i())},n.onerror=o,n.send(t.body);function i(){let a=[],s=[],c={},l;return n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(d,u,h)=>(a.push(u=u.toLowerCase()),s.push([u,h]),l=c[u],c[u]=l?`${l},${h}`:h,"")),{ok:(n.status/100|0)==2,status:n.status,statusText:n.statusText,url:n.responseURL,clone:i,text:()=>Promise.resolve(n.responseText),json:()=>Promise.resolve(n.responseText).then(d=>JSON.parse(d)),blob:()=>Promise.resolve(new Blob([n.response])),headers:{keys:()=>a,entries:()=>s,get:d=>c[d.toLowerCase()],has:d=>d.toLowerCase()in c}}}})}async function _s(e){let t=await ys(e);return t.ok?t.json():null}function Ql(e){return new Promise((t,r)=>{let o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="arraybuffer",o.onload=function(){let n=o.response;t(new Blob([n]))},o.onerror=r,o.send(null)})}async function Yl(e){let t=await ys(e);return t.ok?t.text():""}function Ly(e){return window.path.normalize(e).replace(/\\/g,"/")}function $y(e,t){return t?`@media ${t} {${e}}`:e}function Ky(e,t,r){let o=new RegExp(/@import ['"]([./\w-_]+)['"]\s*(.+)?;/gi),n=o.exec(t),i=[];for(;n;){let a=n.index,s=a+n[0].length,c=window.path,l=n[2],d=Ly(c.join(c.dirname(e),n[1])),u=Cs(d).then(h=>({text:$y(h,l),startIndex:a,endIndex:s}));i.push(u),n=o.exec(t)}return Promise.all(i)}async function Ny(e,t){let r=await Yl(e);r=r.replace(/(url\()([^/])/g,`$1${t}$2`);let o=await Ky(e,r,t);return Ul(r,o)}async function Cs(e){if(window.path){let r=window.path;return Ny(e,r.dirname(e)+"/")}let t=await Yl(e);return t.includes("@import")&&console.error('import is not supported without "browser-path" dependency'),t}function Xl(e){return new Promise(t=>{let r=document.createElement("style");r.onload=()=>t(),r.innerHTML=e,m(m(document).head).appendChild(r),r.sheet.cssRules[0].type!==CSSRule.IMPORT_RULE&&t()})}var ks=0,bn=[],Zl=null;function Vy(e,t,r={},o){return!1&&[t,...Object.keys(r),...Object.values(r).filter(i=>typeof i=="string")].some(i=>i.includes("_"))&&console.error('css className should not contain "_" character'),__getCssClass(e+t,r,o)}function Hy(e,t){e.includes("@import")&&console.error("import is not supported");let r=/^\s*\w*\..*[{,]/gm;return e.replace(r,o=>o.replace(/\.([a-zA-Z_])/g,`.${t}$1`))}var jl="";function Wy(e){return jl=Uy(Gy(qy(zy(e),8*e.length))),jl.toLowerCase()}function Uy(e){for(var t,r="0123456789ABCDEF",o="",n=0;n<e.length;n++)t=e.charCodeAt(n),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}function zy(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t}function Gy(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function qy(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,o=-271733879,n=-1732584194,i=271733878,a=0;a<e.length;a+=16){var s=r,c=o,l=n,d=i;o=He(o=He(o=He(o=He(o=Ve(o=Ve(o=Ve(o=Ve(o=Ne(o=Ne(o=Ne(o=Ne(o=Ke(o=Ke(o=Ke(o=Ke(o,n=Ke(n,i=Ke(i,r=Ke(r,o,n,i,e[a+0],7,-680876936),o,n,e[a+1],12,-389564586),r,o,e[a+2],17,606105819),i,r,e[a+3],22,-1044525330),n=Ke(n,i=Ke(i,r=Ke(r,o,n,i,e[a+4],7,-176418897),o,n,e[a+5],12,1200080426),r,o,e[a+6],17,-1473231341),i,r,e[a+7],22,-45705983),n=Ke(n,i=Ke(i,r=Ke(r,o,n,i,e[a+8],7,1770035416),o,n,e[a+9],12,-1958414417),r,o,e[a+10],17,-42063),i,r,e[a+11],22,-1990404162),n=Ke(n,i=Ke(i,r=Ke(r,o,n,i,e[a+12],7,1804603682),o,n,e[a+13],12,-40341101),r,o,e[a+14],17,-1502002290),i,r,e[a+15],22,1236535329),n=Ne(n,i=Ne(i,r=Ne(r,o,n,i,e[a+1],5,-165796510),o,n,e[a+6],9,-1069501632),r,o,e[a+11],14,643717713),i,r,e[a+0],20,-373897302),n=Ne(n,i=Ne(i,r=Ne(r,o,n,i,e[a+5],5,-701558691),o,n,e[a+10],9,38016083),r,o,e[a+15],14,-660478335),i,r,e[a+4],20,-405537848),n=Ne(n,i=Ne(i,r=Ne(r,o,n,i,e[a+9],5,568446438),o,n,e[a+14],9,-1019803690),r,o,e[a+3],14,-187363961),i,r,e[a+8],20,1163531501),n=Ne(n,i=Ne(i,r=Ne(r,o,n,i,e[a+13],5,-1444681467),o,n,e[a+2],9,-51403784),r,o,e[a+7],14,1735328473),i,r,e[a+12],20,-1926607734),n=Ve(n,i=Ve(i,r=Ve(r,o,n,i,e[a+5],4,-378558),o,n,e[a+8],11,-2022574463),r,o,e[a+11],16,1839030562),i,r,e[a+14],23,-35309556),n=Ve(n,i=Ve(i,r=Ve(r,o,n,i,e[a+1],4,-1530992060),o,n,e[a+4],11,1272893353),r,o,e[a+7],16,-155497632),i,r,e[a+10],23,-1094730640),n=Ve(n,i=Ve(i,r=Ve(r,o,n,i,e[a+13],4,681279174),o,n,e[a+0],11,-358537222),r,o,e[a+3],16,-722521979),i,r,e[a+6],23,76029189),n=Ve(n,i=Ve(i,r=Ve(r,o,n,i,e[a+9],4,-640364487),o,n,e[a+12],11,-421815835),r,o,e[a+15],16,530742520),i,r,e[a+2],23,-995338651),n=He(n,i=He(i,r=He(r,o,n,i,e[a+0],6,-198630844),o,n,e[a+7],10,1126891415),r,o,e[a+14],15,-1416354905),i,r,e[a+5],21,-57434055),n=He(n,i=He(i,r=He(r,o,n,i,e[a+12],6,1700485571),o,n,e[a+3],10,-1894986606),r,o,e[a+10],15,-1051523),i,r,e[a+1],21,-2054922799),n=He(n,i=He(i,r=He(r,o,n,i,e[a+8],6,1873313359),o,n,e[a+15],10,-30611744),r,o,e[a+6],15,-1560198380),i,r,e[a+13],21,1309151649),n=He(n,i=He(i,r=He(r,o,n,i,e[a+4],6,-145523070),o,n,e[a+11],10,-1120210379),r,o,e[a+2],15,718787259),i,r,e[a+9],21,-343485551),r=er(r,s),o=er(o,c),n=er(n,l),i=er(i,d)}return Array(r,o,n,i)}function Tn(e,t,r,o,n,i){return er(Qy(er(er(t,e),er(o,i)),n),r)}function Ke(e,t,r,o,n,i,a){return Tn(t&r|~t&o,e,t,n,i,a)}function Ne(e,t,r,o,n,i,a){return Tn(t&o|r&~o,e,t,n,i,a)}function Ve(e,t,r,o,n,i,a){return Tn(t^r^o,e,t,n,i,a)}function He(e,t,r,o,n,i,a){return Tn(r^(t|~o),e,t,n,i,a)}function er(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function Qy(e,t){return e<<t|e>>>32-t}function Yy(e){let t=`x${Wy(e).slice(0,5)}__`;function r(n){bn[o]=Hy(n,t),--ks,ks||(Xl(bn.join(`
`)),Zl&&Zl())}let o=bn.length;if(bn.push(""),!1){++ks;let n=window.rootPath||"";Cs(n+e).then(r).catch(()=>{r(e)})}return t}function Re(e){let t=e[0],r=Yy(t);return{getCssClass:Vy.bind(null,r)}}function Xy(){return window.navigator.platform.includes("Mac")}function Zy(){return window.navigator.userAgent.includes("Chrome")}function Jl(){return Xy()&&!Zy()}function No(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)}function wn(){return/Firefox/.test(navigator.userAgent)}function Dn(){return window.navigator.userAgent.includes("MSIE")||window.navigator.userAgent.includes("Trident")}function ed(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent)}var td={};function rd(e,t){td[e]=t}function Dr(e){return td[e]||document.body}var Ss={topLayer:"xced93__top-layer",popupLayer:"xced93__popup-layer",popupLayerIos:"xced93__popup-layer-ios"};function jy(e,t){let r=[Ss.topLayer];e==="popup"&&(r.push(Ss.popupLayer),No()&&r.push(Ss.popupLayerIos)),t.classList.add(...r)}function xs(e){let t=document.createElement("div");return jy(e,t),rd(e,t),t}var En=class extends Jt{addDisposable(t){return this._addDisposable(t)}addSignal(t,r,o){return this._addSignal(t,r,o)}addSignalCallOnce(t,r,o){return this._addSignalCallOnce(t,r,o)}listen(t,r,o,n){return this._listen(t,r,o,n)}};var Ye=class extends Jt{_createDependencyGroup(){return this._addDisposable(new En)}_createSignal(t){let r=new Ae(this);if(this._addDisposable(r),t)if(Array.isArray(t))for(let o of t)this._addSignal(o,n=>r.dispatch(n));else this._addSignal(t,o=>r.dispatch(o));return r}_createSignalProxy({signal:t,checkDispatchFn:r,modifyDataFn:o}){let n=new Ae(this);return this._addDisposable(n),this._addSignal(t,i=>{if(!r||r(i)){let a=o?o(i):i;n.dispatch(a)}}),n}};var od=["Learn.Reports.SendReportOnSchedulePopup.Schedule.Month.Day","Learn.EditContent.CompletionTab.ReenrollmentAfterCourseCompletion.Part1","Learn.EditContent.CompletionTab.ReenrollmentBeforeCertExpires.Part1","Learn.EditContent.CompletionTab.ReenrollmentAfterCourseCompletion.Part2","Studio.SideBar.StorageBar.Progress.Part1","Studio.SideBar.StorageBar.Progress.Part2"];var Rn=class extends Ye{constructor(t){super(),this._messages=t}addMessages(t){this._messages={...this._messages,...t}}getMessage(t,r){if(!this._messages.hasOwnProperty(t))return t;let o=m(this._messages[t]||od.includes(t));return typeof o!="string"&&(o=""),r&&(o=zl(o,r,this._generateKey)),o}messages(){return this._messages}hasMessage(t){return this._messages.hasOwnProperty(t)}_generateKey(t){return"{"+t.toLowerCase()+"}"}};var eo,Bs=null;function Jy(e){if(eo){y.warn("i18n has already been declared");return}eo=e}function nd(e){if(eo){eo.addMessages(e);return}let t=new Rn(e);Jy(t)}function B(e,t){let r=typeof e=="string"?e:e.value;return eo?eo.getMessage(r,t):(y.warn("i18n is not initialized"),r)}function id(e){return{value:e}}var In=null;function ad(e){if(In){y.warn("direction has already been declared");return}In=e,document.documentElement.dir=e}function Fe(){return In||(y.warn("direction is not initialized"),"ltr")}function Mn(){return Fe()==="rtl"}var sd="#E73018",cd="#FF8400",ld="#FFC252";var dd="#3CB46E";var md="#7C46B9";var An="#323537",ud="#818181";var We="noColor";function Be(e){let t=e&&wr(e.paddingTop)?e.paddingTop:null,r=e&&wr(e.paddingBottom)?e.paddingBottom:null;return{background:e&&e.background||null,paddingTop:t,paddingBottom:r}}function $t(e){return e.order.length}function pd(e){let t=[];return ot(e,r=>{t.push(r)}),t}function fd(){return{order:[],blocks:{}}}function tr(e,t){let r=fd();for(let o of e){let n=t(o);r.order.push(n),r.blocks[n]=o}return r}function e_(e,t){if(t<0||t>=e.order.length)return null;let r=e.order[t];return e.blocks[r]}function vt(e){return e_(e,0)}function Kt(e,t){if(t<0||t>=e.order.length)return null;let r=e.order[t];return e.blocks[r]}function hd(e){return Kt(e,0)}function gd(e){return Kt(e,e.order.length-1)}function yd(e,t){let r=e.order.indexOf(t);return Kt(e,r-1)}function _d(e,t){let r=e.order.indexOf(t);return Kt(e,r+1)}function ot(e,t){e.order.forEach(r=>{t(e.blocks[r])})}function vs(e,t){let r=fd();return e.order.forEach(o=>{let n=t(e.blocks[o]);r.order.push(o),r.blocks[o]=n}),r}function Cd(e,t){e.order.forEach(r=>{t(e.blocks[r])})}function kd(e,t,r){let o=e.order.indexOf(t);e.order.splice(o+1,0,r.key),e.blocks[r.key]=r}function bs(e,t){e.order.push(t.key),e.blocks[t.key]=t}function Fn(e,t){let r=e.order.indexOf(t);e.order.splice(r,1),delete e.blocks[t]}function Sd(e,t,r){e.order.includes(t)&&(delete e.blocks[t],e.order[e.order.indexOf(t)]=r.key,e.blocks[r.key]=r)}function ve(e,t){return e.find(r=>r.name===t)}function ft(e,t){let r=[...e],o=r.findIndex(n=>n.name===t.name);return o>=0?r[o]=t:r.push(t),r}function Pn(e,t){return e.filter(r=>!t.includes(r.name))}function xd(e,t){return e.some(r=>r.name===t)}var t_="$",te={create(e){return e},add(e,t){return ft(e,t)},compareTextStyles(e,t){return te.serializeStyles(e)===te.serializeStyles(t)},serializeStyles(e){return[...e].sort((t,r)=>fs(t.name,r.name)).map(t=>JSON.stringify(t)).join(t_)},remove(e,t){return Pn(e,t)},has(e,t){return xd(e,t)},getAlignment(e){let t=ve(e,"alignment");return t&&t.name==="alignment"?t.type:null},getFontSize(e){let t=ve(e,"fontSize");return t&&t.name==="fontSize"?t.size:null},getFontColor(e){let t=ve(e,"fontColor");return t&&t.name==="fontColor"?t.color:null},getTextHighlightColor(e){let t=ve(e,"textHighlightColor");return t&&t.name==="textHighlightColor"?t.color:null},getTextHighlightOpacity(e){let t=ve(e,"textHighlightOpacity");return t&&t.name==="textHighlightOpacity"?t.opacity:null}};var W={create(e={}){let{url:t=null,style:r=te.create([])}=e;return{url:t,style:r}},applyStyle(e,t){return W.create({...e,style:te.add(e.style,t)})},removeStyles(e,t){return W.create({...e,style:te.remove(e.style,t)})},hasStyle(e,t){return te.has(e.style,t)},compare(e,t){return e.url===t.url&&te.compareTextStyles(e.style,t.style)},setUrl(e,t){return W.create({...e,url:t})},removeUrl(e){return W.create({...e,url:null})}};var ce={LATO:"Lato",ROBOTO:"Roboto",OPEN_SANS:"Open Sans",MERRIWEATHER:"Merriweather",ROBOTO_SLAB:"Roboto Slab",EXO_2:"Exo 2",MONTSERRAT:"Montserrat",PT_SERIF:"PT Serif",IBM_PLEX_SANS:"IBM Plex Sans",INTER:"Inter",NUNITO_SANS:"Nunito Sans"};function Ts(e){return`${Vo(e)}, ${r_(e)}`}function Vo(e){switch(e){case ce.LATO:return"Lato";case ce.ROBOTO:return"roboto";case ce.OPEN_SANS:return"open-sans";case ce.MERRIWEATHER:return"merriweather";case ce.ROBOTO_SLAB:return"roboto-slab";case ce.EXO_2:return"exo-2";case ce.MONTSERRAT:return"montserrat";case ce.PT_SERIF:return"pt-serif";case ce.IBM_PLEX_SANS:return"ibm-plex-sans";case ce.INTER:return"inter";case ce.NUNITO_SANS:return"nunito-sans";default:return""}}function r_(e){switch(e){case ce.LATO:case ce.ROBOTO:case ce.OPEN_SANS:case ce.EXO_2:case ce.MONTSERRAT:case ce.IBM_PLEX_SANS:case ce.INTER:case ce.NUNITO_SANS:return"sans-serif";case ce.MERRIWEATHER:case ce.ROBOTO_SLAB:case ce.PT_SERIF:return"serif";default:return""}}var o_=['link[href*="bundle"]','link[href*="legacy_components_customization"]'],n_={include:o_.join(","),silent:!0};var Bd={};function qe(e,t,r){ht(e,{[t]:r})}function ht(e,t,r=window){(e instanceof r.HTMLElement||e instanceof r.SVGElement)&&(Dn()?(Object.keys(t).forEach(o=>{let n=t[o];n=n===null?"":n.toString(),Bd[o]=n}),cssVars({...n_,variables:Bd})):Object.keys(t).forEach(o=>{let n=t[o];n!=null&&(n=n.toString()),e.style.setProperty(o,n)}))}function Er(e){ht(document.documentElement,e)}function to(e){return m(getComputedStyle(document.documentElement)).getPropertyValue(e)}function On(e){let t=window.getComputedStyle(e),r=t&&t.transform?t.transform:"";return r=="none"&&(r=""),r}function Ln(e){let t=0,r=0,o=e.style;if(o&&o.transform&&o.transform!="none"){let n=o.transform.match(/translate(.*)/);if(n){let i=m(n[0].match(/-?\d(.\d+)?/g));t=parseFloat(i[0])||0,r=parseFloat(i[1])||0}}return{x:t,y:r}}function ke(...e){return e.filter(t=>t).join(" ")}function ws(e,t,r){let o=e/255,n=t/255,i=r/255,a=Math.max(o,n,i),s=Math.min(o,n,i),c=0,l=0,d=.5*(a+s);return a!=s&&(a==o?c=60*(n-i)/(a-s):a==n?c=60*(i-o)/(a-s)+120:a==i&&(c=60*(o-n)/(a-s)+240),d>0&&d<=.5?l=(a-s)/(2*d):l=(a-s)/(2-2*d)),[Math.round(c+360)%360,l,d]}function Y(e){let t=parseInt(e.substr(1,2),16),r=parseInt(e.substr(3,2),16),o=parseInt(e.substr(5,2),16);return[t,r,o]}function $n(e){let t=Y(e);return ws(t[0],t[1],t[2])}function ro(e,t){let r=t[3];return[(1-r)*e[0]+r*t[0],(1-r)*e[1]+r*t[1],(1-r)*e[2]+r*t[2]]}var rr={accent:"#2972E0",link:"#2972E0",topPanelBackground:"#FFFFFF",topPanelText:"#42484E"};function Ho(e,t){let[r,o,n]=Y(e);return`rgba(${r}, ${o}, ${n}, ${t})`}function vd(e,t){let[r,o,n]=$n(e);return`hsl(${r}, ${o*100}%, ${(n+t)*100}%)`}function bd(e=rr){return{"--color-accent-default":e.accent,"--color-accent-8":Ho(e.accent,.08),"--color-accent-16":Ho(e.accent,.16),"--color-accent-30":Ho(e.accent,.3),"--color-accent-60":Ho(e.accent,.6),"--color-accent-80":Ho(e.accent,.8),"--color-accent-dark":vd(e.accent,-.08),"--color-link-default":e.link,"--color-link-dark":vd(e.link,-.08),"--color-top-panel-background-default":e.topPanelBackground,"--color-top-panel-text-default":e.topPanelText}}var Ds={headerFontFamily:"Roboto",contentFontFamily:"Roboto"};function Td(e=Ds){return{"--header-font-family":e.headerFontFamily,"--content-font-family":e.contentFontFamily}}var ee=null;function Nt(){if(!ee)throw new Error("semanticColors not initialized");return ee}function wd({element:e,customColors:t,windowContext:r=window}){ee={...t,actionCriticalDefault:"#EB5B47",actionCriticalDisabled:"#FCB6AC",actionCriticalHovered:"#E2422C",actionCriticalPressed:"#CB3420",actionPrimaryDefault:t.customAccent,actionPrimaryDisabled:"#C4C7CA",actionPrimaryHovered:or(t.customAccent,0,-1,-4),actionPrimaryPressed:or(t.customAccent,0,-1,-8),actionSliderDefault:"#32353729",actionSliderDisabled:"#C4C7CA",actionToggleDepressedDefault:"#D6D7D7",actionToggleDepressedDisabled:"#EFEFEF",actionToggleDepressedHovered:"#BDBEBF",actionTogglePressedDisabled:Rr(t.customAccent,.36),actionWarningDefault:"#FB8B28",actionWarningDisabled:"#FEC897",actionWarningHovered:"#EE7B17",actionWarningPressed:"#DF6316",backgroundActive:"#3235370F",backgroundBlue:"#ECEDEE",backgroundDefault:"#F6F6F7",backgroundHovered:"#3235370A",borderAccentDefault:t.customAccent,borderAccentDisabled:"#C4C7CA",borderAccentHovered:or(t.customAccent,0,-1,-4),borderAccentPressed:or(t.customAccent,0,-1,-8),borderCritical:"#EB5B47",borderCriticalSubdued:"#FFD6D1",borderDefault:"#D6D7D7",borderDisabled:"#E6E6E7",borderHovered:"#BDBEBF",borderInfoSubdued:"#C7E3FF",borderMediaDefault:"#3235371F",borderMediaDisabled:"#32353714",borderMediaHovered:"#32353729",borderNewSubdued:"#DED6FC",borderOncolorDefault:"#FFFFFF",borderOncolorSecondary:"#FFFFFF66",borderSuccessSubdued:"#C5ECD5",borderWarningSubdued:"#FFDEC2",customPanelHovered:Rr(t.customTextDefault,.12),customPanelSubdued:Rr(t.customTextDefault,.08),customTextSubdued:Rr(t.customTextDefault,.72),decorativeChartEight:"#323537",decorativeChartEleven:"#517CE9",decorativeChartFive:"#CB3420",decorativeChartFour:"#983484",decorativeChartFourteen:"#BDBEBF",decorativeChartNine:"#5DC9B5",decorativeChartOne:"#2984E0",decorativeChartSeven:"#EE5091",decorativeChartSix:"#745CDE",decorativeChartStatusBackground:"#EFEFEF",decorativeChartStatusBackgroundHovered:"#DEDEDFB8",decorativeChartStatusCritical:"#E2422C",decorativeChartStatusCriticalHovered:"#E2422C3D",decorativeChartStatusInProgress:"#2985E0",decorativeChartStatusInProgressHovered:"#2985E03D",decorativeChartStatusSuccess:"#3CB46E",decorativeChartStatusSuccessHovered:"#3CB46E3D",decorativeChartStatusWarning:"#FFC252",decorativeChartStatusWarningHovered:"#FFC2527A",decorativeChartTen:"#EEA811",decorativeChartThirteen:"#33AFBD",decorativeChartThree:"#80B43C",decorativeChartTwelve:"#3CB46E",decorativeChartTwo:"#FB8B28",decorativeCollaborationEight:"#503AB0",decorativeCollaborationFive:"#80B43C",decorativeCollaborationFour:"#983484",decorativeCollaborationNine:"#EEA811",decorativeCollaborationOne:"#1F4198",decorativeCollaborationSeven:"#FB8B28",decorativeCollaborationSix:"#B8195B",decorativeCollaborationTen:"#5C247A",decorativeCollaborationThree:"#EE5091",decorativeCollaborationTwo:"#745CDE",decorativeReactionsOne:"#FEE9F1",dividerBackground:"#3235371F",dividerDefault:"#E6E6E7",dividerOncolor:"#FFFFFF33",focusCritical:"#FFD6D1",focusDefault:Rr(t.customAccent,.4),focusOncolor:"#FFFFFF",focusWarning:"#FFDEC2",iconAccentDefault:t.customAccent,iconAccentHovered:or(t.customAccent,0,-1,-4),iconAccentPressed:or(t.customAccent,0,-1,-8),iconAlphaDefault:"#323537",iconAlphaDisabled:"#32353752",iconAlphaPlaceholder:"#32353799",iconAlphaSubdued:"#030E1B94",iconCritical:"#E2422C",iconCriticalDisabled:"#FCB6AC",iconDefault:"#323537",iconDisabled:"#BDBEBF",iconInfo:"#2078CF",iconInfoDisabled:"#99C9FA",iconNew:"#654BD8",iconNewDisabled:"#BCAEF7",iconOncolorDefault:"#FFFFFF",iconOncolorDisabled:"#FFFFFF66",iconOncolorSecondary:"#FFFFFFA3",iconPlaceholder:"#848687",iconSubdued:"#6C737B",iconSuccess:"#389F62",iconSuccessDisabled:"#9CE0B8",iconWarning:"#FB8B28",iconWarningDisabled:"#FEC897",indicatorOncolor:"#FFFFFF",indicatorPrimary:t.customAccent,indicatorSpecial:"#EB5B47",indicatorSubdued:"#B2B8BD",overlayCritical:"#CB3420",overlayDark:"#323537",overlayHovered:"#FFFFFF66",overlayModalsActions:"#00000066",overlayModalsDark:"#000000B8",overlayModalsDefault:"#32353766",overlayModalsHovered:"#32353799",overlayModalsLight:"#FFFFFFE5",overlayNew:"#654BD8",overlayPressed:"#FFFFFF",overlaySemidark:"#323537DE",overlaySubdued:"#FFFFFF33",surfaceAccentDefault:Rr(t.customAccent,.12),surfaceAccentHovered:Rr(t.customAccent,.2),surfaceCriticalDefault:"#FEE4DF",surfaceCriticalHovered:"#FFD6D1",surfaceCriticalSubdued:"#FFF5F5",surfaceDefault:"#FFFFFF",surfaceDisabled:"#3235370A",surfaceHovered:"#3235371F",surfaceInfoDefault:"#D8ECFF",surfaceInfoHovered:"#C7E3FF",surfaceInfoSubdued:"#ECF5FF",surfaceNeutralDefault:"#EFEFEF",surfaceNeutralHovered:"#E6E6E7",surfaceNeutralSubdued:"#F7F7F7",surfaceNewDefault:"#E7E2FE",surfaceNewHovered:"#DED6FC",surfaceNewSubdued:"#F3F0FF",surfacePressed:"#32353729",surfaceSubdued:"#32353714",surfaceSuccessDefault:"#DFF4E8",surfaceSuccessHovered:"#C5ECD5",surfaceSuccessSubdued:"#EFF9F3",surfaceWarningDefault:"#FFEED4",surfaceWarningHovered:"#FFE6C1",surfaceWarningSubdued:"#FFF6E9",textAccentDefault:t.customAccent,textAccentHovered:or(t.customAccent,0,-1,-4),textAccentPressed:or(t.customAccent,0,-1,-8),textAlphaDefault:"#323537",textAlphaDisabled:"#32353752",textAlphaPlaceholder:"#32353766",textAlphaSubdued:"#030E1B94",textCritical:"#E2422C",textCriticalDisabled:"#FCB6AC",textDefault:"#323537",textDisabled:"#BDBEBF",textInfo:"#2078CF",textInfoDisabled:"#99C9FA",textLinkDefault:"#295DE0",textLinkPressed:"#214FC4",textNew:"#654BD8",textNewDisabled:"#BCAEF7",textOncolorDefault:"#FFFFFF",textOncolorDisabled:"#FFFFFF66",textOncolorSecondary:"#FFFFFFA3",textPlaceholder:"#ADAEAF",textSubdued:"#6C737B",textSuccess:"#389F63",textSuccessDisabled:"#9CE0B8",textWarning:"#FB8B28",textWarningDisabled:"#FEC897"};let o={"--color-action-primary-default":ee.actionPrimaryDefault,"--color-action-primary-hovered":ee.actionPrimaryHovered,"--color-action-primary-pressed":ee.actionPrimaryPressed,"--color-action-toggle-pressed-disabled":ee.actionTogglePressedDisabled,"--color-border-accent-default":ee.borderAccentDefault,"--color-border-accent-hovered":ee.borderAccentHovered,"--color-border-accent-pressed":ee.borderAccentPressed,"--color-custom-accent":ee.customAccent,"--color-custom-panel-default":ee.customPanelDefault,"--color-custom-panel-hovered":ee.customPanelHovered,"--color-custom-panel-subdued":ee.customPanelSubdued,"--color-custom-text-default":ee.customTextDefault,"--color-custom-text-subdued":ee.customTextSubdued,"--color-focus-default":ee.focusDefault,"--color-icon-accent-default":ee.iconAccentDefault,"--color-icon-accent-hovered":ee.iconAccentHovered,"--color-icon-accent-pressed":ee.iconAccentPressed,"--color-indicator-primary":ee.indicatorPrimary,"--color-surface-accent-default":ee.surfaceAccentDefault,"--color-surface-accent-hovered":ee.surfaceAccentHovered,"--color-text-accent-default":ee.textAccentDefault,"--color-text-accent-hovered":ee.textAccentHovered,"--color-text-accent-pressed":ee.textAccentPressed};e?ht(e,o,r):Er(o)}function Rr(e,t){let[r,o,n]=Y(e);return`rgba(${r}, ${o}, ${n}, ${t})`}function or(e,t,r,o){let[n,i,a]=$n(e),s=(n+t).toFixed(2),c=(i*100+r).toFixed(2),l=(a*100+o).toFixed(2);return`hsl(${s}, ${c}%, ${l}%)`}var Kn={accent:rr.accent,link:rr.link,topPanelBackground:rr.topPanelBackground,topPanelText:rr.topPanelText};function Dd(e){Kn.accent=e.accent,Kn.link=e.link,Kn.topPanelBackground=e.topPanelBackground,Kn.topPanelText=e.topPanelText}function i_(e){let t={...rr,...e==null?void 0:e.baseColors};Dd(t),wd({element:e==null?void 0:e.element,customColors:{customAccent:t.accent,customPanelDefault:t.topPanelBackground,customTextDefault:t.topPanelText},windowContext:e==null?void 0:e.windowContext});let r=bd(t);e!=null&&e.element?ht(e.element,r,e.windowContext):Er(r)}function a_(e){let t=(e==null?void 0:e.baseFonts)||Ds,r=Td(t);e!=null&&e.element?ht(e.element,r,e.windowContext):Er(r)}function Ed(e,t=window){a_(e&&{element:e.element,baseFonts:e.baseFonts,windowContext:t}),i_(e&&{element:e.element,baseColors:e.baseColors,windowContext:t})}function Rd({settings:e,topPanelColors:t}){let r={accent:e.design.accentColor};t&&(r.topPanelBackground=t.topPanelBackground,r.topPanelText=t.topPanelText),Er({"--roll-player-accent-color":e.design.accentColor,"--player-main-font":Ts(e.design.headerFont),"--content-font":Ts(e.design.contentFont)}),Ed({baseColors:r})}function Id({settings:e,i18nData:t}){Rd({settings:e}),ad(e.advanced.direction),nd(t)}var U={CLICK:"click",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",CHANGE:"change",SELECTION_CHANGE:"selectionchange",INPUT:"input",TEXT_INPUT:"textInput",KEY_DOWN:"keydown",KEY_PRESS:"keypress",PASTE:"paste",CUT:"cut",COPY:"copy",BLUR:"blur",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",LOAD:"load",LOAD_END:"loadend",LOADED_METADATA:"loadedmetadata",UNLOAD:"unload",BEFOREUNLOAD:"beforeunload",ERROR:"error",DRAG_START:"dragstart",DRAG_OVER:"dragover",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DROP:"drop",RESIZE:"resize",SCROLL:"scroll",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",ORIENTATIONCHANGE:"orientationchange",CUSTOM_CONNECTED:"connected",CUSTOM_DISCONNECTED:"disconnected",TRANSITIONEND:"transitionend",TOUCHSTART:"touchstart",VISIBILITYCHANGE:"visibilitychange"};var nr=class{constructor(t){this.Type=t}};function Ad(e,t){return new Promise((r,o)=>{if(e=e,typeof e.arrayBuffer=="undefined"){let n=new FileReader;pt(n,U.LOAD_END,()=>{n.result||o();let i=n.result;r(Md(i,t))}),pt(n,U.ERROR,o),n.readAsArrayBuffer(e)}else e.arrayBuffer().then(n=>r(Md(n,t))).catch(o)})}function Md(e,t){let r=new Uint32Array(e.slice(0,Uint32Array.BYTES_PER_ELEMENT))[0],o=new Uint8Array(e.slice(Uint32Array.BYTES_PER_ELEMENT)),{Type:n}=t(r),i=n.decode(o),a=n.toObject(i);return{version:r,data:a}}function Fd(e,t,r){let o=t[e];return o?Ot(o)?{keyValue:o,newKeys:t}:{keyValue:(Es(o)||o)._,newKeys:o}:(y.error(`key not found: ${e}, path: ${r.join(".")}`),{keyValue:e,newKeys:t})}function Pd(e,t,r){for(let o of Object.keys(t)){let{keyValue:n,newKeys:i}=Fd(o,t,r);if(n===e&&o!=="_")return{key:o,newKeys:i}}return y.error(`cant find value: ${e}, path: ${r.join(".")}`),{key:e,newKeys:t}}var Nn=class{constructor(t){this.keys=t}};function A(e){return new Nn(e)}function Es(e){return e instanceof Nn?e.keys:null}function Ir(e,t,r){if(Al(e))return e.map(n=>Ir(n,t,r));let o=Es(t);if(o)return $l(e,n=>Ir(n,m(o),r));if(gn(e)){let n={};return kn(e,(i,a)=>{let{key:s,newKeys:c}=Pd(a,t,r);n[s]=Ir(i,c,[...r,s])}),n}return e}immer.enableAllPlugins();var ir=immer.produce,Uv=immer.applyPatches;!1&&immer.setAutoFreeze(!0);var s_="";function Mr(){return s_}var gt={TOOLTIP:"tooltip",PLAYER_MAIN:"playerMain",CONTENT:"content"};var Od={_:"ds",background:{_:"b",color:"c",opacity:"o"},paddingTop:"pt",paddingBottom:"pb"};var Ie={key:"k",type:"t"},c_={key:"k",type:"t",designSettings:{...Od}},le=c_;var re={...Ie,src:"s",fileName:"fn",fileExtension:"fe",fileSize:"fs",isLoading:"iL"},Ld={...re,...le};var Vn="#",bt={[Vn]:Vn},l_=1,d_=2,m_=4,u_=8,Wo={FONT_SIZE:2,FONT_COLOR:3,TEXT_HIGHLIGHT_COLOR:4,TEXT_HIGHLIGHT_OPACITY:5,ALIGNMENT:6},p_="#";function Vt(e){return e===p_}function $d(e){if(typeof e=="object"&&e&&e.hasOwnProperty(Vn)){let t=e[Vn],r=[],o=t.length&&!Vt(t[0])&&typeof t[0]=="number"&&!isNaN(t[0])?t[0]:void 0,n=t.length&&!Vt(t[0])&&Ot(t[0])?t[0]:t.length>1&&!Vt(t[1])&&Ot(t[1])?t[1]:void 0,i=t[Wo.FONT_SIZE],a=t[Wo.FONT_COLOR],s=t[Wo.TEXT_HIGHLIGHT_COLOR],c=t[Wo.TEXT_HIGHLIGHT_OPACITY],l=t[Wo.ALIGNMENT];return!Vt(o)&&typeof o=="number"&&!isNaN(o)&&(o&l_&&r.push({name:"bold"}),o&d_&&r.push({name:"italic"}),o&m_&&r.push({name:"underline"}),o&u_&&r.push({name:"strikethrough"})),!Vt(i)&&(typeof i=="number"||i==="auto")&&r.push({name:"fontSize",size:i}),!Vt(a)&&Ot(a)&&r.push({name:"fontColor",color:a}),!Vt(s)&&Ot(s)&&r.push({name:"textHighlightColor",color:s}),!Vt(c)&&typeof c=="number"&&!isNaN(c)&&r.push({name:"textHighlightOpacity",opacity:c}),!Vt(l)&&(l==="superscript"||l==="subscript")&&r.push({name:"alignment",type:l}),W.create({style:te.create(r),url:n})}}var ar={text:"t",meta:{_:"m",...bt},length:"l"};var oe={...Ie,src:"s",width:"w",height:"h",alignment:"a",characters:{_:"c",...ar}},Kd={...oe,...le};var oo={crop:{_:"cp",top:"tp",left:"lf",right:"rt",bottom:"bm"}};var Ar={...Ie,src:"s",width:"w",height:"h",alignment:"a",characters:{_:"c",...ar},isBlob:"iB"},Hn={...Ar,...le};var f_={...Ar,parentCollageKey:"cK"},h_={...Hn,parentCollageKey:"cK"},Wn={...Ie,alignment:"a",images:{_:"is",...f_,length:"l"}},ge={...Wn,images:{...Wn.images,...oo}},Nd={...ge,...le,images:{...ge.images,...h_}};var q={...Ie,viewType:"v",textAlign:"tA",characters:{_:"c",...ar},isOrderedListFirstItem:"iO"},Xe={...q,...le};var no={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...Xe})}};var g_={type:"t",width:"w",height:"h",src:"s"},y_={choices:{_:"ch",key:"k",content:{_:"c",...no},correct:"cr",length:"l"}},__={caseSensitive:"cs",answers:{_:"a",key:"k",text:"t",length:"l"}},C_={type:"t",correct:{_:"c",...no},incorrect:{_:"i",...no},answered:{_:"a",...no}},k_={key:"k",type:"t",description:{_:"d",...no},attachment:{_:"a",...g_},content:{_:"c",...y_,...__},feedback:{_:"f",...C_}},Fr={...Ie,settings:{_:"ss",includeInProgress:"iip",shuffleAnswers:"sa",showCorrectAnswers:"sca"},questions:{_:"q",...k_}},Uo={...Fr,questions:{...Fr.questions,attachment:{...Fr.questions.attachment,...oo}}},be={...Uo,questions:{...Uo.questions,attachment:{...Uo.questions.attachment,title:"tl",previewSrc:"pws"}}},Vd={...be,...le};var et={key:"k",type:"t",characters:{_:"c",...ar},noteType:"nT"},zo={...et,customIconColor:{_:"cIC",color:"c",opacity:"o"},customBackgroundColor:{_:"cBC",color:"c",opacity:"o"}},Hd={...zo,...le};var Wd={name:"n",color:"c",opacity:"o"},S_={...Wd,data:{_:"md",...bt}},Ud={key:"k",content:{_:"C",...q,...Ar},meta:{_:"m",...Wd}},zd={...Ud,verticalTextAlign:"vta",meta:{_:"m",...S_}},x_={...zd,content:{_:"C",...Xe,...Hn}},B_={colsMap:A({_:"cM",...Ud})},v_={colsMap:A({_:"cM",...zd})},b_={colsMap:A({_:"cM",...x_})},Go={...Ie,alignment:"a",colsOrder:"cO",rowsOrder:"rO",rowsMap:A({_:"rM",...B_}),meta:{_:"m",name:"n"}},yt={...Go,rowsMap:A({_:"rM",...v_})},Gd={...yt,...le,rowsMap:A({_:"rM",...b_})};var qd={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...Ar,...oe,...re,...Fr})}},T_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...qd}},w_={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...qd}},Qd={intro:{_:"i",...T_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...w_})}},Un={main:{_:"m",navigationType:"nT",numberingEnabled:"nE",nextButtonEnabled:"nbE",copyingEnabled:"cE"},design:{_:"d",accentColor:"aC",headerFont:"hF",contentFont:"cF"}};var Yd={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...Wn,...Fr})}},D_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Yd}},E_={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Yd}},Xd={intro:{_:"i",...D_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...E_})}},zn=Un;var Zd={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...Uo})}},R_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Zd}},I_={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Zd}},jd={intro:{_:"i",...R_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...I_})}},Gn=zn;var Jd={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...be})}},M_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Jd}},A_={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Jd}},em={intro:{_:"i",...M_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...A_})}},qn=Gn;var tm={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...be,...et})}},F_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...tm}},P_={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...tm}},rm={intro:{_:"i",...F_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...P_})}},Qn=qn;var om={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...be,...et,...Go})}},O_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...om}},L_={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...om}},Yn={intro:{_:"i",...O_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...L_})}},qo=Qn;var nm=Yn,Xn={...qo,main:{...qo.main,longreadType:"lT"}};var Rs={color:"c",opacity:"o"},Is={src:"s",width:"w",height:"h",overlay:{_:"o",...Rs},...oo},Ms={type:"t",image:{_:"i",...Is},overlay:{_:"O",...Rs},...Rs};var As={type:"t",image:{_:"i",...Is},text:{_:"rt",...q},verticalTextAlign:"vta",background:{_:"b",...Ms}},Fs={...As,meta:{_:"m",name:"n",data:{_:"md",...bt}}},im={...Fs,text:{_:"rt",...Xe}},Ps={key:"k",frontSide:{_:"fs",...As},backSide:{_:"bs",...As}},$_={...Ps,frontSide:{_:"fs",...Fs},backSide:{_:"bs",...Fs}},K_={...Ps,frontSide:{_:"fs",...im},backSide:{_:"bs",...im}},Zn={key:"k",type:"t",cardsBlockMap:{_:"cbm",order:{_:"o",length:"l"},blocks:A({_:"B",...Ps})},maxCardsInRow:"mcir",cardsLayout:"cl",background:{_:"b",...Ms}},nt={...Zn,cardsBlockMap:{...Zn.cardsBlockMap,blocks:A({_:"B",...$_})}},am={...nt,...le,cardsBlockMap:{...nt.cardsBlockMap,blocks:A({_:"B",...K_})}};var sm={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...be,...et,...Go,...Zn})}},N_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...sm}},V_={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...sm}},cm={intro:{_:"i",...N_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...V_})}},jn=Xn;var lm={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...be,...et,...yt,...nt})}},H_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...lm}},W_={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...lm}},Jn={intro:{_:"i",...H_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...W_})}},ei=jn;var ti=Jn,ri={...ei,advanced:{_:"a",direction:"d"}};var dm=ti,oi=ri;var Ht={...Ie,alignment:"a",dividerType:"dT",dividerColor:{_:"dC",color:"c",opacity:"o"},style:"st",paragraph:{_:"p",...q},paragraphStyle:"pS",meta:{_:"m",name:"n",data:{_:"md",...bt}}},mm={...Ht,...le,paragraph:{_:"p",...Xe}};var um={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...be,...et,...yt,...nt,...Ht})}},U_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...um}},z_={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...um}},ni={intro:{_:"i",...U_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...z_})}},ii=oi;var G_={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...be,...et,...yt,...nt,...Ht})}},q_={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...G_}},ai={...ni,chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...q_})}},si=ii;var pm={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...be,...zo,...yt,...nt,...Ht})}},Q_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...pm}},Y_={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...pm}},fm={intro:{_:"i",...Q_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...Y_})}},ci=si;var hm={...Ie,src:"s",width:"w",height:"h",alignment:"a",isLoading:"iL",posterSrc:"pSc",paragraph:{_:"p",...q}},gm={...le,src:"s",width:"w",height:"h",alignment:"a",isLoading:"iL",posterSrc:"pSc",paragraph:{_:"p",...Xe}};var ym={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...q,...oe,...re,...ge,...be,...zo,...yt,...nt,...Ht,...hm})}},X_={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...ym}},Z_={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...ym}},li={intro:{_:"i",...X_},chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...Z_})}},di=ci;var _m={...le,paragraph:{_:"p",...Xe},continueColor:{_:"cC",color:"c",opacity:"o"},meta:{_:"m",name:"n",data:{_:"md",...bt}}};var Cm={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:A({_:"B",...Xe,...Kd,...Ld,...Nd,...Vd,...Hd,...Gd,...am,...mm,..._m,...gm})}},j_={...ai.intro,contentState:{_:"cs",...Cm}},J_={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...Cm}},km={...li,intro:j_,chapters:{_:"c",order:{_:"o",length:"l"},blocks:A({_:"B",...J_})}},Sm=di;function tC(e){switch(e){case 4:return Un;case 5:return zn;case 6:return Gn;case 7:return qn;case 8:return Qn;case 9:return qo;case 10:return Xn;case 11:return jn;case 12:return ei;case 13:return ri;case 14:return oi;case 15:return ii;case 16:return si;case 17:return ci;case 18:return di;case 19:return Sm;default:throw Error(`cannot decode json document with version ${e}`)}}function xm(e,t){let r=tC(t);return Ir(e,r,[])}var Bm={},rC=Math.pow(2,24);function Ls(){let e;for(;e===void 0||Bm.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*rC).toString(32);return Bm[e]=!0,e}var Os=new WeakMap;function vm(e){return Os.has(e)||Os.set(e,Ls()),Os.get(e)}function x(){return Ls()}var p={PARAGRAPH:"p",IMAGE:"i",COLLAGE:"c",EMBED:"e",EXERCISE:"E",ATTACHMENT:"a",NOTE:"n",TABLE:"t",FLIP_CARD:"fc",DIVIDER:"d",CONTINUE:"ct",VIDEO:"v"};var Wt={create({key:e,fileName:t,fileExtension:r,fileSize:o,src:n,isLoading:i}){return{key:e||x(),type:p.ATTACHMENT,fileName:t||"",fileExtension:r||"pdf",fileSize:o||0,src:n,isLoading:i||!1}},clone(e){let t=x();return{...e,key:t}},toAttachmentBlock(e){return e&&e.type===p.ATTACHMENT?e:null},getBlockType(e){return"attachment"}};var oC={top:0,right:0,bottom:0,left:0};function $s(){return{...oC}}function bm(e,t,r,o){let n=e,i=t;return r>o?(i=Math.min(e*(o/r),t),n=i*(r/o)):(n=Math.min(t*(r/o),e),i=n*(o/r)),{top:Math.ceil((t-i)/2),right:Math.ceil((e-n)/2),bottom:Math.ceil((t-i)/2),left:Math.ceil((e-n)/2)}}function Ue({width:e,height:t,crop:r,src:o}){return{src:o,crop:r||$s(),width:r?e-r.left-r.right:e,height:r?t-r.top-r.bottom:t}}function Tm(e){let{width:t,height:r}=e,o=Ue(e),n=t-o.width,i=r-o.height,a=n===0?0:o.crop.left/t*(t/n)*100,s=i===0?0:o.crop.top/r*(r/i)*100;return{width:t/o.width*100,height:r/o.height*100,positionX:a,positionY:s}}function Ks(e){return e.crop?{src:e.src,width:e.width,height:e.height}:e}function it(e){return{...e,background:e.background&&{...e.background}}}var nC="collage",iC=3;var aC=960,ne={create({key:e,images:t=[],alignment:r,designSettings:o}){let n=e||x(),i=t.map(a=>({...a,parentCollageKey:n}));return{key:n,type:p.COLLAGE,images:i,alignment:r||"inner",designSettings:o&&Be(o)}},clone(e){let t=x();return{...e,key:t,images:e.images.map(r=>({...r,key:x(),parentCollageKey:t})),designSettings:e.designSettings&&it(e.designSettings)}},cloneImage(e){return{...e,key:x()}},toCollageBlock(e){return e&&e.type===p.COLLAGE?e:null},getBlockType(e){return nC},isCollageBlock(e){return!!e&&e.type===p.COLLAGE},getCollagedImage(e,t){return e.images.find(r=>r.key===t)||null},getCollagedImageIndex(e,t){return e.images.findIndex(r=>r.key===t)},supportFullAlign(e){return e.images.length>1?!0:Ue(e.images[0]).width>=aC},supportFloat(e){return e.images.length>1?!1:!!e.images[0].width},supportAlignment(e,t){switch(t){case"float-left":return ne.supportFloat(e);case"full":case"outer":return ne.supportFullAlign(e);case"inner":return!0}},canAddImage(e){return e.images.length<iC}};var mi=class{static create({itemKey:t,captionSelected:r}){return{collageSelectedItemKey:t||"",collageItemCaptionSelected:r||!1}}};function wm(e){return e.length===2}function Dm({offset:e,textLength:t,getCharacterByIndex:r}){let o=0,n=0;for(;o<t;++o,++n)if(wm(r(o))&&++n,n>=e)return o;return o}function Em({offset:e,textLength:t,getCharacterByIndex:r}){let o=0,n=0;for(;o<t;++o,++n){if(o>=e)return n;wm(r(o))&&++n}return n}function $(e){return!e||e.type!==p.PARAGRAPH?null:e}var Rm=["ul","ol"],Im=["blockquote","pullquote"],Mm=["header","subheader"],sC=[...Mm,...Im,...Rm,"text"];function Ns(e,t){return e[t].meta.url}var k={create(e={}){!1&&m(e.viewType==null||sC.includes(e.viewType));let t=e.characters||[];return typeof t=="string"&&(t=k.createCharacters(t,W.create())),e.viewType=="ol"?{type:p.PARAGRAPH,key:e.key||x(),viewType:e.viewType,textAlign:e.textAlign||"left",characters:t,isOrderedListFirstItem:e.isOrderedListFirstItem||!1,designSettings:e.designSettings&&Be(e.designSettings)}:{type:p.PARAGRAPH,key:e.key||x(),viewType:e.viewType||"text",textAlign:e.textAlign||"left",characters:t,designSettings:e.designSettings&&Be(e.designSettings)}},clone(e,t={}){return{...xt(e),key:x(),...t}},createCharacters(e,t){return[...e].map(r=>({text:r,meta:t}))},extendHyperlinksSelection(e,t,r=e.characters.length){let{characters:o}=e,n=Ns.bind(null,o),i=n(t);if(i)for(;t>0&&i==n(t-1);)--t;let a=n(r-1);if(a)for(;r<o.length&&a==n(r);)++r;return{start:t,end:r}},hasHyperlink(e,t,r=e.characters.length){for(let o=t;o<r;++o)if(Ns(e.characters,o))return!0;return!1},getBlockViewType(e){return e.viewType},getHyperlinksInfo(e){let t=[],r=null;for(let o=0;o<e.length;++o){let n=Ns(e,o);r&&r.url!=n&&(t.push({start:r.start,end:o,url:r.url}),r=null),n&&!r&&(r={start:o,url:n})}return r&&t.push({start:r.start,end:e.length,url:r.url}),t},getParagraphText(e){return e.characters.reduce((t,r)=>t+r.text,"")},getCharacters(e){return e.characters.map(t=>t.text)},getWordStartIndex(e,t){return Gl(k.getParagraphText(e),t)},getWordEndIndex(e,t){return ql(k.getParagraphText(e),t)},isList(e){let t=$(e);return!!t&&Rm.includes(t.viewType)},isQuote(e){let t=$(e);return!!t&&Im.includes(t.viewType)},isHeading(e){let t=$(e);return!!t&&Mm.includes(t.viewType)},isEmptyParagraph(e){let t=$(e);return!!t&&t.characters.length==0},getTextRuns(e,t){t||(t=n=>n);let r=e.characters;if(r.length==0)return[];let o=[{text:r[0].text,styles:t(r[0].meta),isLast:!1}];for(let n=1;n<r.length;++n){let i=r[n],a=t(i.meta),s=o.length-1,c=o[s].styles;W.compare(a,c)?o[s].text+=i.text:o.push({text:i.text,styles:a,isLast:!1})}return o[o.length-1].isLast=!0,o},convertBrowserToModelOffset(e,t){return Dm({offset:t,textLength:e.characters.length,getCharacterByIndex:r=>e.characters[r].text})},convertModelToBrowserOffset(e,t){return Em({offset:t,textLength:e.characters.length,getCharacterByIndex:r=>e.characters[r].text})}};var Pe={basicPaletteCrimson:"#B8195B",basicPaletteDeepSpace:"#02318A",basicPaletteSpaceBlue:"#0047CB",black60:"#00000099",black8:"#00000014",black80:"#000000CC",blackDefault:"#000000",blue16:"#4A90E229",blue30:"#4A90E24D",blue8:"#4A90E214",blue80:"#4A90E2CC",blueBlack:"#0D2E53",blueDark:"#287BDC",blueDarker:"#1E67BD",blueDefault:"#4A90E2",collaboration1:"#1F4198",collaboration10:"#5C247A",collaboration2:"#8069E5",collaboration3:"#EE5091",collaboration4:"#983484",collaboration5:"#80B43C",collaboration6:"#B8195B",collaboration7:"#FB8B28",collaboration8:"#462FAC",collaboration9:"#EEA811",dark12:"#42484E1F",dark14:"#42484E24",dark16:"#42484E29",dark20:"#42484E33",dark28:"#42484E47",dark40:"#42484E66",dark60:"#42484E99",dark72:"#42484EB8",dark8:"#42484E14",dark80:"#42484ECC",dark87:"#42484EDE",darkDark:"#2F3337",darkDefault:"#42484E",grayDark:"#D0D0D1",grayDarker:"#C0C0C1",grayDefault:"#EFEFF0",grayLight:"#F2F2F3",grayLighter:"#F6F6F7",green16:"#3CB46E29",green30:"#3CB46E4D",green8:"#3CB46E14",green80:"#3CB46ECC",greenBlack:"#091B10",greenDark:"#32955B",greenDarker:"#287748",greenDefault:"#3CB46E",orange16:"#FF9F3329",orange30:"#FF9F334D",orange8:"#FF9F3314",orange80:"#FF9F33CC",orangeBlack:"#603506",orangeDark:"#F08713",orangeDarker:"#CE720D",orangeDefault:"#FF9F33",purple16:"#6257BA29",purple30:"#6257BA4D",purple8:"#6257BA14",purple80:"#6257BACC",purpleBlack:"#262150",purpleDark:"#4F44A6",purpleDarker:"#413889",purpleDefault:"#6257BA",red16:"#F0513D29",red30:"#F0513D4D",red8:"#F0513D14",red80:"#F0513DCC",redBlack:"#5A1007",redDark:"#EE2F17",redDarker:"#CC250F",redDefault:"#F15541",slate10:"#8D98A21A",slate20:"#8D98A233",slate40:"#8D98A266",slate5:"#8D98A20D",slate60:"#8D98A299",slate80:"#8D98A2CC",slateDefault:"#8D98A2",white16:"#FFFFFF29",white30:"#FFFFFF4D",white60:"#FFFFFF99",white80:"#FFFFFFCC",whiteDefault:"#FFFFFF",yellow16:"#F9C60E29",yellow30:"#F9C60E4D",yellow8:"#F9C60E14",yellow80:"#F9C60ECC",yellowBlack:"#473800",yellowDark:"#E5B406",yellowDarker:"#C29800",yellowDefault:"#F9C60E"};var Vs=W.create({style:te.create([{name:"fontColor",color:Pe.whiteDefault}])});function Hs(e){let t=k.createCharacters(e||B("Roll.Editor.Continue.DefaultText"),Vs);return k.create({characters:t,textAlign:"center"})}function Am(){return{color:Mr(),opacity:1}}var ye={create(e={}){let t=e.key||x();return{type:p.CONTINUE,key:t,paragraph:e.paragraph||Hs(),continueColor:e.continueColor||Am(),meta:e.meta||[{name:"charactersMeta",data:Vs}],designSettings:e.designSettings&&Be(e.designSettings)}},createFromDivider(e){var n;let t=e.dividerType==="line-with-text"?e.meta.filter(i=>i.name==="charactersMeta"):void 0,r=e.dividerType==="line-with-text"?k.getParagraphText(e.paragraph):void 0,o=Hs(r);return ye.create({...e,meta:t,paragraph:o,designSettings:Be({background:(n=e.designSettings)==null?void 0:n.background})})},clone(e){return ye.create({...e,key:x(),paragraph:{...e.paragraph,key:x()},designSettings:e.designSettings&&it(e.designSettings)})},toContinueBlock(e){return e&&e.type===p.CONTINUE?e:null},getBlockType(e){return"continue"},getCharactersMeta(e){let t=ve(e.meta,"charactersMeta");return(t==null?void 0:t.data)||null},addMeta(e,t){e.meta=ft(e.meta,t)},changeContinueColor(e,t){e.continueColor=t}};var io=class{static create(t){return{continueTextSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.continueTextSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.continueTextSelected}};var cC="1",Ws={rounded:W.create({style:te.create([{name:"fontColor",color:Pe.whiteDefault}])}),squared:W.create({style:te.create([{name:"fontColor",color:Pe.whiteDefault},{name:"bold"}])})};function Fm(e){let t=e==="squared"?B("Roll.Editor.Divider.Default.Rectangle.Paragraph.Text"):cC,r=k.createCharacters(t,Ws[e]);return k.create({characters:r,textAlign:"center"})}function ao(e){return e==="line"?{color:Pe.darkDefault,opacity:1}:{color:Mr(),opacity:1}}var ie={createLineDivider(e={}){return{type:p.DIVIDER,key:e.key||x(),dividerType:"line",alignment:e.alignment||"inner",dividerColor:e.dividerColor||ao("line"),style:e.style||"solid",designSettings:e.designSettings&&Be(e.designSettings)}},createLineWithTextDivider(e){let t=e.key||x();return{type:p.DIVIDER,key:t,dividerType:"line-with-text",alignment:e.alignment||"inner",dividerColor:e.dividerColor||ao("line-with-text"),style:e.style||"solid",paragraph:e.paragraph||Fm(e.paragraphStyle),paragraphStyle:e.paragraphStyle,meta:e.meta||[{name:"charactersMeta",data:Ws[e.paragraphStyle]}],designSettings:e.designSettings&&Be(e.designSettings)}},createDividerFromContinue(e){var t;return ie.createLineWithTextDivider({...e,dividerColor:e.continueColor,paragraphStyle:"squared",designSettings:Be({background:(t=e.designSettings)==null?void 0:t.background})})},createQuoteDivider(e={}){return{type:p.DIVIDER,key:e.key||x(),dividerType:"quotes",dividerColor:e.dividerColor||ao("quotes"),style:e.quoteStyle||"quote_1",designSettings:e.designSettings&&Be(e.designSettings)}},createDiamondsDivider(e={}){return{type:p.DIVIDER,key:e.key||x(),dividerType:"diamonds",dividerColor:e.dividerColor||ao("diamonds"),style:"default",designSettings:e.designSettings&&Be(e.designSettings)}},createArrowDivider(e={}){return{type:p.DIVIDER,key:e.key||x(),dividerType:"arrow",dividerColor:e.dividerColor||ao("arrow"),style:"default",designSettings:Be(e.designSettings)}},changeDividerType(e,t){if(e.dividerType===t)return e;let r=e.dividerType==="line-with-text"||e.dividerType==="line",o=e.dividerType==="line-with-text";switch(t){case"arrow":return ie.createArrowDivider({key:e.key,dividerColor:e.dividerColor,designSettings:e.designSettings});case"diamonds":return ie.createDiamondsDivider({key:e.key,dividerColor:e.dividerColor,designSettings:e.designSettings});case"quotes":return ie.createQuoteDivider({key:e.key,dividerColor:e.dividerColor,designSettings:e.designSettings});case"line":return ie.createLineDivider({key:e.key,dividerColor:e.dividerColor,alignment:r?e.alignment:void 0,style:r?e.style:void 0,designSettings:e.designSettings});case"line-with-rectangle":case"line-with-circle":return ie.createLineWithTextDivider({key:e.key,dividerColor:e.dividerColor,paragraphStyle:t==="line-with-circle"?"rounded":"squared",alignment:r?e.alignment:void 0,style:r?e.style:void 0,paragraph:o?e.paragraph:void 0,designSettings:e.designSettings});default:throw new Error(`unknown divider view type ${t}`)}},changeDividerColor(e,t){e.dividerColor=t},changeDividerLineStyle(e,t){e.style=t},changeQuoteStyle(e,t){e.style=t},addMeta(e,t){e.meta=ft(e.meta,t)},changeDividerAlignment(e,t){e.alignment=t},clone(e){let t=x(),r={...e.dividerColor},o=e.designSettings&&it(e.designSettings);switch(e.dividerType){case"line-with-text":return ie.createLineWithTextDivider({...e,key:t,paragraph:{...e.paragraph,key:t},dividerColor:r,designSettings:o});case"line":return ie.createLineDivider({...e,key:t,dividerColor:r,designSettings:o});case"arrow":return ie.createArrowDivider({...e,key:t,dividerColor:r,designSettings:o});case"diamonds":return ie.createDiamondsDivider({...e,key:t,dividerColor:r,designSettings:o});case"quotes":return ie.createQuoteDivider({...e,key:t,dividerColor:r,designSettings:o})}},toFigureDividerBlock(e){switch(e.dividerType){case"quotes":case"arrow":case"diamonds":return!0}return!1},toDividerWithLineBlock(e){switch(e.dividerType){case"line":case"line-with-text":return!0}return!1},toDividerBlock(e){return e&&e.type===p.DIVIDER?e:null},getBlockType(e){return`divider-${e.dividerType}`},getCommonBlockType(e){return"divider"},getCharactersMeta(e){let t=ve(e.meta,"charactersMeta");return(t==null?void 0:t.name)==="charactersMeta"?t.data:null}};var so=class{static create(t){return{dividerTextSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.dividerTextSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.dividerTextSelected}};function Ut(e,t,r){return Sd(e.blockMap,t,r),{selection:_.createSelectionFromBlockData(r)}}function Pm(e,t,r){let o=ne.toCollageBlock(e.blockMap.blocks[t]);if(!o||!o.images.map(i=>i.key).includes(r))return y.warn("Block must exist in contentState and must have collaged image with id:"+r),{selection:_.createTextSelection()};if(o.images.length<=1)return Ut(e,t,k.create({key:t}));let n=ne.getCollagedImageIndex(o,r);return n>-1&&(o.images.splice(n,1),o.images.length===1&&o.images[0].width<=960&&(o.alignment="inner")),{selection:_.createCollageBlockSelection(t)}}var Om=new Map,lC=new Ae;function Lm(e,t){Om.set(e,t),lC.dispatch()}function ui(e){return Om.get(e)||null}var sr={getBlockByIndex(e,t){return Kt(e,t)},getFirstBlock(e){return m(hd(e))},getLastBlock(e){return m(gd(e))},getBlockBefore(e,t){return yd(e,t)},getBlockAfter(e,t){return _d(e,t)},forEach(e,t){Cd(e,t)},getBlocksArray(e){return e.order.map(t=>e.blocks[t])},hasBlock(e,t){return e.blocks.hasOwnProperty(t)}};var $m={create(e){return{...k.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),continueBlockKey:e.continueBlockKey}},toContinueParagraph(e){return e&&e.type===p.PARAGRAPH&&e.continueBlockKey?e:null}};function V(e,t){if(!t.hasOwnProperty(e))throw new Error(`getValueByCheckedKey(${e})`);return t[e]}function pi(e){if(e.type==="image")return null;let t=ve(e.meta,"charactersMeta");return t&&t.name==="charactersMeta"?t.data:null}var dC="info";function Km(e){switch(e){case"incorrect":case"minus":return sd;case"correct":case"plus":return dd;case"info":return to("--roll-player-accent-color");case"question":return md;case"warning":return cd;case"bulb":return ld;case"withoutIcon":return to("--color-icon-disabled");default:throw L(e,`Unknown note type: ${e}`),new Error(`Unknown note type: ${e}`)}}var mC=1;function uC(e){return{color:Km(e),opacity:mC}}function pC(e){switch(e){case"bulb":return ud;case"withoutIcon":return An;default:return Km(e)}}var fC=.1;function hC(e){return{color:pC(e),opacity:fC}}var Qo={defaultType:dC,getIconColorData:uC,getBackgroundColorData:hC};var _t={create(e={}){let t=e.characters||[];typeof t=="string"&&(t=k.createCharacters(t,W.create()));let r=e.noteType||Qo.defaultType;return{type:p.NOTE,key:e.key||x(),noteType:r,characters:t,customIconColor:e.customIconColor||null,customBackgroundColor:e.customBackgroundColor||null,designSettings:e.designSettings&&Be(e.designSettings)}},clone(e){let t=x();return{...xt(e),key:t}},toNoteBlock(e){return e&&e.type===p.NOTE?e:null},getBlockType(e){return"note"},setNoteType(e,t){e.noteType=t,e.customIconColor=null,e.customBackgroundColor=null},setNoteBackgroundColor(e,t){e.customBackgroundColor=t},setNoteIconColor(e,t){e.customIconColor=t}};var Q=class{static _getAllFlipCardsBlocksFromSelection(t,r){return xn(G.getAllBlocksFromSelection(t,r).map(o=>O.toFlipCardsBlock(o)))}static _getFlipCardsBlock(t,r){let o=t.blockMap.blocks[r];return o?O.toFlipCardsBlock(o):null}static _getActiveSide(t){return m(ui(t))}static getFirstCard(t){return m(vt(t.cardsBlockMap))}static changeSideContentType(t,r,o){return Q._getAllFlipCardsBlocksFromSelection(t,r).forEach(n=>{ot(n.cardsBlockMap,i=>{O.changeFlipCardContentType(i,Q._getActiveSide(n.key),o)})}),{selection:r}}static changeRowMaxCardsCount(t,r,o){return Q._getAllFlipCardsBlocksFromSelection(t,r).forEach(n=>{O.changeRowMaxCardsCount(n,o)}),{selection:r}}static changeBlockLayout(t,r,o){let n=Q._getFlipCardsBlock(t,r);return n?(O.changeLayout(n,o),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static addCard(t,r){let o=Q._getFlipCardsBlock(t,r);return o?(O.addFlipCard(o),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static changeSideVerticalAlignment(t,r,o){return Q._getAllFlipCardsBlocksFromSelection(t,r).forEach(n=>{n.cardsBlockMap.order.forEach(i=>O.changeCardSideVerticalAlignment(n,i,Q._getActiveSide(n.key),o))}),{selection:r}}static changeCardTextVerticalAlignment(t,r,o){let{startKey:n}=r,{cardKey:i,cardSide:a}=r.customSelection,s=Q._getFlipCardsBlock(t,n);return s?(O.changeCardSideVerticalAlignment(s,i,a,o),{selection:r}):{selection:_.createTextSelection()}}static removeCard(t,r,o){let n=Q._getFlipCardsBlock(t,r);return n?(O.removeFlipCard(n,o),O.getFlipCardsCount(n)?{selection:_.createFlipCardsBlockSelection(r)}:Ut(t,r,k.create())):{selection:_.createTextSelection()}}static duplicateCard(t,r,o){let n=Q._getFlipCardsBlock(t,r);return n?(O.duplicateCard(n,o),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static moveCard({contentState:t,blockKey:r,cardKey:o,toCardKey:n,insertBefore:i}){let a=Q._getFlipCardsBlock(t,r);return a?(O.moveFlipCard({flipCardsBlock:a,cardKey:o,toCardKey:n,insertBefore:i}),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static changeCardImage(t,r,o,n){let i=Q._getFlipCardsBlock(t,r);return i?(O.changeFlipCardBackgroundImage({block:i,cardKey:o.key,sideType:o.sideType,image:n}),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static changeCardsSideBackground(t,r,o){return Q._getAllFlipCardsBlocksFromSelection(t,r).forEach(n=>{ot(n.cardsBlockMap,i=>{O.changeFlipCardBackgroundColor(n,i.key,Q._getActiveSide(n.key),o)})}),{selection:r}}static changeCardBackgroundImage(t,r,o,n){let i=Q._getFlipCardsBlock(t,r);return i?(O.changeFlipCardBackgroundImage({block:i,cardKey:o.key,sideType:o.sideType,image:n}),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static changeCardsSideBackgroundImage(t,r,o){return Q._getAllFlipCardsBlocksFromSelection(t,r).forEach(n=>{ot(n.cardsBlockMap,i=>{O.changeFlipCardBackgroundImage({block:n,cardKey:i.key,sideType:Q._getActiveSide(n.key),image:o})})}),{selection:r}}static changeCardBackgroundColor(t,r,o,n){let i=Q._getFlipCardsBlock(t,r);return i?(O.changeFlipCardBackgroundColor(i,o.key,o.sideType,n),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static changeCardBackgroundImageOverlay(t,r,o,n){let i=Q._getFlipCardsBlock(t,r);return i?(O.changeCardImageOverlay({block:i,cardKey:o.key,sideType:o.sideType,overlay:n}),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static changeCardsSideBackgroundImageOverlay(t,r,o){return Q._getAllFlipCardsBlocksFromSelection(t,r).forEach(n=>{ot(n.cardsBlockMap,i=>{O.changeCardImageOverlay({block:n,cardKey:i.key,sideType:Q._getActiveSide(n.key),overlay:o})})}),{selection:r}}static changeCardImageOverlay(t,r,o,n){let i=Q._getFlipCardsBlock(t,r);return i?(O.changeFlipCardBackgroundImageOverlay({block:i,cardKey:o.key,sideType:o.sideType,overlay:n}),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static cropCardImage(t,r,o,n){let i=Q._getFlipCardsBlock(t,r);return i?(O.cropFlipCardImage({block:i,cardKey:o.key,sideType:o.sideType,crop:n}),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}static cropCardBackgroundImage(t,r,o,n){let i=Q._getFlipCardsBlock(t,r);return i?(O.cropFlipCardBackgroundImage({block:i,cardKey:o.key,sideType:o.sideType,crop:n}),{selection:_.createFlipCardsBlockSelection(r)}):{selection:_.createTextSelection()}}};var Yo={defaultMaxCardsInRow:3,defaultCardsLayout:"outer",defaultActiveSide:"front",maxCardsInRowInnerLayout:3,maxCardsInRowOuterLayout:4,maxCardsInRowFullLayout:5},Xo={text:{frontSide:{getBackgroundColor:Mr,opacity:1},backSide:{getBackgroundColor:()=>Pe.blackDefault,opacity:.1},defaultOverlayColor:{color:An,opacity:.3}},imageWithText:{frontSide:{getBackgroundColor:Mr,opacity:1},backSide:{getBackgroundColor:()=>Pe.blackDefault,opacity:.1},defaultOverlayColor:{color:We,opacity:.3}}},Gs={front:W.create({style:te.create([{name:"fontColor",color:Pe.whiteDefault},{name:"fontSize",size:"auto"},{name:"bold"}])}),back:W.create({style:te.create([{name:"fontColor",color:Pe.darkDefault},{name:"fontSize",size:"auto"}])})};function qs(e={}){return{type:"image",image:e.image?Ks(e.image):null}}function Gm(e){if(!e)return;let t=ve(e,"charactersMeta");if(t&&t.name==="charactersMeta")return t.data}function qm(e,t){return[{name:"charactersMeta",data:t||Gs[e]}]}function Zo(e){let t=e.characterMeta||Gm(e.meta),r=V(e.sideType,{front:Ym(t),back:Xm(t)});return{type:"text",background:e.background||Qm(e.sideType),text:k.create({key:e.paragraphKey,textAlign:e.textAlign||"center",characters:e.characters||r}),verticalTextAlign:e.verticalTextAlign||"middle",meta:e.meta||qm(e.sideType,t)}}function Qs(e){let t=V(e.sideType,{front:Xo.imageWithText.frontSide,back:Xo.imageWithText.backSide}),r=e.characterMeta||Gm(e.meta),o=V(e.sideType,{front:Ym(r),back:Xm(r)});return{type:"imageWithText",background:e.background||{type:"color",color:t.getBackgroundColor(),opacity:t.opacity},image:e.image?Ks(e.image):null,text:k.create({key:e.paragraphKey,textAlign:e.textAlign||"center",characters:e.characters||o}),verticalTextAlign:e.verticalTextAlign||"middle",meta:e.meta||qm("front",r)}}function Qm(e){let t=V(e,{front:Xo.text.frontSide,back:Xo.text.backSide});return{type:"color",color:t.getBackgroundColor(),opacity:t.opacity}}function Ym(e){let t=e||Gs.front;return k.createCharacters(B("Roll.Editor.FlipCardsBlock.DefaultText.FrontTextSide"),t)}function Xm(e){let t=e||Gs.back;return k.createCharacters(B("Roll.Editor.FlipCardsBlock.DefaultText.BackTextSide"),t)}function Us(e){let{contentType:t}=e;switch(t){case"image":return qs(e);case"text":return Zo(e);case"imageWithText":return Qs(e);default:throw L(t),new Error(`Unknown card content type: ${t}`)}}function gC(e,t){return e.cardsBlockMap.blocks[t]||null}function fi(e,t,r){let o=gC(e,t);if(!o)return null;switch(r){case"front":return o.frontSide;case"back":return o.backSide;default:throw L(r),Error()}}function co(e,t,r){switch(t){case"front":e.frontSide=r;break;case"back":e.backSide=r;break}}function yC({cardData:e,sideData:t,sideType:r,contentType:o}){o==="image"&&co(e,r,qs({image:t.image})),o==="text"&&co(e,r,Zo({verticalTextAlign:t.verticalTextAlign,characters:t.text.characters,textAlign:t.text.textAlign,background:t.background,meta:t.meta,sideType:r}))}function _C({cardData:e,sideData:t,sideType:r,contentType:o}){o==="imageWithText"&&co(e,r,Qs({image:t.image,sideType:r})),o==="text"&&co(e,r,Zo({sideType:r}))}function CC({cardData:e,sideData:t,sideType:r,contentType:o}){o==="image"&&co(e,r,qs()),o==="imageWithText"&&co(e,r,Qs({verticalTextAlign:t.verticalTextAlign,characters:t.text.characters,textAlign:t.text.textAlign,background:t.background&&t.background.type==="color"?t.background:null,meta:t.meta,sideType:r}))}function Nm({block:e,cardKey:t,sideType:r,overlay:o}){let n=fi(e,t,r);!n||((n.type==="image"||n.type==="imageWithText")&&n.image&&(n.image.overlay=o),n.type==="text"&&n.background.type==="image"&&(n.background.overlay=o))}function Vm({block:e,cardKey:t,sideType:r,image:o}){var i;let n=fi(e,t,r);!n||((n.type==="image"||n.type==="imageWithText")&&(n.image=o?{...o,overlay:(i=n.image)==null?void 0:i.overlay}:null),n.type==="text"&&(n.background.type==="image"&&!o&&(n.background=Qm(r)),n.background.type==="image"&&o&&(n.background.image=o),n.background.type==="color"&&o&&(n.background={type:"image",image:o,overlay:Xo.text.defaultOverlayColor})))}function Hm({block:e,cardKey:t,sideType:r,crop:o}){let n=fi(e,t,r);!n||(n.type!=="text"?n.image&&(n.image.crop=o):n.background.type==="image"&&(n.background.image.crop=o))}function zs(){return{key:x(),frontSide:Zo({sideType:"front"}),backSide:Zo({sideType:"back"})}}function kC(){return tr([zs(),zs(),zs()],e=>e.key)}function Wm(e){let t=xt(e);switch(e.type){case"image":return t;case"imageWithText":case"text":return{...t,text:{...e.text,key:x()}}}}function Zm(e){return{key:x(),frontSide:Wm(e.frontSide),backSide:Wm(e.backSide)}}function SC(e){let t={blocks:{},order:[]};return ot(e.cardsBlockMap,r=>{let o=Zm(r);bs(t,o)}),t}function Um(e){switch(e.contentType){case"image":return Us({contentType:"image"});case"text":return Us({contentType:"text",sideType:e.sideType,meta:e.meta,verticalTextAlign:e.verticalTextAlign,textAlign:e.horizontalTextAlign,background:e.background,characterMeta:e.characterMeta});case"imageWithText":return Us({contentType:"imageWithText",sideType:e.sideType,meta:e.meta,verticalTextAlign:e.verticalTextAlign,textAlign:e.horizontalTextAlign,background:e.background.type==="color"?e.background:void 0,characterMeta:e.characterMeta})}}function zm(e,t){let{frontSideType:r,backSideType:o}=O.getFlipCardsSideTypes(e),n=V(t,{front:r,back:o});if(n==="image")return Um({contentType:n});let i=m(O.getFlipCardsStyles(e,t));return Um({contentType:n,sideType:t,horizontalTextAlign:i.horizontalTextAlign,verticalTextAlign:i.verticalTextAlign,background:i.background,meta:i.meta,characterMeta:W.create({style:i.styles})})}var O={create(e={}){return{type:p.FLIP_CARD,key:e.key||x(),cardsBlockMap:e.cardsBlockMap||kC(),maxCardsInRow:e.maxCardsInRow||Yo.defaultMaxCardsInRow,cardsLayout:e.cardsLayout||Yo.defaultCardsLayout,designSettings:e.designSettings&&Be(e.designSettings)}},clone(e){return{type:p.FLIP_CARD,key:x(),cardsLayout:e.cardsLayout,maxCardsInRow:e.maxCardsInRow,cardsBlockMap:SC(e),designSettings:e.designSettings&&it(e.designSettings)}},getCardParagraph(e,t,r){let o=O.getFlipCardSideData(e,t,r);return o.type!=="image"?o.text:null},getCardData(e,t){return e.cardsBlockMap.blocks[t]||null},changeCardSideVerticalAlignment(e,t,r,o){let n=O.getFlipCardSideData(e,t,r);n.type!=="image"&&(n.verticalTextAlign=o)},addFlipCard(e){let t=zm(e,"front"),r=zm(e,"back"),o={key:x(),frontSide:t,backSide:r};bs(e.cardsBlockMap,o)},duplicateCard(e,t){let r=e.cardsBlockMap.blocks[t],o=Zm(r);kd(e.cardsBlockMap,t,o)},removeFlipCard(e,t){Fn(e.cardsBlockMap,t);let r=$t(e.cardsBlockMap);r<e.maxCardsInRow&&O.changeRowMaxCardsCount(e,r)},moveFlipCard({cardKey:e,insertBefore:t,flipCardsBlock:r,toCardKey:o}){let n=r.cardsBlockMap.order,i=n.indexOf(e);n.splice(i,1);let a=n.indexOf(o),s=t?a:a+1;n.splice(s,0,e)},changeFlipCardImage(e){Vm(e)},changeFlipCardBackgroundImage(e){Vm(e)},cropFlipCardImage(e){Hm(e)},cropFlipCardBackgroundImage(e){Hm(e)},getFlipCardSideData(e,t,r){let o=O.getCardData(e,t);return V(r,{front:o.frontSide,back:o.backSide})},getFlipCardsSideTypes(e){let t=e.cardsBlockMap.order[0],r=e.cardsBlockMap.blocks[t];return{frontSideType:r.frontSide.type,backSideType:r.backSide.type}},getFlipCardsSideType(e,t){let r=O.getFlipCardsSideTypes(e);return V(t,{front:r.frontSideType,back:r.backSideType})},getBlockType(e){return"flip-cards"},toFlipCardsBlock(e){return e&&e.type===p.FLIP_CARD?e:null},changeFlipCardBackgroundColor(e,t,r,{color:o,opacity:n}){let i=fi(e,t,r);!i||(i.type==="text"||i.type==="imageWithText")&&(i.background={type:"color",color:o,opacity:n})},changeFlipCardBackgroundImageOverlay(e){Nm(e)},changeCardImageOverlay(e){Nm(e)},changeFlipCardContentType(e,t,r){let o=V(t,{front:e.frontSide,back:e.backSide});o.type==="image"&&_C({cardData:e,sideData:o,sideType:t,contentType:r}),o.type==="imageWithText"&&yC({cardData:e,sideData:o,sideType:t,contentType:r}),o.type==="text"&&CC({cardData:e,sideData:o,sideType:t,contentType:r})},changeRowMaxCardsCount(e,t){e.maxCardsInRow=t},changeLayout(e,t){e.cardsLayout=t;let r=V(t,{inner:Yo.maxCardsInRowInnerLayout,outer:Yo.maxCardsInRowOuterLayout,"full-width":Yo.maxCardsInRowFullLayout}),o=$t(e.cardsBlockMap),n=Math.min(o,r);n<e.maxCardsInRow&&O.changeRowMaxCardsCount(e,n)},getFlipCardsCount(e){return $t(e.cardsBlockMap)},addFlipCardSideMeta(e,t){e.type!=="image"&&(e.meta=ft(e.meta,t))},getFlipCardsStyles(e,t){var a;let r=Q.getFirstCard(e),o=V(t,{front:r.frontSide,back:r.backSide});if(o.type==="image")return null;let n,i=o.text.characters;return i.length===0?n=((a=pi(o))==null?void 0:a.style)||[]:n=i[0].meta.style,{styles:n,verticalTextAlign:o.verticalTextAlign,horizontalTextAlign:o.text.textAlign,background:o.background,meta:o.meta}}};var cr=class{static createBlockSelection(){return{type:"flipCardBlock"}}static createCardTextSelection(t,r){return{type:"flipCardText",cardKey:t,cardSide:r}}static isBlockSelection(t){return t.customSelection&&t.customSelection.type==="flipCardBlock"}static isCardTextSelection(t){return t.customSelection&&t.customSelection.type==="flipCardText"}};var lr={create(e={}){return{type:"",key:e.key||x(),alignment:e.alignment||"inner"}},toAbstractMediaBlock(e){let t=e;return!e||t.type!==p.EMBED&&t.type!==p.IMAGE&&t.type!==p.COLLAGE&&t.type!==p.TABLE?null:t},getBlockType(e){return e.type===p.COLLAGE?`collage-${e.alignment}`:`media-${e.alignment}`}};var tt={create(e={}){let t=e.characters||[];return typeof t=="string"&&(t=k.createCharacters(t,W.create())),{...lr.create(e),width:e.width||0,height:e.height||0,characters:t}},toMediaBlock(e){return!e||![p.IMAGE,p.EMBED].includes(e.type)?null:e},getBlockType(e){return`media-${e.alignment}`},supportFullAlign(e){return e.type===p.EMBED||e.width>=960||!e.width}};var hi=class{static create({blockSelected:t}){return{blockSelected:t||!1}}static isBlockSelected(t){return t.customSelection&&t.customSelection.blockSelected}};var gi={create(e){return{...k.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),tableKey:e.tableKey,rowKey:e.rowKey,colKey:e.colKey,cellKey:e.cellKey,meta:e.meta||[]}},toCellParagraph(e){if(e&&e.type===p.PARAGRAPH){let t=e;if(t.tableKey&&t.rowKey&&t.colKey&&t.cellKey&&t.meta)return e}return null}};var QR=W.create();function xC(e,t){let r={};for(let o of e){r[o]={colsMap:{}};let i=r[o].colsMap;for(let a of t)i[a]=g.createCell()}return r}function jm(e,t,r){let o=x();e.rowsOrder.splice(t,0,o);let n={};for(let i of e.colsOrder){let a=r&&r(i),s=$(a==null?void 0:a.content);n[i]=g.createCell({horizontalTextAlign:s==null?void 0:s.textAlign,verticalTextAlign:a==null?void 0:a.verticalTextAlign,meta:a==null?void 0:a.meta})}return e.rowsMap[o]={colsMap:n},o}function BC(e,t,r){if(t.length!==e.rowsOrder.length)throw new Error("new rows count must be equal to original table rows count");let o={};for(let n=0;n<e.rowsOrder.length;n++){let i=t[n],a=e.rowsOrder[n];o[i]={colsMap:eu(e,a,r)}}return o}function eu(e,t,r){if(r.length!==e.colsOrder.length)throw new Error("new cols count must be equal to original table cols count");let o={};for(let n=0;n<e.colsOrder.length;n++){let i=r[n],a=e.colsOrder[n],s=e.rowsMap[t].colsMap[a];o[i]=g.cloneCell(s)}return o}function Jm(e,t,r){let o=x();e.colsOrder.splice(t,0,o);for(let n of e.rowsOrder){let i=r&&r(n),a=$(i==null?void 0:i.content),s=e.rowsMap[n];s.colsMap[o]=g.createCell({horizontalTextAlign:a==null?void 0:a.textAlign,verticalTextAlign:i==null?void 0:i.verticalTextAlign,meta:i==null?void 0:i.meta})}return o}function Ys(e,t){return e.colsOrder[0]===t}function vC(e,t,r){for(let o of t){let{colsMap:n}=e[o];for(let i of r)if(!n[i])throw new Error(`rowsMap is invalid: ${JSON.stringify(e)}`)}return e}var g={create(e={}){let t=e.rowsOrder||[x(),x(),x()],r=e.colsOrder||[x(),x(),x()];if(!r.length||!t.length)throw new Error("try to create table with 0 length of rowsCount or colsCount");return{type:p.TABLE,key:e.key||x(),alignment:"inner",rowsOrder:t,colsOrder:r,rowsMap:e.rowsMap?vC(e.rowsMap,t,r):xC(t,r),meta:[]}},addColumnBefore(e,t){Ys(e,t)&&g.removeTableMeta(e,"isHeaderColumnPinned");let r=e.colsOrder.indexOf(t);return Jm(e,r,o=>this.getCell(e,o,t))},addColumnAfter(e,t){let r=e.colsOrder.indexOf(t)+1;return Jm(e,r,o=>this.getCell(e,o,t))},addLastColumn(e){let t=e.colsOrder[e.colsOrder.length-1];return this.addColumnAfter(e,t)},addRowBefore(e,t){let r=e.rowsOrder.indexOf(t);return jm(e,r,o=>this.getCell(e,t,o))},addRowAfter(e,t){let r=e.rowsOrder.indexOf(t)+1;return jm(e,r,o=>this.getCell(e,t,o))},addLastRow(e){let t=e.rowsOrder[e.rowsOrder.length-1];return this.addRowAfter(e,t)},duplicateRow(e,t){let r=e.rowsOrder.indexOf(t)+1,o=x();return e.rowsMap[o]={colsMap:eu(e,t,e.colsOrder)},e.rowsOrder.splice(r,0,o),o},moveColumnLeft(e,t){e.colsOrder.length>=2&&e.colsOrder[1]===t&&g.removeTableMeta(e,"isHeaderColumnPinned");let r=e.colsOrder.indexOf(t);if(r<=0)return;let o=r-1,n=e.colsOrder;[n[r],n[o]]=[n[o],n[r]]},moveColumnRight(e,t){Ys(e,t)&&g.removeTableMeta(e,"isHeaderColumnPinned");let r=e.colsOrder.indexOf(t);if(r>=e.colsOrder.length-1)return;let o=r+1,n=e.colsOrder;[n[r],n[o]]=[n[o],n[r]]},removeColumn(e,t){Ys(e,t)&&g.removeTableMeta(e,"isHeaderColumnPinned"),e.colsOrder=e.colsOrder.filter(r=>r!==t),e.rowsOrder.forEach(r=>{delete e.rowsMap[r].colsMap[t]})},moveRowUp(e,t){let r=e.rowsOrder.indexOf(t);if(r<=0)return;let o=r-1,n=e.rowsOrder;[n[r],n[o]]=[n[o],n[r]]},moveRowDown(e,t){let r=e.rowsOrder.indexOf(t);if(r>=e.rowsOrder.length-1)return;let o=r+1,n=e.rowsOrder;[n[r],n[o]]=[n[o],n[r]]},duplicateColumn(e,t){let r=e.colsOrder.indexOf(t)+1,o=x();for(let n of e.rowsOrder){let i=e.rowsMap[n],a=i.colsMap[t];i.colsMap[o]=g.cloneCell(a)}return e.colsOrder.splice(r,0,o),o},removeRow(e,t){e.rowsOrder=e.rowsOrder.filter(r=>r!==t),delete e.rowsMap[t]},createCell(e={}){return{key:e.key||x(),content:e.paragraph||k.create({textAlign:e.horizontalTextAlign}),verticalTextAlign:e.verticalTextAlign||"top",meta:e.meta||[]}},toTableBlock(e){return e&&e.type===p.TABLE?e:null},getBlockType(e){return"table"},getCell(e,t,r){return e.rowsMap[t].colsMap[r]},cloneTable(e){let t=x(),r=[];for(let i=0;i<e.rowsOrder.length;i++)r.push(x());let o=[];for(let i=0;i<e.colsOrder.length;i++)o.push(x());let n=BC(e,r,o);return{type:p.TABLE,key:t,alignment:e.alignment,rowsOrder:r,colsOrder:o,rowsMap:n,meta:e.meta,designSettings:e.designSettings&&it(e.designSettings)}},cloneCell(e){return{key:x(),content:{...e.content,key:x()},verticalTextAlign:e.verticalTextAlign,meta:e.meta}},addCellMeta(e,t){e.meta=ft(e.meta,t)},addTableMeta(e,t){e.meta=ft(e.meta,t)},removeTableMeta(e,t){e.meta=Pn(e.meta,[t])},setCellVerticalAlign(e,t){e.verticalTextAlign=t},setCellHorizontalAlign(e,t){let r=$(e.content);!r||(r.textAlign=t)}};var ue=class{static createCellSelection(t){return{type:"cell",cellKey:t.cellKey,rowKey:t.rowKey,colKey:t.colKey}}static createRowSelection(t){return{type:"row",rowKey:t.rowKey}}static createColumnSelection(t){return{type:"column",colKey:t.columnKey}}static createTableSelection(){return{type:"table"}}static isCellSelected(t){return t.customSelection&&t.customSelection.type==="cell"}static isColumnSelected(t){return t.customSelection&&t.customSelection.type==="column"}static isRowSelected(t){return t.customSelection&&t.customSelection.type==="row"}static isTableSelected(t){return t.customSelection&&t.customSelection.type==="table"}static isPartOfTableSelected(t){return ue.isRowSelected(t)||ue.isColumnSelected(t)||ue.isCellSelected(t)}};var bC="video",at={create(e){let t=e.key||x();return{key:t,type:p.VIDEO,src:e.src,width:e.width||0,height:e.height||0,isLoading:e.isLoading||!1,alignment:e.alignment||"inner",posterSrc:e.posterSrc,paragraph:e.paragraph||k.create({key:t,textAlign:"center"})}},changeAlignment(e,t){e.alignment=t},changePoster(e,t){e.posterSrc=t||void 0},clone(e){let t=x(),r=x();return{...e,key:t,paragraph:{...e.paragraph,key:r}}},toVideoBlock(e){return e&&e.type===p.VIDEO?e:null},getBlockType(e){return bC}};var yi=class{static create(t){return{captionSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.captionSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.captionSelected}};function TC(e,t){let r=m(t.customSelection),o=ne.getCollagedImage(e,r.collageSelectedItemKey);return o||null}function wC(e,t){let r=t.customSelection,o=g.getCell(e,r.rowKey,r.colKey),n=$(o.content);return n?gi.create({...n,tableKey:e.key,colKey:r.colKey,rowKey:r.rowKey,cellKey:o.key}):null}function DC(e,t){let r=t.customSelection,o=O.getCardParagraph(e,r.cardKey,r.cardSide);return o||null}function st(e,t){let r=$(e);if(r)return r;let o=tt.toMediaBlock(e);if(o)return o;let n=_t.toNoteBlock(e);if(n)return n;let i=ie.toDividerBlock(e);if(i&&i.dividerType==="line-with-text"&&t&&so.isTextSelection(t))return i.paragraph;let a=ye.toContinueBlock(e);if(a&&t&&io.isTextSelection(t))return a.paragraph;let s=at.toVideoBlock(e);if(s)return s.paragraph;let c=ne.toCollageBlock(e);if(c&&t&&t.customSelection&&t.customSelection.collageItemCaptionSelected)return TC(c,t);let l=g.toTableBlock(e);if(l&&t&&ue.isCellSelected(t))return wC(l,t);let d=O.toFlipCardsBlock(e);return d&&t&&cr.isCardTextSelection(t)?DC(d,t):null}function Xs(e){return EC(e)||RC(e)}function EC({contentState:e,selection:t}){let{startKey:r,customSelection:o}=t;return!!tt.toMediaBlock(e.blockMap.blocks[r])&&!!o&&o.captionSelected}function RC({contentState:e,selection:t}){let{startKey:r,customSelection:o}=t;return!!ne.toCollageBlock(e.blockMap.blocks[r])&&!!o&&o.collageItemCaptionSelected}var tu={create(e){return{...k.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),dividerBlockKey:e.dividerBlockKey,paragraphStyle:e.paragraphStyle,meta:e.meta}},toDividerParagraph(e){return e&&e.type===p.PARAGRAPH&&e.dividerBlockKey?e:null}};var ru={create(e){return{...k.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),flipCardsBlockKey:e.flipCardsBlockKey,cardKey:e.cardKey,cardSide:e.cardSide,meta:e.meta||[]}},toFlipCardParagraph(e){if(e&&e.type===p.PARAGRAPH){let t=e;if(t.flipCardsBlockKey&&t.cardKey&&t.cardSide&&t.meta)return e}return null}};var _i=class{static create(t){return{captionSelected:t}}};var ou={create(e){return{...k.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),videoBlockKey:e.videoBlockKey}},toVideoParagraph(e){return e&&e.type===p.PARAGRAPH&&e.videoBlockKey?e:null}};var G={createBlocks(e){let t={order:[],blocks:{}};for(let r of e)t.order.push(r.key),t.blocks[r.key]=r;return t},cloneBlock(e){let t=ne.toCollageBlock(e);if(t)return ne.clone(t);let r=g.toTableBlock(e);if(r)return g.cloneTable(r);let o=O.toFlipCardsBlock(e);if(o)return O.clone(o);let n=ie.toDividerBlock(e);if(n)return ie.clone(n);let i=ye.toContinueBlock(e);if(i)return ye.clone(i);let a=at.toVideoBlock(e);return a?at.clone(a):{...e,designSettings:e.designSettings&&it(e.designSettings),key:x()}},replaceBlocksFragment(e,t,r,o=[]){let n=e.order.indexOf(t),i=e.order.indexOf(r);if(n<0||i<0){y.warn("incorrect block keys");return}let a=[...e.order],s=a.splice(n,i-n+1);for(let l of s)delete e.blocks[l];let c=[];for(let l of o)c.push(l.key),e.blocks[l.key]=l;a.splice(n,0,...c),e.order.splice(0,e.order.length,...a)},replaceBlockWithFragment(e,t,r){return G.replaceBlocksFragment(e,t,t,r)},updateBlockWithKey(e,t,r){let o=e.blockMap.blocks[t];!o||Kl(o,r)},updateCollageBlockWithKey(e,t,r){let o=ne.toCollageBlock(e.blockMap.blocks[t]);if(o){let n=ne.getCollagedImage(o,r.key);if(!n)return;for(let i of Object.keys(r))n[i]=r[i]}},removeCollagedImage(e,t,r){Pm(e,t,r)},removeBlocks(e,t){for(let r of t)Ut(e,r,k.create({key:r}))},create(e=[k.create()]){return{blockMap:G.createBlocks(e)}},createFromBlockMap(e){return e},getDefaultSelection(e){let t=e.blockMap.order[0],r=e.blockMap.blocks[t],o=null;return tt.toMediaBlock(r)&&(o=_i.create(!1)),_.createTextSelection({startKey:r.key,startOffset:0,endKey:r.key,endOffset:0,customSelection:o})},getAllBlocksFromSelection(e,t){let{startKey:r,endKey:o}=t,{order:n,blocks:i}=e.blockMap,a=n.indexOf(r),s=n.indexOf(o);return a<0||s<0?(y.warn("incorrect selection"),[]):n.slice(a,s+1).map(c=>i[c])},getAllTableCellsCharactersBlocks(e){let t=[];return e.rowsOrder.forEach(r=>{e.colsOrder.forEach(o=>{let n=g.getCell(e,r,o),i=n&&$(n.content);i&&t.push({paragraph:i,location:{tableKey:e.key,colKey:o,rowKey:r,cellKey:n.key},meta:n.meta})})}),t},getAllFlipCardsCharactersBlocks(e,t){let r=[];return e.cardsBlockMap.order.forEach(o=>{let n=O.getFlipCardSideData(e,o,t);n.type!=="image"&&r.push({paragraph:n.text,location:{flipCardsBlockKey:e.key,cardKey:o,cardSide:t},meta:n.meta})}),r},getTableRowCellsCharactersBlocks(e,t){let r=[];return e.colsOrder.forEach(o=>{let n=g.getCell(e,t,o),i=n&&$(n.content);i&&r.push({paragraph:i,location:{tableKey:e.key,colKey:o,rowKey:t,cellKey:n.key},meta:n.meta})}),r},getTableColumnCellsCharactersBlocks(e,t){let r=[];return e.rowsOrder.forEach(o=>{let n=g.getCell(e,o,t),i=n&&$(n.content);i&&r.push({paragraph:i,location:{tableKey:e.key,colKey:t,rowKey:o,cellKey:n.key},meta:n.meta})}),r},getSelectedTableCharactersBlocks(e,t){if(ue.isCellSelected(t)){let r=t.customSelection,o=g.getCell(e,r.rowKey,r.colKey);return[{paragraph:m($(o.content)),location:{tableKey:e.key,colKey:r.colKey,rowKey:r.rowKey,cellKey:o.key},meta:o.meta}]}if(ue.isRowSelected(t)){let{rowKey:r}=t.customSelection;return G.getTableRowCellsCharactersBlocks(e,r)}if(ue.isColumnSelected(t)){let{colKey:r}=t.customSelection;return G.getTableColumnCellsCharactersBlocks(e,r)}return G.getAllTableCellsCharactersBlocks(e)},getSelectedFlipCardsParagraphBlocks(e,t){if(cr.isCardTextSelection(t)){let o=t.customSelection,n=O.getFlipCardSideData(e,o.cardKey,o.cardSide);if(n.type!=="image")return[{paragraph:n.text,location:{flipCardsBlockKey:e.key,cardKey:o.cardKey,cardSide:o.cardSide},meta:n.meta}]}let r=ui(e.key);return r?G.getAllFlipCardsCharactersBlocks(e,r):[]},getCharactersBlockFromSelection(e,t){let r=G.getAllBlocksFromSelection(e,t).filter(n=>!!st(n,t)||!!ne.toCollageBlock(n)||!!g.toTableBlock(n)||!!O.toFlipCardsBlock(n)||!!ie.toDividerBlock(n)||!!ye.toContinueBlock(n)),o=[];for(let n=0;n<r.length;n++){let i=ne.toCollageBlock(r[n]);if(i&&Xs({contentState:e,selection:t})){let S,R=t.customSelection.collageSelectedItemKey,w=ne.getCollagedImage(i,R);w&&(S=st(w)),o.push(S||r[n]);continue}if(i&&!Xs({contentState:e,selection:t})){i.images.forEach(S=>{let R=m(st(S));o.push(R)});continue}let a=tt.toMediaBlock(r[n]);if(a){let S=m(st(a));o.push(S);continue}let s=_t.toNoteBlock(r[n]);if(s){let S=m(st(s));o.push(S);continue}let c=ie.toDividerBlock(r[n]);if(c){c.dividerType==="line-with-text"&&o.push(tu.create({...c.paragraph,dividerBlockKey:c.key,paragraphStyle:c.paragraphStyle,meta:c.meta}));continue}let l=ye.toContinueBlock(r[n]);if(l){o.push($m.create({...l.paragraph,continueBlockKey:l.key}));continue}let d=at.toVideoBlock(r[n]);if(d){o.push(ou.create({...d.paragraph,videoBlockKey:d.key}));continue}let u=g.toTableBlock(r[n]);if(u){let R=this.getSelectedTableCharactersBlocks(u,t).map(w=>gi.create({...w.paragraph,...w.location,meta:w.meta}));o.push(...R);continue}let h=O.toFlipCardsBlock(r[n]);if(h){let R=this.getSelectedFlipCardsParagraphBlocks(h,t).map(w=>ru.create({...w.paragraph,...w.location,meta:w.meta}));o.push(...R);continue}o.push(r[n])}return o},getParagraphBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!$(r))},getMediaBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!tt.toMediaBlock(r))},getCollageBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!ne.toCollageBlock(r))},getTableBlockFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!g.toTableBlock(r))},getAttachmentBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!Wt.toAttachmentBlock(r))},getNoteBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!_t.toNoteBlock(r))},getTableBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!g.toTableBlock(r))},getFlipCardsBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!O.toFlipCardsBlock(r))},getDividerBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!ie.toDividerBlock(r))},getContinueBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!ye.toContinueBlock(r))},getVideoBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!at.toVideoBlock(r))},getParagraphsFromSelection(e,t){let r=G.getAllBlocksFromSelection(e,t),o=[];return r.forEach(n=>{let i=$(n);if(i){o.push({paragraph:i,parentBlockType:"none"});return}let a=g.toTableBlock(n);if(a){let c=this.getSelectedTableCharactersBlocks(a,t).map(l=>({paragraph:l.paragraph,parentBlockType:"table"}));o.push(...c)}let s=O.toFlipCardsBlock(n);if(s){let c=this.getSelectedFlipCardsParagraphBlocks(s,t).map(l=>({paragraph:l.paragraph,parentBlockType:"flip-card"}));o.push(...c)}}),o},getConvertableBlocksFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(r=>!!_t.toNoteBlock(r)||$(r)||ie.toDividerBlock(r)||ye.toContinueBlock(r))},getBlockBefore(e,t){let{order:r,blocks:o}=e.blockMap,n=r.indexOf(t);if(n<0)return y.warn("incorrect key"),null;if(n==0)return null;let i=r[n-1];return o[i]},getBlockAfter(e,t){let r=e.blockMap.order,o=e.blockMap.blocks,n=r.indexOf(t);if(n<0)return y.warn("incorrect key"),null;if(n==r.length-1)return null;let i=r[n+1];return o[i]},getExercisesFromSelection(e,t){return G.getAllBlocksFromSelection(e,t).filter(n=>!!Ct.toExerciseBlock(n))},atLeastOneNotEmptyCharactersBlockSelected(e,t){return G.getCharactersBlockFromSelection(e,t).some(r=>r.characters.length>0)},isOneNoteBlockSelected(e,t){return G.getNoteBlocksFromSelection(e,t).length===1},convertBrowserToModelSelection(e,t){let r=e.blockMap.blocks,o=st(r[t.startKey]),n=o?k.convertBrowserToModelOffset(o,t.startOffset):t.startOffset,i=st(e.blockMap.blocks[t.endKey]),a=i?k.convertBrowserToModelOffset(i,t.endOffset):t.endOffset;return{...t,startOffset:n,endOffset:a}},convertModelToBrowserSelection(e,t){if(_.isBlockSelection(t))return _.createTextSelection({startKey:t.startKey,endKey:t.endKey,customSelection:t.customSelection});let r=st(e.blockMap.blocks[t.startKey],t),o=r?k.convertModelToBrowserOffset(r,t.startOffset):t.startOffset,n=st(e.blockMap.blocks[t.endKey],t),i=n?k.convertModelToBrowserOffset(n,t.endOffset):t.endOffset;return{...t,startOffset:o,endOffset:i}},isValidSelection(e,t){return[t.startKey,t.endKey].every(r=>sr.hasBlock(e.blockMap,r))},getSelectedBlockKeys(e,t){let r=e.blockMap.order,o=r.findIndex(i=>i===t.startKey),n=r.findIndex(i=>i===t.endKey);return r.slice(o,n+1)}};var nu={create({type:e,width:t,height:r,src:o,crop:n,title:i,previewSrc:a}){let s={type:e,width:t,height:r,src:o};return n&&(s={...s,crop:n}),i&&(s={...s,title:i}),a&&(s={...s,previewSrc:a}),s}};function Ci(e){let t=[];for(let r of e)t.push({text:r,meta:W.create()});return t}function ki(e){let t=$(vt(e.blockMap));return t?k.getParagraphText(t):(y.error("first block is not text pararaph"),"")}var lo={create(e={}){let{key:t=x(),correct:r=!1,text:o=[]}=e;return{key:t,correct:r,content:G.create([k.create({characters:o})])}},getChoiceText(e){return m(ki(e.content))}};var Si={create(e={}){let{choices:t=[lo.create({correct:!0,text:Ci(`${B("Roll.Exercise.Question.Content.PossibleAnswer")} 1`)}),lo.create({text:Ci(`${B("Roll.Exercise.Question.Content.PossibleAnswer")} 2`)}),lo.create({text:Ci(`${B("Roll.Exercise.Question.Content.PossibleAnswer")} 3`)})]}=e;return{choices:t}}};var xi={create(e={}){let{key:t=x(),text:r=""}=e;return{key:t,text:r}}};var Bi={create(e={}){let{caseSensitive:t=!1,answers:r=[xi.create({text:`${B("Roll.Exercise.TypeIn.Answer")} 1`})]}=e;return{caseSensitive:t,answers:r}}};var Zs={ANSWERED:"answered",CORRECT_INCORRECT:"correctIncorrect"};var dr={create(e={}){let{type:t=Zs.CORRECT_INCORRECT,answered:r=[],correct:o=[],incorrect:n=[]}=e;return{type:t,answered:G.create([k.create({characters:r})]),correct:G.create([k.create({characters:o})]),incorrect:G.create([k.create({characters:n})])}},getFeedbackText(e,t){let r=e.type==Zs.ANSWERED?e.answered:t?e.correct:e.incorrect,o=$(vt(r.blockMap));return m(o)}};function IC(e){switch(e){case"mc":case"mr":return Si.create();case"ti":return Bi.create();default:throw L(e),new Error(`Unknown question type: ${e}`)}}var vi={create(e){let{key:t=x(),type:r,attachment:o=null,description:n="",content:i=IC(e.type),feedback:a=dr.create()}=e;return{key:t,type:r,attachment:o,description:G.create([k.create({characters:n})]),content:i,feedback:a}},getDescriptionText(e){return ki(e.description)}};var bi={create(e={}){let{includeInProgress:t=!1,shuffleAnswers:r=!1,showCorrectAnswers:o=!0}=e;return{includeInProgress:t,shuffleAnswers:r,showCorrectAnswers:o}}};var Ct={create(e={}){let{key:t=x(),settings:r=bi.create(),questions:o=[vi.create({type:"mc"})]}=e;return{key:t,type:p.EXERCISE,settings:r,questions:o}},clone(e){let t=x();return{...xt(e),key:t}},toExerciseBlock(e){return e&&e.type===p.EXERCISE?e:null},getBlockType(e){return"exercise"}};var Ti=class{static create(t={}){return{noteTextSelected:t.noteTextSelected||!1}}static textSelected(t){return t.customSelection&&t.customSelection.noteTextSelected}};var _={isTextSelection(e){return(e==null?void 0:e.type)==="text"},isBlockSelection(e){return e.type==="block"},isCollapsed(e){return _.isTextSelection(e)?e.startKey===e.endKey&&e.startOffset===e.endOffset:e.startKey===e.endKey},isOneBlockSelected(e){return _.isBlockSelection(e)&&e.startKey===e.endKey},isEqual(e,t){return e===t?!0:!e||!t?!1:JSON.stringify(e)===JSON.stringify(t)},fromBlockToText(e,t){return!!(e!=null&&e.customSelection)&&(t==null?void 0:t.customSelection)===null||(e==null?void 0:e.type)==="block"&&(t==null?void 0:t.type)==="text"},fromTextToBlock(e,t){return!(e!=null&&e.customSelection)&&!!(t!=null&&t.customSelection)||(e==null?void 0:e.type)==="text"&&(t==null?void 0:t.type)==="block"},fromBlockToBlock(e,t){return(e==null?void 0:e.startKey)!==(t==null?void 0:t.startKey)&&!!(e!=null&&e.customSelection)&&!!(t!=null&&t.customSelection)},createTextSelection(e={}){return{type:"text",startKey:e.startKey||"",startOffset:e.startOffset||0,endKey:e.endKey||"",endOffset:e.endOffset||0,isBackward:e.isBackward||!1,customSelection:e.customSelection||null}},createCollapsed({key:e,offset:t,customSelection:r}){return _.createTextSelection({startKey:e,startOffset:t,endKey:e,endOffset:t,customSelection:r})},createBlockSelection(e){return{type:"block",startKey:e.startKey||"",endKey:e.endKey||"",customSelection:e.customSelection||null}},createCollapsedTextSelection({key:e,offset:t,customSelection:r}){return _.createTextSelection({startKey:e,startOffset:t,endKey:e,endOffset:t,customSelection:r})},createCollapsedBlockSelection({key:e,customSelection:t}){return _.createBlockSelection({startKey:e,endKey:e,customSelection:t})},createAttachmentBlockSelection(e){return _.createCollapsedBlockSelection({key:e})},createExerciseBlockSelection(e){return _.createCollapsedBlockSelection({key:e})},createParagraphBlockSelection(e){return _.createCollapsedBlockSelection({key:e,customSelection:hi.create({blockSelected:!0})})},createMediaBlockSelection(e){return _.createCollapsedBlockSelection({key:e,customSelection:{captionSelected:!1}})},createCollageBlockSelection(e){return _.createCollapsedBlockSelection({key:e,customSelection:mi.create({})})},createNoteBlockSelection(e){return _.createCollapsedBlockSelection({key:e,customSelection:Ti.create()})},createTableBlockSelection(e){return _.createCollapsedBlockSelection({key:e,customSelection:ue.createTableSelection()})},createTableRowSelection(e,t){return _.createCollapsedBlockSelection({key:e,customSelection:ue.createRowSelection({rowKey:t})})},createTableColumnSelection(e,t){return _.createCollapsedBlockSelection({key:e,customSelection:ue.createColumnSelection({columnKey:t})})},createFlipCardsBlockSelection(e){return _.createCollapsedBlockSelection({key:e,customSelection:cr.createBlockSelection()})},createDividerBlockSelection(e){return _.createCollapsedBlockSelection({key:e,customSelection:so.create(!1)})},createContinueBlockSelection(e){return _.createCollapsedBlockSelection({key:e,customSelection:io.create(!1)})},createVideoBlockSelection(e){return _.createCollapsedBlockSelection({key:e,customSelection:yi.create(!1)})},createSelectionFromBlockData(e){return g.toTableBlock(e)?_.createTableBlockSelection(e.key):O.toFlipCardsBlock(e)?_.createFlipCardsBlockSelection(e.key):ie.toDividerBlock(e)?_.createDividerBlockSelection(e.key):ye.toContinueBlock(e)?_.createContinueBlockSelection(e.key):ne.toCollageBlock(e)?_.createCollageBlockSelection(e.key):tt.toMediaBlock(e)?_.createMediaBlockSelection(e.key):at.toVideoBlock(e)?_.createVideoBlockSelection(e.key):_t.toNoteBlock(e)?_.createNoteBlockSelection(e.key):Wt.toAttachmentBlock(e)?_.createAttachmentBlockSelection(e.key):Ct.toExerciseBlock(e)?_.createExerciseBlockSelection(e.key):_.createCollapsed({key:e.key,offset:0})}};var iu={create({title:e,subtitle:t}){return{title:e,subtitle:t}}};function MC(e){switch(e){case 4:return Qd;case 5:return Xd;case 6:return jd;case 7:return em;case 8:return rm;case 9:return Yn;case 10:return nm;case 11:return cm;case 12:return Jn;case 13:return ti;case 14:return dm;case 15:return ni;case 16:return ai;case 17:return fm;case 18:return li;case 19:return km;default:throw Error(`cannot decode json document with version ${e}`)}}function au(e,t){let r=MC(t),o=Ir(e,r,[]);return Cn(o,$d)}var su=protobuf.Type,jo=protobuf.Field,AC=protobuf.Root;var wi={string:"string",int:"int32",float:"float",bool:"bool"},FC=0,ze={String:e=>D(e,wi.string),Int:e=>D(e,wi.int),Bool:e=>D(e,wi.bool),Float:e=>D(e,wi.float)},PC=new AC;function b(e,t){t=t||`Type${++FC}`;let r=new su(t);for(let o of Object.keys(e)){let n=e[o],i=n.ref;if(typeof i=="string")r=r.add(new jo(o,n.id,i,n.rule));else if(i instanceof su){let a=i;r=r.add(new jo(o,n.id,a.name,n.rule))}else{let a=b(i);r=r.add(new jo(o,n.id,a.name,n.rule))}}return PC.add(r),r}function D(e,t,r="required"){return{id:e,ref:t,rule:r}}function K(e,t){return typeof t=="function"&&(t=t(e).ref),D(e,t,"repeated")}function z(e,t){return typeof t=="function"&&(t=t(e).ref),D(e,t,"optional")}function Ze(e){let t="type",r=b({}),o=b({}).add(new jo(t,0,"string","required"));for(let n of Object.keys(e))e[n]=e[n].add(new jo(t,0,"string","required"));return r.fromObject=function(n){return e[n[t]].fromObject(n)},r.toObject=function(n){return e[n[t]].toObject(n)},r.encode=function(n,i){return e[n[t]].encode(n,i)},r.decode=function(n,...i){if(n instanceof protobuf.Reader){let a=n.pos,s=o.decode(n,...i),c=e[s[t]];return n.pos=a,c.decode(n,...i)}throw new Error("top level union is not supported")},r.verify=function(n){let i=e[n[t]];return i?i.verify(n):`unknown type ${n[t]}`},r}var Tt={ACCENT_COLOR:"ACCENT_COLOR",PLAYER_MAIN_FONT:"PLAYER_MAIN_FONT",CONTENT_FONT:"CONTENT_FONT"};var{String:rt,Int:mr,Bool:Jo}=ze,OC=b({start:mr(1),end:mr(2),style:rt(3)}),LC=b({start:mr(1),end:mr(2),url:rt(3)}),Pr=b({text:rt(1),inlineStyleRanges:K(2,OC),urls:K(3,LC)}),$C=b({src:rt(1),width:mr(2),height:mr(3)}),KC=b({src:rt(1),width:mr(2),height:mr(3)}),js=Ze({i:KC,e:$C}),cu=b({key:rt(1),text:D(2,Pr),correct:Jo(3)}),NC=b({choices:K(1,cu)}),VC=b({choices:K(1,cu)}),HC=b({key:rt(1),text:rt(2)}),WC=b({caseSensitive:Jo(1),answers:K(2,HC)}),Js=b({type:rt(1),correct:D(2,Pr),incorrect:D(3,Pr),answered:D(4,Pr)}),UC=b({includeInProgress:Jo(1),shuffleAnswers:Jo(2),showCorrectAnswers:Jo(3)}),zC=b({key:rt(1),description:D(2,Pr),attachment:z(3,js),content:D(4,NC),feedback:D(5,Js)}),GC=b({key:rt(1),description:D(2,Pr),attachment:z(3,js),content:D(4,VC),feedback:D(5,Js)}),qC=b({key:rt(1),description:D(2,Pr),attachment:z(3,js),content:D(4,WC),feedback:D(5,Js)}),QC=Ze({mc:zC,mr:GC,ti:qC}),lu=b({key:rt(1),settings:D(2,UC),questions:K(3,QC)});var{String:Te,Int:wt,Float:YC}=ze,Or=b({start:wt(1),end:wt(2),url:Te(3)}),ec=b({start:wt(1),end:wt(2),style:Te(3)}),XC=b({key:Te(1),text:Te(2),viewType:Te(3),inlineStyleRanges:K(4,ec),urls:K(5,Or)}),ZC=b({key:Te(1),src:Te(2),width:wt(3),height:wt(4),alignment:Te(5),text:Te(6),inlineStyleRanges:K(7,ec),urls:K(8,Or)}),jC=b({key:Te(1),src:Te(2),width:wt(3),height:wt(4),alignment:Te(5),text:Te(6),inlineStyleRanges:K(7,ec),urls:K(8,Or)}),du=Ze({[p.PARAGRAPH]:XC,[p.IMAGE]:ZC,[p.EMBED]:jC,[p.EXERCISE]:lu}),mu=b({intro:D(1,{kicker:Te(1),title:Te(2),coverSrc:z(3,Te),coverWidth:z(4,wt),coverHeight:z(5,wt),blocks:K(6,du),coverColor:z(7,Te),coverOpacity:z(8,YC)}),chapters:K(2,{key:Te(1),title:Te(2),blocks:K(3,du)})});var{String:Lr,Bool:Di}=ze,JC=b({content:D(1,mu),publishSettings:D(2,{navigationType:Lr(1),searchEnabled:Di(2),numberingEnabled:Di(3),nextButtonEnabled:Di(4),copyingEnabled:z(6,Di),fonts:D(5,{[gt.TOOLTIP]:Lr(1),[gt.PLAYER_MAIN]:Lr(2),[gt.CONTENT]:Lr(3)})}),cssReplacements:D(3,{[Tt.ACCENT_COLOR]:Lr(1),[Tt.CONTENT_FONT]:Lr(2),[Tt.PLAYER_MAIN_FONT]:Lr(3)})}),Ei=new nr(JC);var uu=Ei;var{String:je,Int:zt,Bool:en,Float:ek}=ze,tk=b({start:zt(1),end:zt(2),style:D(3,{name:je(1),size:z(2,zt),color:z(3,je),opacity:z(4,ek)})}),rk=b({start:zt(1),end:zt(2),url:je(3)}),$r=b({text:je(1),inlineStyleRanges:K(2,tk),urls:K(3,rk)}),ok=b({src:je(1),width:zt(2),height:zt(3)}),nk=b({src:je(1),width:zt(2),height:zt(3)}),tc=Ze({i:nk,e:ok}),pu=b({key:je(1),text:D(2,$r),correct:en(3)}),ik=b({choices:K(1,pu)}),ak=b({choices:K(1,pu)}),sk=b({key:je(1),text:je(2)}),ck=b({caseSensitive:en(1),answers:K(2,sk)}),rc=b({type:je(1),correct:D(2,$r),incorrect:D(3,$r),answered:D(4,$r)}),lk=b({includeInProgress:en(1),shuffleAnswers:en(2),showCorrectAnswers:en(3)}),dk=b({key:je(1),description:D(2,$r),attachment:z(3,tc),content:D(4,ik),feedback:D(5,rc)}),mk=b({key:je(1),description:D(2,$r),attachment:z(3,tc),content:D(4,ak),feedback:D(5,rc)}),uk=b({key:je(1),description:D(2,$r),attachment:z(3,tc),content:D(4,ck),feedback:D(5,rc)}),pk=Ze({mc:dk,mr:mk,ti:uk}),fu=b({key:je(1),settings:D(2,lk),questions:K(3,pk)});var{String:pe,Int:Dt,Float:gu,Bool:fk}=ze,oc=b({start:Dt(1),end:Dt(2),style:D(3,{name:pe(1),size:z(2,Dt),color:z(3,pe),opacity:z(4,gu)})}),hk=b({key:pe(1),text:pe(2),viewType:pe(3),inlineStyleRanges:K(4,oc),urls:K(5,Or),textAlign:z(6,pe),isOrderedListFirstItem:z(7,fk)}),gk=b({key:pe(1),src:pe(2),width:Dt(3),height:Dt(4),alignment:pe(5),text:pe(6),inlineStyleRanges:K(7,oc),urls:K(8,Or)}),yk=b({key:pe(1),src:pe(2),width:Dt(3),height:Dt(4),alignment:pe(5),text:pe(6),inlineStyleRanges:K(7,oc),urls:K(8,Or)}),_k=b({key:pe(1),fileName:pe(2),fileExtension:pe(3),fileSize:Dt(4)}),hu=Ze({[p.PARAGRAPH]:hk,[p.IMAGE]:gk,[p.EMBED]:yk,[p.EXERCISE]:fu,[p.ATTACHMENT]:_k}),yu=b({intro:D(1,{kicker:pe(1),title:pe(2),coverSrc:z(3,pe),coverWidth:z(4,Dt),coverHeight:z(5,Dt),blocks:K(6,hu),coverColor:z(7,pe),coverOpacity:z(8,gu)}),chapters:K(2,{key:pe(1),title:pe(2),blocks:K(3,hu)})});var{String:Kr,Bool:Ri}=ze,Ck=b({content:D(1,yu),publishSettings:D(2,{navigationType:Kr(1),searchEnabled:Ri(2),numberingEnabled:Ri(3),nextButtonEnabled:Ri(4),copyingEnabled:z(6,Ri),fonts:D(5,{[gt.TOOLTIP]:Kr(1),[gt.PLAYER_MAIN]:Kr(2),[gt.CONTENT]:Kr(3)})}),cssReplacements:D(3,{[Tt.ACCENT_COLOR]:Kr(1),[Tt.CONTENT_FONT]:Kr(2),[Tt.PLAYER_MAIN_FONT]:Kr(3)})}),_u=new nr(Ck);var Ii=class{constructor({initialVersion:t,upgraders:r,fixers:o=[]}){this._initialVersion=t,this._upgraders=new Map,r.forEach((n,i)=>{this._validateUpgrader(t,n,i),this._upgraders.set(n.targetVersion,n.upgradeFn)}),this._fixers=new Map,o.forEach(n=>this._fixers.set(n.targetVersion,n.fixFn))}upgradeDocument(t,r){let o=!1;if(r.from==r.to){let i=this._fixDocument(t,r.to);return{upgradedDocument:i.document,isDocumentFixed:i.fixed}}if(r.from<this._initialVersion||r.to>this._initialVersion+this._upgraders.size)throw new Error;let n=this._fixDocument(t,r.from);t=n.document,o=n.fixed;for(let i=r.from+1;i<=r.to;++i)t=m(this._upgraders.get(i))(t),n=this._fixDocument(t,i),t=n.document,o=o||n.fixed;return{upgradedDocument:t,isDocumentFixed:o}}_fixDocument(t,r){let o=this._fixers.get(r),n={document:t,fixed:!1};return o&&(n=o(t)),{document:n.document,fixed:n.fixed}}_validateUpgrader(t,{targetVersion:r},o){if(t!=r-o-1)throw new Error}};var Cu="data-1.bin",ku="data-1.json";function Su(e){return e}function kk(e){return{...e,verticalTextAlign:"top"}}function Sk(e){for(let t of e.rowsOrder)for(let r of e.colsOrder){let o=g.getCell(e,t,r);e.rowsMap[t].colsMap[r]=kk(o)}}function xu(e){return e.type==="image"?e:{...e,meta:[]}}function xk(e){e.frontSide=xu(e.frontSide),e.backSide=xu(e.backSide)}function Bk(e){ot(e.cardsBlockMap,xk)}function Bu(e){let t=e.blocks;for(let r of Object.keys(t)){let o=t[r];o.type===p.TABLE&&Sk(o),o.type===p.FLIP_CARD&&Bk(o)}}function vu(e){return ir(e,t=>{Bu(t.intro.contentState.blockMap);for(let r of Object.values(t.chapters.blocks))r&&Bu(r.contentState.blockMap)})}function bu({content:e,settings:t}){return{content:vu(e),settings:t}}function Tu(e){return{...e,advanced:{direction:"ltr"}}}function wu({content:e,settings:t}){return{content:e,settings:Tu(t)}}function Du(e){return e}function Eu(e){return e}function vk(e){let t=e.contentState.blockMap,r=vt(t),o=null;r&&r.type===p.PARAGRAPH&&(o=r);let n={order:[...t.order],blocks:{...t.blocks}},i="";return o&&o.viewType==="subheader"&&!k.hasHyperlink(o,0)&&(i=k.getParagraphText(o),Fn(n,o.key)),{...e,contentState:{blockMap:n},header:iu.create({title:e.header.title,subtitle:i})}}function Ru(e){let r=pd(e.chapters).map(vk);return{...e,chapters:tr(r,o=>o.key)}}function Iu(e){return{settings:e.settings,content:Ru(e.content)}}function bk(e){return{...e,customIconColor:null,customBackgroundColor:null}}function Mu(e){let t=e.blocks;for(let r of Object.keys(t)){let o=t[r];o.type===p.NOTE&&(t[r]=bk(o))}}function Au(e){return ir(e,t=>{Mu(t.intro.contentState.blockMap);for(let r of Object.values(t.chapters.blocks))r&&Mu(r.contentState.blockMap)})}function Fu({content:e,settings:t}){return{content:Au(e),settings:t}}function Pu(e){return e}function Ou(e){return vs(e,t=>{if(t.type===p.FLIP_CARD){let r=t;return{cardsBlockMap:r.cardsBlockMap,maxCardsInRow:r.maxCardsInRow,cardsLayout:r.cardsLayout,type:r.type,key:r.key,designSettings:{background:r.background&&r.background.type==="color"?{color:r.background.color,opacity:r.background.opacity}:null,paddingTop:null,paddingBottom:null}}}return{...t,designSettings:{background:null,paddingTop:null,paddingBottom:null}}})}function Lu(e){return{...e,intro:{...e.intro,contentState:{blockMap:Ou(e.intro.contentState.blockMap)}},chapters:vs(e.chapters,t=>({...t,contentState:{blockMap:Ou(t.contentState.blockMap)}}))}}function $u(e){return{settings:e.settings,content:Lu(e.content)}}function Ku(e){return e.publishSettings.copyingEnabled=!0,e}function ur(e){e.inlineStyleRanges&&e.inlineStyleRanges.forEach(t=>{t.style={name:t.style}}),e.urls&&e.urls.forEach(t=>{let r={start:t.start,end:t.end,style:{name:"underline"}};e.inlineStyleRanges?e.inlineStyleRanges.push(r):e.inlineStyleRanges=[r]})}function Tk(e){ur(e),e.textAlign=e.viewType==="pullquote"?"center":"left"}function nc(e){let t=null;e.forEach(r=>{if(r.type===p.PARAGRAPH){Tk(r);let o=r;o.viewType==="ol"&&(!t||t!=="ol")&&(o.isOrderedListFirstItem=!0),t=o.viewType}else if(r.type===p.IMAGE)ur(r),t=null;else if(r.type===p.EMBED)ur(r),t=null;else if(r.type===p.EXERCISE){let o=r;o.questions&&o.questions.forEach(n=>{ur(n.description),(n.type==="mc"||n.type==="mr")&&n.content.choices&&n.content.choices.forEach(i=>ur(i.text)),ur(n.feedback.answered),ur(n.feedback.correct),ur(n.feedback.incorrect)}),t=null}else t=null})}function Nu(e){return nc(e.content.intro.blocks),e.content.chapters&&e.content.chapters.forEach(t=>{nc(t.blocks)}),e}function mo({text:e,inlineStyleRanges:t,urls:r}){let o=W.create(),n=[...e].map(i=>({text:i,meta:o}));return t&&t.forEach(i=>{for(let a=i.start;a<i.end;++a){if(a>=n.length){y.warn("incorrect style ranges");break}n[a].meta=W.applyStyle(n[a].meta,i.style)}}),r&&r.forEach(i=>{for(let a=i.start;a<i.end;++a){if(a>=n.length){y.warn("incorrect url ranges");break}n[a].meta=W.setUrl(n[a].meta,i.url)}}),n}function Vu(e,t=!1){let r=e.questions,o=r?Dk(r,t):[];return Ct.create({key:t?x():e.key,settings:wk(e.settings),questions:o})}function wk(e){return bi.create({includeInProgress:e.includeInProgress,showCorrectAnswers:e.showCorrectAnswers,shuffleAnswers:e.shuffleAnswers})}function Dk(e,t){return e.map(r=>Ek(r,t))}function Ek(e,t){let r=e.type,o=e.attachment;return vi.create({key:t?x():e.key,type:r,description:tn(e.description),attachment:o?Rk(o):void 0,content:Mk(r,e.content,t),feedback:Ik(e.feedback)})}function Rk(e){let t={crop:e.crop||void 0,title:e.title||void 0,previewSrc:e.previewSrc||void 0};return nu.create({type:e.type,width:e.width,height:e.height,src:e.src,...t})}function Ik(e){return dr.create({type:e.type,correct:tn(e.correct),incorrect:tn(e.incorrect),answered:tn(e.answered)})}function tn(e){return mo({text:e.text,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls})}function Mk(e,t,r){switch(e){case"mc":case"mr":return Ak(t,r);case"ti":return Pk(t,r);default:throw L(e),new Error(`Unknown question type: ${e}`)}}function Ak(e,t){let r=e.choices,o=r?r.map(n=>Fk(n,t)):[];return Si.create({choices:o})}function Fk(e,t){return lo.create({key:t?x():e.key,text:tn(e.text),correct:e.correct})}function Pk(e,t){let r=e.answers,o=r?r.map(n=>Ok(n,t)):[];return Bi.create({caseSensitive:e.caseSensitive,answers:o})}function Ok(e,t){return xi.create({key:t?x():e.key,text:e.text})}var uo={create(e={}){return{...tt.create(e),type:p.EMBED,width:e.width||0,height:e.height||0,src:e.src||""}},clone(e){let t=x();return{...xt(e),key:t}},toEmbedBlock(e){return e.type!==p.EMBED?null:e}};var Mi={create(e={}){return{...tt.create(e),type:p.IMAGE,src:e.src||"",isBlob:e.isBlob||!1,crop:e.crop||void 0}},toImageBlock(e){return e&&e.type===p.IMAGE?e:null}};function Lk(e){return k.create({key:e.key,viewType:e.viewType,textAlign:e.textAlign,characters:mo({text:e.text,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls}),isOrderedListFirstItem:e.isOrderedListFirstItem})}function $k(e){let t=e.text||"";return Mi.create({key:e.key,characters:mo({text:t,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls}),src:e.src,width:e.width,height:e.height,alignment:e.alignment})}function Kk(e){let t=e.text||"";return uo.create({key:e.key,characters:mo({text:t,inlineStyleRanges:e.inlineStyleRanges||[],urls:e.urls}),src:e.src,width:e.width,height:e.height,alignment:e.alignment})}function Nk(e){return Wt.create({key:e.key,fileName:e.fileName,fileSize:e.fileSize,fileExtension:e.fileExtension})}function Vk(e){switch(e.type){case p.PARAGRAPH:return Lk(e);case p.IMAGE:return $k(e);case p.EMBED:return Kk(e);case p.EXERCISE:return Vu(e);case p.ATTACHMENT:return Nk(e)}return y.error(`unknown block type ${e.type}`),null}function Hu(e){let t=[];return e.forEach(r=>{let o=Vk(r);o&&t.push(o)}),t}function Wu(e){let t=Hu(e),r={order:[],blocks:{}};for(let o of t)r.order.push(o.key),r.blocks[o.key]=o;return{blockMap:r}}function Hk(e){let t={kicker:e.kicker,title:e.title,coverInfoState:null};return e.coverSrc&&e.coverColor&&e.coverWidth!=null&&e.coverHeight!=null&&e.coverOpacity!=null&&(t.coverInfoState={src:e.coverSrc,width:e.coverWidth,height:e.coverHeight,color:e.coverColor,opacity:e.coverOpacity,isBlob:!1}),{header:{kicker:t.kicker,title:t.title,coverInfoState:t.coverInfoState},contentState:Wu(e.blocks)}}function Wk(e){return{key:e.key,header:{title:e.title},contentState:Wu(e.blocks)}}function Uu(e){let t=Hk(e.intro),r=(e.chapters||[]).map(o=>Wk(o));return{intro:t,chapters:tr(r,o=>o.key)}}function Uk(e,t){return{main:{navigationType:e.navigationType,numberingEnabled:e.numberingEnabled,nextButtonEnabled:e.nextButtonEnabled,copyingEnabled:e.copyingEnabled},design:{accentColor:t[Tt.ACCENT_COLOR],headerFont:e.fonts[gt.PLAYER_MAIN],contentFont:e.fonts[gt.CONTENT]}}}function zu(e){return{content:Uu(e.content),settings:Uk(e.publishSettings,e.cssReplacements)}}function Gu(e){let t=e.blocks;for(let r of Object.keys(t)){let o=t[r];if(o.type===p.IMAGE){let n=t[r],i={alignment:n.alignment,key:n.key,type:p.COLLAGE,images:[{key:x(),type:n.type,parentCollageKey:n.key,width:n.width,height:n.height,src:n.src,characters:n.characters,isBlob:n.isBlob,alignment:"inner"}]};t[r]=i}else if(o.type===p.EMBED){let n=t[r],i={key:n.key,type:n.type,width:n.width,height:n.height,src:n.src,alignment:n.alignment,characters:n.characters};t[r]=i}else t[r]=o}}function qu(e){return ir(e,t=>{Gu(t.intro.contentState.blockMap);for(let r of Object.values(t.chapters.blocks))r&&Gu(r.contentState.blockMap)})}function Qu({content:e,settings:t}){return{content:qu(e),settings:t}}function Yu(e){return e}function Xu(e){return e}function Zu(e){return e}function ju(e){return e}function Ju(e){return{...e,main:{...e.main,longreadType:"multiplePage"}}}function ep(e){return{...e,settings:Ju(e.settings)}}function ic(e,t){return zk(e,1,t,19,[{targetVersion:2,upgradeFn:Ku},{targetVersion:3,upgradeFn:Nu},{targetVersion:4,upgradeFn:zu},{targetVersion:5,upgradeFn:Qu},{targetVersion:6,upgradeFn:Yu},{targetVersion:7,upgradeFn:Xu},{targetVersion:8,upgradeFn:Zu},{targetVersion:9,upgradeFn:ju},{targetVersion:10,upgradeFn:ep},{targetVersion:11,upgradeFn:Su},{targetVersion:12,upgradeFn:bu},{targetVersion:13,upgradeFn:wu},{targetVersion:14,upgradeFn:Du},{targetVersion:15,upgradeFn:Eu},{targetVersion:16,upgradeFn:Iu},{targetVersion:17,upgradeFn:Fu},{targetVersion:18,upgradeFn:Pu},{targetVersion:19,upgradeFn:$u}]).upgradedDocument}function zk(e,t,r,o,n){return new Ii({initialVersion:t,upgraders:n}).upgradeDocument(e,{from:r,to:o})}async function Gk(e){let t=await Ad(e,n=>{switch(n){case 1:return Ei;case 2:return uu;case 3:return _u;default:throw Error("invalid blob document format")}}),{version:r,data:o}=t;return ic(o,r)}function qk(e){return"content"in e&&"settings"in e&&"version"in e?Qk({version:e.version,content:e.content,settings:e.settings}):null}function Qk({version:e,content:t,settings:r}){return ic({content:au(t,e),settings:xm(r,e)},e)}async function tp(e){let t;return e instanceof Blob?t=Gk(e):t=qk(e),t}function rp({product:e}){switch(e){case"learn":return"iSpring Learn";case"page":return"iSpring Page";case"space":return"iSpring Space";default:throw L(e),new Error}}var po={watermark:"x402f7__watermark",highlight:{withMods:e=>__getCssClass("x402f7__highlight",e)},container:"x402f7__container",logo:"x402f7__logo",button:"x402f7__button",arrowIcon:{withMods:e=>__getCssClass("x402f7__arrow-icon",e)},moveRight:"x402f7__move-right",moveLeft:"x402f7__move-left"};function Yk(e){return V(e,{islearn:"learn",isstudio:"page",isspace:"space"})}function Xk(e){let t=rp({product:Yk(e)});return B("Watermark.Trial.Text",{product:t})}function op(e,{subscriptionProduct:t,watermarkUrl:r}){return e`
<a
	href=${r}
	target="_blank"
	class=${po.watermark}
>
	<div class=${po.highlight.withMods({dir:Fe()})}></div>
	<div class=${po.container}>
		<div class=${po.logo}></div>
		<div>${Xk(t)}</div>
		<div class=${po.button}>
			<div>${B("Common.LearnMore")}</div>
			<div class=${po.arrowIcon.withMods({dir:Fe()})}></div>
		</div>
	</div>
</a>`}var Oe=Me.requestAnimationFrame||Me.mozRequestAnimationFrame||Me.webkitRequestAnimationFrame||Me.msRequestAnimationFrame||setTimeout,Zk=Me.cancelAnimationFrame||Me.mozCancelAnimationFrame||Me.webkitCancelAnimationFrame||Me.msCancelAnimationFrame||clearTimeout,cP=Me.requestIdleCallback||jk,lP=Me.cancelIdleCallback||Jk;function jk(e){let t=Date.now();return setTimeout(()=>{e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)}function Jk(e){clearTimeout(e)}function np(e,t){let r=t?e.bind(t):e,o;function n(){Zk(o),o=null}function i(){o&&n(),o=Oe(r)}function a(){return o!=null}return{call:i,cancel:n,isSheduled:a}}function e0(e,t){if(typeof e.className=="string"){e.className=t;return}e.className.baseVal=t}function t0(e){return typeof e.className=="string"?e.className:e.className.baseVal}function r0(e){if(e.classList)return e.classList;let t=e.className;return Ot(t)&&t.match(/\S+/g)||[]}function o0(e,t){return e.classList?e.classList.contains(t):r0(e).includes(t)}function ip(e,t){if(e instanceof Element){if(e.classList){e.classList.add(t);return}if(!o0(e,t)){let r=t0(e),o="";r&&(o=`${r} `),e0(e,o+t)}}}var Gt=new Map,ac=null;function ap(){return ac||(ac=new MutationObserver(e=>{for(let t of e){for(let r of t.removedNodes)for(let o of Gt.keys()){let n=m(Gt.get(o));n.remove&&!!r.contains&&r.contains(o)&&n.remove()}for(let r of t.addedNodes)for(let o of Gt.keys()){let n=m(Gt.get(o));n.add&&!!r.contains&&r.contains(o)&&n.add()}}})),ac}function sp(e,t){let r=Gt.size==0;return y.assert(!Gt.has(e)),Gt.set(e,t),r&&ap().observe(document,{subtree:!0,childList:!0}),()=>{Gt.delete(e),Gt.size==0&&ap().disconnect()}}var cp="renderBinding",f=(e,t=void 0,r=void 0)=>{let o=()=>[e,t,r];return o._meta=cp,o},Nr=(e,t,r=void 0,o=void 0)=>({id:typeof e=="string"?e:vm(e),binding:f(t,r,o)});function lp(e){return typeof e=="function"&&e._meta==cp}function Ai(e){return Object.freeze({initialValue:e})}function Fi(e,t,r){let o=e.get(t);if(!(o&&o.value===r)){if(sc.set(t,!0),o){o.value=r;return}e.set(t,{value:r})}}function dp(e,t){return e.has(t)?e.get(t).value:t.initialValue}function mp(){sc.clear()}var sc=new Map;function up(e){for(let t of e.keys())if(sc.has(t))return!0;return!1}var pp=[],fp=[];function hp(e){for(let t of e){t.clear&&t.clear();try{t.clear=t.callback(),t.clear&&typeof t.clear!="function"&&(y.error("useEffect's callback should return a function"),t.clear=void 0)}catch(r){console.log(r)}}e.length=0}function gp(){hp(fp)}function Pi(){hp(pp)}function yp(e){e.clear&&(e.clear(),e.clear=null),e.sync?pp.push(e):fp.push(e)}var cc=null,dc=new Map;function mc(){if(!cc){let{call:e}=np(uc);cc=e}cc()}var lc=!1,Oi=!1;function uc(){if(lc)return;if(lc=!0,gp(),lc=!1,Oi){y.error("render was already started"),mc();return}Oi=!0,mp();let e=dc;dc=new Map;for(let t of e.keys())try{t()}catch(r){console.log(r)}Pi(),Oi=!1}function Li(e){dc.set(e,!0),mc()}function _p(){return Oi}function pc(e){yp(e),e.sync||mc()}var pr=new Map,Vr=[];function Cp(e,t){if(Vr.push({redrawFn:e,contextMap:t}),pr.has(e)){let r=m(pr.get(e));r.hookIndex=0,r.effectIndex=0}}function kp(e){let t=m(Vr.pop()),r=pr.get(t.redrawFn);if(r){if(y.assert(e instanceof Element),r.connected)y.assert(r.firstRenderHooksCount==r.hookData.length,`Incorrect hooks count
expected: ${r.firstRenderHooksCount}
actual: ${r.hookData.length}`),y.assert(r.firstRenderEffectsCount==r.effects.length,`Incorrect effects count
expected: ${r.firstRenderEffectsCount}
actual: ${r.effects.length}`);else{r.connected=!0;for(let o of r.effects)pc(o);r.firstRenderHooksCount=r.hookData.length,r.firstRenderEffectsCount=r.effects.length}return!0}return!1}function Sp(e){let t=pr.get(e);if(t){for(let r of t.effects)r.clear&&r.clear();pr.delete(e)}}function fc(){if(!Vr.length)throw new Error("Hooks can be used only in render functions");let e=m(Vr[Vr.length-1]).redrawFn;return pr.has(e)||pr.set(e,{hookIndex:0,hookData:[],effectIndex:0,effects:[],redraw:e,connected:!1}),m(pr.get(e))}var Z=e=>{!1&&e!=null&&typeof e=="object"&&y.error("useState: you should use lazy initialization for complex types");let t=fc(),r=t.hookIndex;if(t.hookData.length==r){let o=i=>{typeof i=="function"&&(i=i(t.hookData[r][0])),t.hookData[r][0]=i,Li(t.redraw)},n=typeof e=="function"?e():e;!1&&typeof n=="function"&&y.error("useState: do not store functions in state"),t.hookData.push([n,o])}return++t.hookIndex,t.hookData[r]};function F(e){let t=fc(),r=t.hookIndex;if(t.hookData.length==r){let n={current:e};t.hookData.push(n)}let o=t.hookData[r];return++t.hookIndex,o}function xp(e,t,r){let o=fc(),n=o.effectIndex;if(o.effects.length==n){let a={callback:e,sync:r,clear:null,deps:t};o.effects.push(a)}else{let a=o.effects[n];a.callback=e}let i=o.effects[n];o.connected&&(!t||!hs(m(i.deps),t))&&pc(i),i.deps=t,++o.effectIndex}function H(e,t){xp(e,t,!1)}function _e(e,t){xp(e,t,!0)}function n0(e){let t=F();return H(()=>{t.current=e},[e]),t.current}function ae(e,t){let r=F(),o=n0(t);return(!o||!hs(o,t))&&(r.current=e()),r.current}function j(e,t){return ae(()=>e,t)}function Et(e){return dp(Vr[Vr.length-1].contextMap,e)}function $i(...e){}function i0(e,t={}){t.current=e}hyperHTML.define("save-ref",i0);var Bp=new WeakMap;function a0(e,t){let r=Bp.get(e)||Bp.set(e,{}).get(e);for(let o of Object.keys(t))if(o.slice(0,2)==="on"&&r[o]!==t[o]){let i=o.slice(2);r[o]&&e.removeEventListener(i,r[o]),r[o]=t[o],r[o]&&e.addEventListener(i,r[o],{passive:!0})}return""}hyperHTML.define("passive-events",a0);var M=hyperHTML.wire;if(!1){let e=new WeakMap;M=(t,r="__default__")=>{t=t||{},e.has(t)||e.set(t,{});let o=e.get(t);if(!o[r]){let n=hyperHTML.wire(t,r),i;o[r]=function(a,...s){return i||(i=a),i!=a&&a.join("_")==i.join("_")&&(a=i),m(o)[r].__tmp.history.push([a,...s]),n(a,...s)},o[r].__tmp={obj:t,id:r,history:[]}}return o[r]}}var FP=hyperHTML.bind;var hc=new Map,Ki=new WeakMap;function s0(e,t){return e===t?!0:typeof e=="object"&&typeof t=="object"&&Jr(e,t)}function qt(e,t,r=new Map,o,n="html"){let i=t?`${t}`:"__root";hc.has(e)||hc.set(e,{});let a=hc.get(e);if(!a[i]){let s=M(void 0,n),c=0,l=new Map(r),d=0,u=[],h=[],S=null,R=new Map,w=new Map,I=(C,...v)=>{if(lp(C)||C==null){let N=v[0];return I.switch(()=>C,N)}else if(typeof C=="function"){let N=v[0],J=v[1];return I._getHtmlWireResultWithOptimizations(`_c${++c}`,C,N,J)}S&&!Object.is(C,S)&&y.warn("Template literal was changed"),S=C;let T=s(C,...v);return T.__clearCache=()=>{s=M(void 0,n)},I._finishRender(),o&&(o.current=T),T};I.contextMap=r,I.switch=(C,v)=>{u[d]||(u[d]=new Map);let T=u[d],N=h[d],J=C();if(!J)return++d,null;let[we,Je,$e]=J();if(!T.get(we)){let se=T.has(we)?[...T.keys()].indexOf(we):T.size;T.set(we,yc(we,I._createChild(`_u${d}_${se}`,n),l,v,$e))}return++d,N&&N.delete(we),m(T.get(we))(Je)},I.renderAll=(C,v)=>{let T=[],N=new Set;return C.forEach((J,we)=>{let Je=v(J,we);if(Je){let{id:$e,binding:Pt}=Je,se=$e;for(;N.has($e);)$e=`${$e}_copy`;N.add($e),se!=$e&&y.error(`duplicated child id: ${se}`);let[jr,Lo,$o]=Pt();$e||(y.error("unexpected error: empty id in render all"),$e=`_c${++c}`),T.push(I._getHtmlWireResultWithOptimizations($e,jr,Lo,$o))}}),T},I.toSvgMode=()=>{let C=I._createChild(`_c${++c}`,"svg");return I._finishRender(),C},I.setRenderTypeForChildren=C=>{n=C},I._createChild=(C,v)=>qt(e,(t||"")+C,l,void 0,v),I._getHtmlWireResultWithOptimizations=(C,v,T,N)=>{let J=I._createChild(C,n);if(R.has(J))w.delete(J);else{let Je=yc(v,J,l,N);R.set(J,Je)}return m(R.get(J))(T)},I._finishRender=()=>{if(w.size)for(let C of w.keys()){let v=R.get(C);v?(v.clean(),R.delete(C)):y.warn("clean child error")}for(let C=0;C<h.length;++C){let v=h[C];for(let T of v.keys()){let N=v.get(T);N?(N.clean(),u[C].set(T,null)):N!==null&&y.warn("clean child error")}}w=new Map(R),h=u.map(C=>new Map(C)),c=0,d=0},I.renderIf=function(C,v,T){let N=v();return N?I(C,N,T):(++c,null)},I.setContext=(C,v)=>(Fi(l,C,v),I),I.clean=function(){I.clean=()=>console.log("clean already complete"),a[i]=null;for(let C of R.values())C.clean();for(let C of u)for(let v of C.values())v&&v.clean();R.clear(),w.clear()},a[i]=I}return a[i]}function Rt(e,t,r){let[o,n,i]=t(),a=o(e,n);return a instanceof Element&&gc(a,i),r&&(r.current=a),a}function gc(e,t){if(!t)return;let r=String(t);if(r.includes(" ")){y.error(`multiple classNames not allowed: ${r}`);return}ip(e,r)}function yc(e,t,r=new Map,o="",n=""){let i,a=null,s=typeof o=="string"||o.___css?{className:String(o)}:o,c=!1;function l(){if(c)return;Cp(l,m(r));let u=e(t,i),h=kp(u);return a&&h?a!=u&&window.console.error(`[${e.name}] dom element was changed`):a=u,a instanceof Element&&(gc(a,s.className),gc(a,n)),s.ref&&(s.ref.current=a),u}function d(u){return!up(m(r))&&s0(i,u)&&a?a:(i=u,m(l()))}return d.clean=function(){c=!0,Sp(l),t.clean()},d}function c0(e,t,r=qt(t),o=new Map){let n=Ki.has(r);n||Ki.set(r,yc(e,r,o));let i=Ki.get(r),a=i(t);if(!n){let s=sp(a,{remove:()=>{document.body.contains(a)||(i.clean(),s(),Ki.delete(r))}})}return Oe(Pi),a}function Ce(e){return(r,o)=>{let n=o&&o.contextMap;return c0(e,r,o,n)}}function vp(e,t,r=t){let o=Ce(e),n=qt(r),i=!0;return a=>{if(i){let s=o(a,n);t(s),i=!1}else Li(()=>{o(a,n)})}}function bp(e,t,r,o){!t||r&&o&&e.appendChild(Ce(op)({subscriptionProduct:r,watermarkUrl:o}))}function Tp(e,t){let r;function o(){r&&(clearTimeout(r.id),r=void 0)}function n(){if(r){let s=r.handler;o(),s()}}function i(...s){o();let c=()=>{o(),e(...s)};r={id:setTimeout(c,t),handler:c}}function a(...s){o(),e(...s)}return{isPending:()=>De(r),cancel:o,flush:n,call:i,forceCall:a}}var Hr={FULL:1180,MEDIUM:739};function Ni(){return window.innerWidth>Hr.FULL}function fr(){return window.innerWidth<=Hr.FULL&&window.innerWidth>Hr.MEDIUM}function ct(){return window.innerWidth<=Hr.MEDIUM}function Dp(e){let t=e.length;if(!t)return 0;let r=0;for(;--t%4>1&&e.charAt(t)==="=";)++r;return Math.ceil(e.length*3)/4-r}var fo=new Array(64),Ep=new Array(123);for(let e=0;e<64;)Ep[fo[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;function Rp(e,t=0,r=e.length){var o=null,n=[];let i=0,a=0,s;for(;t<r;){let c=e[t++];switch(a){case 0:n[i++]=fo[c>>2],s=(c&3)<<4,a=1;break;case 1:n[i++]=fo[s|c>>4],s=(c&15)<<2,a=2;break;case 2:n[i++]=fo[s|c>>6],n[i++]=fo[c&63],a=0;break}i>8191&&((o||(o=[])).push(String.fromCharCode(...n)),i=0)}return a&&(n[i++]=fo[s],n[i++]=61,a===1&&(n[i++]=61)),o?(i&&o.push(String.fromCharCode(...n.slice(0,i))),o.join("")):String.fromCharCode(...n.slice(0,i))}var wp="invalid encoding";function Ip(e,t,r=0){let o=r,n=0,i;for(let a=0;a<e.length;){let s=e.charCodeAt(a++);if(s===61&&n>1)break;if((s=Ep[s])===void 0)throw Error(wp);switch(n){case 0:i=s,n=1;break;case 1:t[r++]=i<<2|(s&48)>>4,i=s,n=2;break;case 2:t[r++]=(i&15)<<4|(s&60)>>2,i=s,n=3;break;case 3:t[r++]=(i&3)<<6|s,n=0;break}}if(n===1)throw Error(wp);return r-o}function Mp(e,t,r){let{Type:o}=r,n=o.verify(t);if(n)throw new Error(n);let i=o.fromObject(t),a=o.encode(i).finish(),s=new Uint8Array(new Uint32Array([e]).buffer),c=new Uint8Array([...s,...a]);return Rp(c)}function Ap(e,t){let r=new Uint8Array(Dp(e));Ip(e,r);let o=new Uint32Array(r.buffer.slice(0,Uint32Array.BYTES_PER_ELEMENT))[0],n=new Uint8Array(r.buffer.slice(Uint32Array.BYTES_PER_ELEMENT)),{Type:i}=t(o),a=i.decode(n);return i.toObject(a)}function Vi(e){return e.type==="mc"||e.type==="mr"?e:null}function Hi(e){return e.type==="ti"?e:null}var Fp={create(e){return{choice:e,selected:!1}}};function l0(e){for(let t=0;t<e.length;++t){let r=Math.floor(Math.random()*t),o=e[t];e[t]=e[r],e[r]=o}}function d0(e,t){let r=e.map(o=>Fp.create(o));return t&&l0(r),r}var Pp={create(e,t){return{choicesState:d0(e.choices,t)}}};var Op={create(e){return{typeIn:e,answer:""}}};function m0(e,t){let r=Vi(e);if(r)return Pp.create(r.content,t);let o=Hi(e);if(o)return Op.create(o.content);throw new Error(`Unknown question type: ${e.type}`)}var Wi={create(e,t){return{question:e,answered:!1,contentState:m0(e,t)}}};function u0(e,t){return e.map(r=>Wi.create(r,t))}var Ge={create(e){let t=u0(e.questions,e.settings.shuffleAnswers),r=t.length>0?0:-1;return{key:e.key,type:p.EXERCISE,exercise:e,questionsState:t,selectedQuestionIndex:r}},toExerciseState(e){return e.type!=p.EXERCISE?null:e},previousQuestionAvailable(e){return e.selectedQuestionIndex>0},nextQuestionAvailable(e){return e.selectedQuestionIndex<e.questionsState.length-1},selectedQuestionState(e){let t=e.selectedQuestionIndex;return t>=0?e.questionsState[t]:null}};function p0(e){let t=[];for(let r of e){let o=Ct.toExerciseBlock(r);o&&t.push(Ge.create(o))}return t}var Ui={create(e=[]){return{blockMap:G.createBlocks(e),progress:0,blocksState:p0(e)}}};var zi={create(e={}){return{title:e.title||"",subtitle:e.subtitle||""}}};var Lp={create(e){return{key:e.key||"",header:e.header||zi.create(),contentState:e.contentState||Ui.create(),index:e.index||0,progress:e.progress||0,continueButtonKey:""}}};var $p={create(e={}){return{title:e.title||"",kicker:e.kicker||"",coverInfo:e.coverInfo||null}}};var Kp={create(e){return{key:e.key,header:e.header,contentState:e.contentState,index:-1,progress:e.progress||0,continueButtonKey:""}}};function f0(e,t){return(Math.floor(e.progress)+t.reduce((o,n)=>o+Math.floor(n.progress),0))/(t.length+1)}function h0(e,t){let r=t+1;return e[r]||null}var fe={sections(e){return[e.intro,...e.chapters]},nextSection(e){return h0(e.chapters,e.selectedSectionIndex)},progress(e){return f0(e.intro,e.chapters)},selectedSection(e){let t=e.selectedSectionIndex;return t==-1?e.intro:e.chapters[t]},getContinueButtons(e){let t=this.selectedSection(e),r=[];return sr.forEach(t.contentState.blockMap,o=>{let n=ye.toContinueBlock(o);n&&r.push(n)}),r},getLastContinueButtonKey(e){let t=this.getContinueButtons(e);return t.length?t[t.length-1].key:null},create(e,t){return{intro:e,chapters:t,selectedSectionIndex:-1,navigationPanelShowed:!1}}};function Np(e){let t=[];for(let r of e.blockMap.order)t.push(e.blockMap.blocks[r]);return Ui.create(t)}function g0(e){let t={kicker:e.header.kicker,title:e.header.title,coverInfo:e.header.coverInfoState};return e.header.coverInfoState&&(t.coverInfo={src:e.header.coverInfoState.src,width:e.header.coverInfoState.width,height:e.header.coverInfoState.height,color:e.header.coverInfoState.color,opacity:e.header.coverInfoState.opacity}),Kp.create({key:"intro",header:$p.create(t),contentState:Np(e.contentState),progress:0})}function y0(e,t){return Lp.create({key:e.key,index:t,header:zi.create({title:e.header.title,subtitle:e.header.subtitle}),contentState:Np(e.contentState)})}function Vp(e){let t=g0(e.intro),r=e.chapters.order.map((o,n)=>y0(e.chapters.blocks[o],n));return fe.create(t,r)}function It(e){return Vi(e.question)?e:null}function lt(e){return Hi(e.question)?e:null}var{Int:_0,Bool:Gi,String:ho}=ze,Hp=b({key:ho(1),selected:Gi(2)}),C0=b({choicesState:K(1,Hp)}),k0=b({choicesState:K(1,Hp)}),S0=b({answer:ho(1)}),x0=b({key:ho(1),answered:Gi(2),contentState:D(3,C0)}),B0=b({key:ho(1),answered:Gi(2),contentState:D(3,k0)}),v0=b({key:ho(1),answered:Gi(2),contentState:D(3,S0)}),b0=Ze({mc:x0,mr:B0,ti:v0}),Wp=b({key:ho(1),selectedQuestionIndex:_0(2),questionsState:K(3,b0)});var{Float:Up,Int:T0,String:zp}=ze;var Gp=Ze({[p.EXERCISE]:Wp}),w0=b({intro:D(1,{progress:z(1,Up),blocksState:K(2,Gp),continueButtonKey:z(3,zp)}),chapters:K(2,{progress:z(1,Up),blocksState:K(2,Gp),continueButtonKey:z(3,zp)}),selectedChapter:z(3,T0)}),qi=new nr(w0);function qp(e,t){let r=t.questionsState;if(!r)return;let o=e.questionsState;for(let i=0;i<o.length;++i){let a=o[i],s=r[i];a.answered=s.answered,D0(a,s.contentState)}let n=t.selectedQuestionIndex;typeof n=="number"&&(e.selectedQuestionIndex=n)}function D0(e,t){let r=It(e);if(r){E0(r.contentState,t);return}let o=lt(e);if(o){R0(o.contentState,t);return}throw new Error(`Unknown question type: ${e.question.type}`)}function E0(e,t){if(!t.choicesState)return;let r=e.choicesState,o=new Map;for(let i of r)o.set(i.choice.key,i);let n=[];for(let i of t.choicesState){let a=o.get(i.key);a.selected=i.selected,n.push(a)}e.choicesState=n}function R0(e,t){e.answer=t.answer}function Yp(e,t){let{intro:r,chapters:o,selectedChapter:n}=t;if(r){let{progress:i,blocksState:a,continueButtonKey:s}=r;typeof i=="number"&&(e.intro.progress=i),s&&(e.intro.continueButtonKey=s),a&&Qp(e.intro.contentState.blocksState,a)}o&&e.chapters.forEach((i,a)=>{let s=m(o)[a],{progress:c,blocksState:l,continueButtonKey:d}=s;c&&(i.progress=c),d&&(i.continueButtonKey=d),l&&Qp(i.contentState.blocksState,l)}),typeof n=="number"&&n>=0&&(e.selectedSectionIndex=n)}function Qp(e,t){for(let r of t){let o=e.find(i=>r.key==i.key);if(!o)continue;let n=Ge.toExerciseState(o);if(n){qp(n,r);continue}throw new Error(`Unexpected block state type: ${o.type}`)}}function Xp(e,t){let r=Vp(e.content);if(t)try{let o=Ap(t,()=>qi);Yp(r,o)}catch(o){y.warn(o)}return r}function Zp(e){let t=e.questionsState,r=e.selectedQuestionIndex;return{key:e.key,type:e.type,selectedQuestionIndex:r,questionsState:I0(t)}}function I0(e){return e.map(t=>M0(t))}function M0(e){let t=e.question,r=t.type;return{key:t.key,type:r,answered:e.answered,contentState:A0(e)}}function A0(e){let t=It(e);if(t)return F0(t.contentState);let r=lt(e);if(r)return O0(r.contentState);throw new Error(`Unknown question type: ${e.question.type}`)}function F0(e){return{choicesState:e.choicesState.map(t=>P0(t))}}function P0(e){return{key:e.choice.key,selected:e.selected}}function O0(e){return{answer:e.answer}}function jp(e){return e.map(t=>{let r=Ge.toExerciseState(t);if(r)return Zp(r);throw new Error(`Unexpected block state type: ${t.type}`)})}function Jp(e){return{intro:{progress:e.intro.progress,blocksState:jp(e.intro.contentState.blocksState),continueButtonKey:e.intro.continueButtonKey},chapters:e.chapters.map(t=>({progress:t.progress,blocksState:jp(t.contentState.blocksState),continueButtonKey:t.continueButtonKey})),selectedChapter:e.selectedSectionIndex}}var Qi=class{constructor(t){this.navigationType=t.main.navigationType,this.longreadType=t.main.longreadType,this.searchEnabled=!1,this.numberingEnabled=t.main.numberingEnabled,this.nextButtonEnabled=t.main.nextButtonEnabled,this.copyingEnabled=t.main.copyingEnabled,this.fonts={tooltip:Vo(ce.LATO),playerMain:Vo(t.design.headerFont),content:Vo(t.design.contentFont)}}};function Qt({reducer:e,timingFn:t,duration:r,abortSignal:o,beforeAnimation:n,afterAnimation:i}){let a=Date.now(),s=!1,c=new Ae;function l(){if(s)return;let u=Lt(Date.now()-a,0,r),h=t(u/r);e.animate(h),u<r?Oe(l):(i&&i(),o&&o.remove(d),c.dispatch(!0),Oe(()=>{e.complete()}))}n&&n(),Oe(l);function d(){s=!0,m(o).remove(d),c.dispatch(!1)}return o&&o.add(d),c}function ef(e){return e}function hr(e){return--e*e*e+1}function _c(e,t){return r=>r<t?0:e((r-t)/(1-t))}function Yi(e){return t=>1-e(t)}function L0({setScrollValue:e,initialValue:t,delta:r,duration:o}){if(!r)return;Qt({duration:o,timingFn:hr,reducer:{animate:i=>{e(t+r*i)},complete:()=>{},changedProperties:[]}})}function Cc({element:e,container:t,duration:r,scrollDirection:o,bounds:n}){let i=e.getBoundingClientRect(),a=0;o==="top"&&n.top>i.top?a=i.top-n.top:o==="bottom"&&n.bottom<i.bottom&&(a=i.bottom-n.bottom),L0({initialValue:t.scrollTop,setScrollValue:s=>{t.scrollTop=s},delta:a,duration:r})}function Wr(e,t){let r=window.getComputedStyle(e),o=r&&r.opacity?parseFloat(r.opacity):1;return{animate:n=>{e.style.opacity=`${o-o*n}`},complete:()=>{e.style.opacity=t||""},changedProperties:["opacity"]}}function Xi(e){return{animate:t=>{e.forEach(r=>r.animate(t))},complete:()=>{e.forEach(t=>t.complete())},changedProperties:[]}}function $0({element:e,initialTransform:t,from:r,to:o}){let{x:n,y:i}=Ln(e),a=r.x||n,s=r.y||i,c=0,l=0;o.x!==void 0&&(c=o.x-a),o.y!==void 0&&(l=o.y-s);let d=null;return{animate:u=>{d==null&&(d=On(e)),e.style.transform=`${d} translate(${c*u}px, ${l*u}px)`},complete:()=>{e.style.transform=t||""},changedProperties:["transform"]}}function tf({element:e,initialTransform:t,from:r,to:o}){return $0({element:e,initialTransform:t,from:{y:r},to:{y:o}})}var K0=50;function Zi(e,t){return{animate:r=>{e.style.transform=`translateY(${K0*r}px)`},complete:()=>{e.style.transform=""},changedProperties:["transform"]}}var kc="id";var rf="comp";function he(e){if(!!e)return typeof e=="string"&&(e={[kc]:e}),Object.entries(e).filter(([t,r])=>wr(r)).map(([t,r])=>`${t}=${r}`).join(";")}function of(e){let[t,r]=Z(()=>({width:0,height:0}));return H(()=>{let o=m(e.current),n=new ResizeObserver(([i])=>{r(i.contentRect)});return n.observe(o),()=>{n.disconnect()}},[e]),[t.width,t.height]}var N0=[];function ji(e,t=N0){let[r,o]=Z(!1),[n,i]=Z(!1),[a,s]=of(e);return H(()=>{let c=e.current.scrollWidth>e.current.clientWidth;c!=r&&o(c);let l=e.current.scrollHeight>e.current.clientHeight;l!=n&&i(l),$i(a,s,...t)},[e,r,n,a,s,t]),[r,n]}function nf(e,t){let[r]=ji(e,t);return r}function de(){return F()}function af(){return F()}function sf(e){return{x:e.left,y:e.top}}function cf(e){return{x:e.width,y:e.height}}function lf(e,t){return{x:e.x/t.x,y:e.y/t.y}}function df(e,t){return{x:e.x+t.x,y:e.y+t.y}}function mf(e){return{x:e,y:e}}function uf(e){return{width:e.offsetWidth,height:e.offsetHeight}}function pf(e){return{width:e.right-e.left,height:e.bottom-e.top}}function ff(e){let t=sf(e),r=pf(e),o=cf(r);return df(t,lf(o,mf(2)))}function rn({elementSize:e={width:0,height:0},popoverSize:t,side:r,align:o,offsetX:n=0,offsetY:i=0}){let a={x:0,y:0};switch(r){case"top":a.y=-t.height-i;break;case"bottom":a.y=e.height+i;break;case"left":a.x=-t.width-n;break;case"right":a.x=e.width+n;break;default:L(r)}switch(o){case"start":switch(r){case"top":case"bottom":a.x=n;break;case"right":case"left":a.y=i;break;default:L(r)}break;case"center":switch(r){case"top":case"bottom":a.x=(e.width-t.width)/2;break;case"right":case"left":a.y=(e.height-t.height)/2;break;default:L(r)}break;case"end":switch(r){case"top":case"bottom":a.x=e.width-t.width-n;break;case"right":case"left":a.y=e.height-t.height-i;break;default:L(r)}break;default:L(o)}return a}function Sc(e,t,r){let o=0;switch(e){case"top":o=r.top-t.top;break;case"right":o=t.right-r.right;break;case"bottom":o=t.bottom-r.bottom;break;case"left":o=r.left-t.left;break;default:L(e)}return Math.max(0,o)}function xc(e,t,r,o){let n=0;switch(t){case"start":switch(e){case"top":case"bottom":n=r.right-o.right;break;case"right":case"left":n=r.bottom-o.bottom;break;default:L(e)}break;case"center":switch(e){case"top":case"bottom":n=Math.max(r.right-o.right,o.left-r.left);break;case"right":case"left":n=Math.max(r.bottom-o.bottom,o.top-r.top);break;default:L(e)}break;case"end":switch(e){case"top":case"bottom":n=o.left-r.left;break;case"right":case"left":n=o.top-r.top;break;default:L(e)}break;default:L(t)}return Math.max(0,n)}function Bc(e){switch(e){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right";default:throw L(e),new Error}}function vc(e){switch(e){case"start":return"end";case"center":throw new Error;case"end":return"start";default:throw L(e),new Error}}function hf(e,t,r){switch(e){case"top":case"bottom":if(t.right>=r.right)return"end";if(t.left<=r.left)return"start";break;case"right":case"left":if(t.bottom>r.bottom)return"end";if(t.top<r.top)return"start";break;default:L(e)}return"center"}function gf(e,t){switch(e){case"right":case"left":return{side:Bc(e),align:t};case"top":case"bottom":return{side:e,align:t==="center"?t:vc(t)};default:throw L(e),new Error}}var Se=(e,t,r)=>{let o=F(r);o.current=r;let n=r===null;H(()=>{if(n)return;let i=pt(e.current,t,a=>m(o.current)(a));return()=>Bt(i)},[e,t,n])};function go(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.707 5.707a1 1 0 0 0-1.414-1.414L10 8.586 5.707 4.293a1 1 0 0 0-1.414 1.414L8.586 10l-4.293 4.293a1 1 0 1 0 1.414 1.414L10 11.414l4.293 4.293a1 1 0 0 0 1.414-1.414L11.414 10l4.293-4.293z" fill="currentColor"/></svg>
`}function yf(e,t){_e(()=>{for(let r in t)t.hasOwnProperty(r)&&e.current.setAttributeNS(null,r,t[r].toString())},[e,...Object.keys(t),...Object.keys(t).map(r=>t[r])])}function Le(e){let t=F();return t.current=e,t}var V0={pointer:{withMods:e=>__getCssClass("x0bad2__pointer",e)}},Ji=22;function H0({targetRect:e,hintRect:t}){if(t.left>=e.right)return"right";if(t.right<=e.left)return"left";if(t.top>=e.bottom)return"bottom";if(t.bottom<=e.top)return"top";throw new Error("Never")}function W0({hintSide:e,hintRect:t,targetRect:r}){let o=ff(r);switch(e){case"left":case"right":return o.y-t.top-Ji/2;case"top":case"bottom":return o.x-t.left-Ji/2;default:throw L(e),new Error}}function U0({hintSide:e,shift:t}){let r={left:"",right:"",top:"",bottom:""},o=V(e,{left:"top",right:"top",top:"left",bottom:"left"});return{...r,[e]:"calc(100% - 2px)",[o]:`${t}px`}}function z0(e){return V(e,{left:"translateX(-6px) translateY(6px) rotate(90deg)",right:"translateX(6px) translateY(6px) rotate(-90deg)",top:"scaleY(-1)",bottom:""})}function _f(e,{color:t,getHintRect:r,getTargetRect:o}){let n=F(),i=Le(r),a=Le(o);return yf(n,{width:Ji,height:10,viewBox:`0 0 ${Ji} 10`}),H(()=>{let s=i.current(),c=a.current(),l=H0({hintRect:s,targetRect:c}),d=W0({hintSide:l,hintRect:s,targetRect:c}),u=U0({hintSide:l,shift:d});n.current.style.left=u.left,n.current.style.right=u.right,n.current.style.top=u.top,n.current.style.bottom=u.bottom,n.current.style.transform=z0(l)},[i,a,n]),e`
<svg
	xmlns="http://www.w3.org/2000/svg"
	save-ref=${n}
	class=${V0.pointer.withMods({color:t})}
>
	<path
		fill-rule="evenodd"
		clip-rule="evenodd"
		d="M10 0C13 0 15.9999 8 20 8H0C3.9749 8 7 0 10 0Z"
	/>
	<rect x="0" y="8" width="20" height="2"></rect>
</svg>
`}var ea={tooltip:{withMods:e=>__getCssClass("x17c2d__tooltip",e)},content:"x17c2d__content",closeButton:"x17c2d__close-button",text:"x17c2d__text"};function Cf(e,t){let r=de(),{onClose:o=null,getPointerTargetRect:n,size:i="small",type:a="default",autotestData:s}=t,c=de();Se(c,"mousedown",d=>d.stopPropagation());let l=t.contentType==="text"?f(q0,t.text):t.content;return Se(r,"mousedown",o),e`
<div class=${ea.tooltip.withMods({type:a,text:t.contentType==="text",size:i})}
	save-ref=${c}
	data-at=${he(s)}
>
	${e.renderIf(_f,()=>n&&{color:G0(a),getTargetRect:n,getHintRect:()=>c.current.getBoundingClientRect()})}
	${e(l,ea.content)}
	${e.renderIf(go,()=>!!o,{className:ea.closeButton,ref:r})}
</div>`}function G0(e){return V(e,{default:"dark",onboarding:"purple"})}function q0(e,t){return e`<div class=${ea.text}>${t}</div>`}function Q0(e,t,r,o){e.current!==void 0&&(clearTimeout(e.current),e.current=void 0),o<=0?t(r):e.current=setTimeout(()=>{e.current=void 0,t(r)},o)}function kf(e){let[t,r]=Z(typeof e=="function"?e:()=>e),o=F(void 0),n=j((i,a)=>Q0(o,s=>r(s),i,a),[]);return[t,n]}var Y0=!1;function Sf({propName:e,defaultValue:t,units:r,element:o,getCurrentValue:n}){let i=window.getComputedStyle(o),a=i&&i.getPropertyValue(e),s=a?parseFloat(a):t,c=o.style.getPropertyValue(e);return{animate:l=>{o.style.setProperty(e,`${n(l,s)}${r||""}`)},complete:()=>{o.style.setProperty(e,c)},changedProperties:[e]}}function X0(e,t){return Sf({propName:"opacity",defaultValue:1,element:e,getCurrentValue:t})}function Z0(e,t){return Sf({propName:"max-height",defaultValue:0,units:"px",element:e,getCurrentValue:t})}function j0(e,t,r){let o=e.style.transform,n=On(e);return{animate:i=>{let a=[n],s=r&&r(i);if(s!=null){let[l,d]=s;a.push(`translate(${l}px, ${d}px)`)}let c=t&&t(i);if(c!=null)if(typeof c=="number")a.push(`scale(${c})`);else{let[l,d]=c;l!=null&&a.push(`scaleX(${l})`),d!=null&&a.push(`scaleY(${d})`)}e.style.transform=a.join(" ")},complete:()=>{e.style.transform=o},changedProperties:["transform"]}}function J0({reducer:e,duration:t,abortSignal:r,before:o,after:n}){return new Promise(i=>{let a=Date.now(),s=!1,c=r?r.add(()=>{s=!0}):()=>{};function l(){let d=Lt(Date.now()-a,0,t),u=d/t;e.animate(u),s||d>=t?(c(),e.complete(),i(),n&&n()):requestAnimationFrame(l)}o&&o(),l()})}function xf({opacity:e,maxHeight:t,scale:r,translate:o,duration:n,before:i,after:a}){return Y0?{play:()=>Promise.resolve()}:{play:(s,c)=>J0({reducer:Xi([e?X0(s,e):null,t?Z0(s,t):null,r||o?j0(s,r,o):null].filter(wr)),duration:n,abortSignal:c,before:i&&(()=>m(i)(s)),after:a&&(()=>m(a)(s))})}}function Bf(e,t,r){let o=t-e;return n=>(r&&(n=r(n)),n>=1?t:e+o*n)}function vf(e,t,r){let o=t[0]-e[0],n=t[1]-e[1];return i=>(r&&(i=r(i)),i>=1?t:[e[0]+o*i,e[1]+n*i])}function bf(e,t){let r=e.getBoundingClientRect(),o=!1;function n(){if(o)return;let i=e.getBoundingClientRect();(Math.round(i.top)!=Math.round(r.top)||Math.round(i.left)!=Math.round(r.left)||i.width!=r.width||i.height!=r.height)&&(r=i,t()),requestAnimationFrame(n)}return requestAnimationFrame(n),()=>{o=!0}}function Tf({html:e,layer:t,createBinding:r,show:o,appearAnimation:n,hideAnimation:i}){let a=F(null),s=F(null),c=j(()=>{s.current&&(s.current.parentElement==t&&t.removeChild(s.current),s.current=null)},[t]),l=j(()=>{c();let h=a.current;h&&h.parentElement===t&&t.removeChild(h)},[c,t]);H(()=>l,[l]);let d=o?r():null,u=e(d);return _e(()=>{a.current!=u&&(u?(c(),u.style.position="absolute",y.assert(a.current==null),t.appendChild(u),n&&n(u)):a.current&&(s.current=a.current,i?i(a.current).then(c):c()),a.current=u)}),a}function wf({getPopoverRect:e,side:t,align:r,rootElementRect:o,args:n,offset:i}){let a=e(i),s=Sc(t,a,o);if(s){let l=Bc(t),d=rn({...n,side:l}),u=e(d);Sc(l,u,o)<s&&(n.side=l,i=d)}let c=xc(n.side,r,a,o);if(c){let l=r=="center"?hf(n.side,a,o):vc(r),d=rn({...n,align:l}),u=e(d);xc(n.side,l,u,o)<c&&(n.align=l,i=d)}return i}function e1(e,t){let r=e?e.getBoundingClientRect():{top:0,right:document.body.scrollHeight-document.body.offsetHeight?document.body.offsetWidth:window.innerWidth,bottom:document.body.offsetHeight,left:0};return{top:r.top+t.y,right:r.right+t.x,bottom:r.bottom+t.y,left:r.left+t.x}}function Df({element:e,popover:t,isTopLayer:r,side:o,align:n,getOffset:i,autoInvert:a,rootElement:s}){let c=r?{x:window.pageXOffset,y:window.pageYOffset}:{x:0,y:0},l=e1(s,c),d=e.getBoundingClientRect(),u={width:d.width,height:d.height},h=uf(t);function S(v){let T=v.x+d.left+c.x,N=v.y+d.top+c.y;return{left:T,top:N,right:T+h.width,bottom:N+h.height}}let R=i&&i()||{x:0,y:0},w=Mn()?gf(o,n):{side:o,align:n},I={elementSize:u,popoverSize:h,side:w.side,align:w.align,offsetX:R.x,offsetY:R.y},C=rn(I);return a&&(C=wf({getPopoverRect:S,side:w.side,align:w.align,rootElementRect:l,args:I,offset:C})),r&&(C.x+=d.left+c.x,C.y+=d.top+c.y),C}var Ef=500;function t1({tooltipElement:e,elementRef:t,position:r,setVisible:o,ignoreIsElementWithinViewport:n}){if(e.style.left="0",e.style.top="0",e.style.transform=`translateX(${r.x}px) translateY(${r.y}px)`,!n&&!r1(e))return e.style.display="none",o(!1,0),Promise.resolve();let i=r.y>t.current.getBoundingClientRect().top?-5:5;return xf({opacity:Bf(0,1),translate:vf([0,i],[0,0]),duration:150}).play(e)}function Rf({html:e,elementRef:t,container:r,show:o=!0,stayOnHover:n=!1,side:i="top",align:a="center",offset:s={x:0,y:8},appearDelay:c=Ef,hideDelay:l=n?Ef:0,isPreventDefaultClick:d=!1,ignoreIsElementWithinViewport:u=!1}){let h=F(null),S=F(null),[R,w]=kf(!1);H(()=>{$i(o),o||w(!1,l)},[l,w,o]),Se(t,"mouseover",()=>w(!0,c)),Se(t,"mouseout",()=>w(!1,l)),Se(t,"click",C=>d&&C.preventDefault());let I=Tf({html:e,layer:Dr("tooltip"),createBinding:()=>r,show:o&&R,appearAnimation:C=>{function v(){return Df({element:t.current,popover:C,side:i,align:a,isTopLayer:!0,getOffset:()=>s,autoInvert:!0})}return h.current=bf(t.current,()=>w(!1,0)),t1({elementRef:t,tooltipElement:C,position:v(),setVisible:w,ignoreIsElementWithinViewport:!!u}).then(()=>{S.current=new ResizeObserver(()=>{let T=v();C.style.transform=`translateX(${T.x}px) translateY(${T.y}px)`}),S.current.observe(C)})},hideAnimation:()=>(h.current&&(h.current(),h.current=null),S.current&&(S.current.disconnect(),S.current=null),Promise.resolve())});return _e(()=>{let C=I.current;if(!n||!C)return;let v=()=>w(!0,0),T=()=>w(!1,l);return C.addEventListener("mouseover",v),C.addEventListener("mouseout",T),()=>{C.removeEventListener("mouseover",v),C.removeEventListener("mouseout",T)}}),{visible:R,setVisible:w}}function r1(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function If(e){Rf({...e,container:f(Cf,{contentType:"text",text:e.text,size:e.size,autotestData:e.autotestData})})}function Mt(e){If(e)}var o1={text:"x31b75__text"};function ta(e,{text:t,disableTooltip:r,autotestData:o}){let n=de(),i=nf(n,[typeof t=="string"?t:t.html]);return Mt({html:e,elementRef:n,text:t,show:!r&&i}),e`
<div
	class=${o1.text}
	save-ref=${n}
	data-at=${he(o)}
>
	${t}
</div>`}var bc="data-focus-visible-added",Tc="focus-visible";function Mf(e,{focused:t,onFocusedChange:r}){if(De(t)&&!De(r))throw new Error("useFocusProps: `focused` requires `onFocusedChange`");H(()=>{if(!De(t))return;let o=e.current,n=o===document.activeElement;t&&!n?(o.focus(),o.setAttribute(bc,""),o.classList.add(Tc)):!t&&n&&(o.blur(),o.removeAttribute(bc),o.classList.remove(Tc))},[t,e]),Se(e,"focus",()=>{r&&r(!0)}),Se(e,"blur",()=>{r&&r(!1)})}var n1={preloader:{withMods:e=>__getCssClass("x12792__preloader",e)},spin:"x12792__spin"};function ra(e,{size:t="medium",color:r="accent"}){return e`
<svg
	class=${n1.preloader.withMods({size:t,color:r})}
	viewBox="0 0 32 32"
	xmlns="http://www.w3.org/2000/svg"
>
	<path
		d="M30 16C30 23.732 23.732 30 16 30C8.26801 30 2 23.732 2 16C2 8.26801 8.26801 2 16 2"
		stroke="currentColor"
		stroke-width="2.5"
		stroke-linecap="round"
		fill="none"
	/>
</svg>
`}var on={button:{withMods:e=>__getCssClass("xcc0a8__button",e)},icon:"xcc0a8__icon",text:"xcc0a8__text",preloader:"xcc0a8__preloader"},i1={button:{withMods:e=>__getCssClass("xeba1a__button",e)},icon:"xeba1a__icon",text:"xeba1a__text",preloader:"xeba1a__preloader"},a1={button:{withMods:e=>__getCssClass("x3e989__button",e)},icon:"x3e989__icon",text:"x3e989__text",preloader:"x3e989__preloader"},s1={button:{withMods:e=>__getCssClass("x1ebbb__button",e)},text:"x1ebbb__text",icon:"x1ebbb__icon",preloader:"x1ebbb__preloader"},c1={button:{withMods:e=>__getCssClass("xb6cd3__button",e)},icon:"xb6cd3__icon",text:"xb6cd3__text",preloader:"xb6cd3__preloader"},l1={button:{withMods:e=>__getCssClass("xa084d__button",e)},icon:"xa084d__icon",text:"xa084d__text",preloader:"xa084d__preloader"},d1={button:{withMods:e=>__getCssClass("x133d5__button",e)},text:"x133d5__text",icon:"x133d5__icon",preloader:"x133d5__preloader"},m1={button:{withMods:e=>__getCssClass("x959fd__button",e)},text:"x959fd__text",icon:"x959fd__icon",preloader:"x959fd__preloader"},u1={button:{withMods:e=>__getCssClass("x9131e__button",e)},text:"x9131e__text",icon:"x9131e__icon",preloader:"x9131e__preloader"},p1={button:{withMods:e=>__getCssClass("x08261__button",e)},text:"x08261__text",icon:"x08261__icon",preloader:"x08261__preloader"},f1={button:{withMods:e=>__getCssClass("xc515f__button",e)},text:"xc515f__text",icon:"xc515f__icon",preloader:"xc515f__preloader"},h1={button:{withMods:e=>__getCssClass("xea2c3__button",e)},text:"xea2c3__text",icon:"xea2c3__icon",preloader:"xea2c3__preloader"},g1={button:{withMods:e=>__getCssClass("x2278a__button",e)},text:"x2278a__text",icon:"x2278a__icon",preloader:"x2278a__preloader"};function Qe(e,t){let r=de(),{size:o="medium",state:n="default",minWidth:i=!0,autotestData:a,tooltip:s,cursor:c="pointer"}=t,{iconLeft:l,text:d,iconRight:u}=k1(t),h=C1(t),S=n=="loading",R=S||n=="disabled";function w(v){!R&&!v.defaultPrevented&&(v.preventDefault(),t.onClick&&t.onClick())}let I=V(t.style,{primary:i1,secondary:a1,destructive:c1,warning:l1,ghost:d1,ghostInversed:m1,link:u1,linkInversed:p1,linkSecondary:f1,linkSecondaryAlpha:h1,complementary:g1,secondaryInversed:s1}),C=ke(on.button.withMods({size:o,spacing:t.structure=="icon"&&h=="default"?"icon":h,"min-width":t.structure!="icon"&&i,loading:S,bold:x1(t.style),cursor:c}),I.button.withMods({pressed:n=="pressed"}));return Mt({html:e,elementRef:r,show:!!s,text:typeof s=="string"?s:typeof s=="object"?s.text:"",size:typeof s=="object"?s.size:void 0,side:typeof s=="object"?s.side:void 0,align:typeof s=="object"?s.align:void 0,offset:typeof s=="object"?s.offset:void 0}),Mf(r,t),e`
<button
	class=${C}
	disabled=${R}
	onclick=${w}
	save-ref=${r}
	data-at=${he(a)}
>
	${e.renderIf(Af,()=>!!l&&{className:ke(on.icon,I.icon),tooltip:s,icon:l})}
	${e.renderIf(y1,()=>!!d&&{className:ke(on.text,I.text),text:d,disableTooltip:!!s})}
	${e.renderIf(Af,()=>!!u&&{className:ke(on.icon,I.icon),icon:u})}
	${e.renderIf(_1,()=>S&&{className:ke(on.preloader,I.preloader),color:S1(t.style)})}
</button>
`}function Af(e,{className:t,icon:r}){return e`
<div class=${t}>
	${e(r)}
</div>
`}function y1(e,{className:t,text:r,disableTooltip:o}){return e`
<div class=${t}>
	${e(ta,{text:r,disableTooltip:o})}
</div>
`}function _1(e,{className:t,color:r}){return e`
<div class=${t}>
	${e(ra,{size:"small",color:r})}
</div>
`}function C1(e){switch(e.style){case"link":case"linkInversed":case"linkSecondary":case"linkSecondaryAlpha":return e.spacing||"default";case"primary":case"secondary":case"secondaryInversed":case"destructive":case"warning":case"ghost":case"ghostInversed":case"complementary":return"default";default:throw L(e),new Error}}function k1(e){switch(e.structure){case"icon":return{iconLeft:e.icon,text:null,iconRight:null};case"text":return{iconLeft:null,text:e.text,iconRight:null};case"iconAndText":return{iconLeft:e.icon,text:e.text,iconRight:null};case"textAndIcon":return{iconLeft:null,text:e.text,iconRight:e.icon};case"iconAndTextAndIcon":return e;default:throw L(e),new Error}}function S1(e){return V(e,{primary:"onColor",secondary:"subdued",destructive:"onColor",warning:"onColor",ghost:"subdued",ghostInversed:"onColor",link:"subdued",linkInversed:"onColor",linkSecondary:"subdued",linkSecondaryAlpha:"subdued",complementary:"subdued",secondaryInversed:"onColor"})}function x1(e){return V(e,{primary:!0,secondary:!0,destructive:!0,warning:!0,ghost:!0,ghostInversed:!0,link:!1,linkInversed:!1,linkSecondary:!1,linkSecondaryAlpha:!1,complementary:!0,secondaryInversed:!0})}var xe=class{constructor(t,r=null){this._block=t,this._element=r}className(){return this._element?`${this._block}__${this._element}`:this._block}getModifierClassName(t){return`${this.className()}_${t}`}getModifierWithValueClassName(t,r){return`${this.getModifierClassName(t)}_${r}`}createChildElementBemInfo(t){return m(!this._element),new xe(this._block,t)}};function X(e,t={}){let r=e.map(n=>n instanceof xe?n:new xe(n)),o=r.map(n=>n.className());for(let n of Object.keys(t)){let i=t[n];for(let a of r)i==null?o.push(a.getModifierClassName(n)):o.push(a.getModifierWithValueClassName(n,i))}return o.join(" ")}!1&&(window.top.__HYPER_HTML_MODE__="development");var wc="_ismeta";function Dc(e){let t=window.top.__ON_UPDATE_ELEMENT__;t&&t(e)}function Ec(){let e=window.top.__UPDATE_ELEMENTS__;e&&e()}function oa(e,t){!1&&!e[wc]&&(e[wc]={...e[wc],...t})}function Rc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var B1=[U.CLICK],_o=new Map,Ic=new Map,yo=!1,Pf=!1,v1=()=>null;function Of(){b1(),Oe(Of)}Oe(Of);function b1(){if(_o.size&&!Pf){yo=!0;for(let e of _o.keys())e._redraw();yo=!1,_o.clear()}}function T1(e){_o.set(e,!0)}function Ff(e){_o.delete(e)}function w1(e){return _o.has(e)}var E=class extends Ye{constructor({bemInfo:t,blockName:r,block:o=r,relatedData:n,direction:i="ltr"}){super(),this._bemInfoArray=[],(t||o)&&this._addBemInfo(m(t||o)),this._childElements=null,this._childElementsRef=null,this._relatedData=n||this,this._modifiers={},this._browserEventSignals=null,this._domElement=null,this._onDidRedraw=null,this._onDomElementReCreatedCallback=null,this._childContext=new Map,this._direction=i}setDirection(t){this._direction=t}_setContext(t,r){Fi(this._childContext,t,r)}static renderInProgress(){return yo}static suspend(t){Pf=t}domElement(){if(w1(this)){let t=yo;yo=!0,this._redraw(),yo=t}return this._domElement?this._domElement:(this._redraw(),this.domElement())}onDidRedraw(){return this._onDidRedraw||(this._onDidRedraw=this._createSignal()),this._onDidRedraw}updateModifier(t,r){r?typeof r=="string"?this._modifiers[t]=r:r&&(this._modifiers[t]=null):delete this._modifiers[t],this._sheduleRender()}hasModifier(t){return Object.keys(this._modifiers).includes(t)}handleEvent(t){if(t.defaultPrevented&&B1.includes(t.type))return;let r=this._getBrowserEventSignalIfExists(t.type);r&&r.dispatch(t)}createChildBemInfo(t){return m(this._bemInfoArray[0]).createChildElementBemInfo(t)}addBemInfo(t,r){this._addBemInfo(t,r),this._sheduleRender()}setOnDomElementReCreatedCallback(t){this._onDomElementReCreatedCallback=t}clearCache(){this._relatedData={},this._sheduleRender()}_sheduleRender(){T1(this)}_redraw(){Ff(this);let t=this._render();if(t!=this._domElement){let r=this._domElement;this._domElement=t,r&&(this._onDomElementReCreatedCallback?this._onDomElementReCreatedCallback():y.error(`[${this.constructor.name}] component element was changed`))}!1&&(t.component=this),this._onDidRedraw&&document.body.contains(this._domElement)&&this._onDidRedraw.dispatch()}_getBrowserEventSignalIfExists(t){return this._browserEventSignals&&this._browserEventSignals[t]||null}_getBrowserEventSignal(t){return this._browserEventSignals||(this._browserEventSignals={}),this._browserEventSignals[t]||(this._browserEventSignals[t]=this._createSignal(),this._sheduleRender()),this._browserEventSignals[t]}_activeListenerExists(t){let r=this._getBrowserEventSignalIfExists(t);return!!r&&r.handlersCount()>0}_getHandler(t){return this._activeListenerExists(t)?this:null}_addBemInfo(t,r){t instanceof xe||(t=new xe(t,r)),this._bemInfoArray.push(t)}_getCssClasses(){return this._bemInfoArray?X(this._bemInfoArray,this._modifiers):""}_wasRendered(){return!!this._domElement}_html(t,...r){return this._generateElement("",t,...r)}_renderFunctionEx(t){return this._childElementsRef||(this._childElementsRef={}),this._childElementsRef[t]||(this._childElementsRef[t]={}),qt(this._relatedData,t,this._childContext,this._childElementsRef[t])}_childHtml(t){Ic.has(this)||Ic.set(this,{});let r=Ic.get(this);return r[t]||(r[t]=(o,...n)=>typeof o=="string"?this._childHtml(t+o):this._generateElement(t,o,...n),r[t].optional=(o,n)=>n?r[t](o):v1,!1&&(r[t].__hyperId=t)),r[t]}_getChildClass(t){return this.createChildBemInfo(t).className()}_getChildElement(t){if(this._childElementsRef&&this._childElementsRef[t])return m(this._childElementsRef[t].current);this.domElement();let r=this._childElements;return r&&r[t]||null}_generateElement(t,r,...o){let n=s=>s.map((c,l)=>{if(c instanceof xe)c=c.className();else if(c instanceof Ae)c=c.dispatch.bind(c);else if(typeof c=="function")c=c.bind(this);else{if(c==this)return c.handleEvent.bind(this);if(c&&c!=this&&typeof c.domElement=="function")return typeof c.setOnDomElementReCreatedCallback=="function"&&c.setOnDomElementReCreatedCallback(()=>this._redraw()),this._addDisposable(c),c.domElement();if(Array.isArray(c))return n(c)}if(r[l]&&r[l].endsWith("passive-events="))for(let d of Object.keys(c))typeof c[d]=="function"&&(c[d]=c[d].bind(this));return c});o=n(o);let i=t&&`:${t}`,a=M(this._relatedData,i)(r,...o);if(t){if(this._childElements=this._childElements||{},!1){let s=this._childElements[t];s?(m(s==a,`[${this.constructor.name}] component child('${t}') element was changed`),Dc(s)):(oa(a,{id:Rc(),renderer:`${this.constructor.name}: ${t}`}),Ec())}this._childElements[t]=a}else!1&&(this._domElement?Dc(this._domElement):(oa(a,{id:Rc(),renderer:this.constructor.name}),Ec()));return!1&&oa(a,{renderArgs:[r,...o]}),a}_render(){}_destruct(){Ff(this),super._destruct()}};var dt={NBSP:String.fromCharCode(160),ZERO_WIDTH_SPACE:String.fromCharCode(8203),ELLIPSIS:"\u2026",NDASH:"\u2013",GREATER_THAN_OR_EQUAL_TO:String.fromCharCode(8805),LESS_THAN:String.fromCharCode(60),LESS_THAN_OR_EQUAL_TO:String.fromCharCode(8804),PERCENT:String.fromCharCode(37),LTR_DIRECTION:"\u200E"};var Co=class{constructor(){this._ids={}}generate(t){return De(this._ids[t])?`${t}_${++this._ids[t]}`:(this._ids[t]=0,t)}};function Lf({styles:e,ignoreInlineStyles:t}){return t?W.create({url:e.url}):e}function $f({characters:e,ignoreInlineStyles:t=!1}){if(e.length==0)return[];let r=[{text:e[0].text,styles:Lf({styles:e[0].meta,ignoreInlineStyles:t})}];for(let o=1;o<e.length;++o){let n=e[o],i=Lf({styles:n.meta,ignoreInlineStyles:t}),a=r.length-1,s=r[a].styles;W.compare(i,s)?r[a].text+=n.text:r.push({text:n.text,styles:i})}return r}var Kf=["header","subheader"],Nf=["blockquote","pullquote"];function na(e){let t=ct();return e<=15?"1.72":e<=21||e<=23&&!t?"1.68":e<=31&&t?"1.48":e<=31&&!t?"1.52":"normal"}var mt=class{constructor({paragraph:t,bemInfo:r,blockBeforeType:o,blockAfterType:n,idPrefix:i=k.isList(t)?"list-item":"",placeholder:a="",prompt:s="",paragraphIndex:c,direction:l}){this._paragraph=t,this._direction=l,this.blockBeforeType=o||"",this.blockAfterType=n||"",this.paragraphIndex=c,this._isPrompt=!!s,this._className=this._getClassName(r),this.invertBold=Kf.includes(this.type()),this.invertItalic=Nf.includes(this.type()),this.renderId=i+t.key+t.viewType,this.placeholder=s||a}_getClassName(t){let r=t||new xe("paragraph"),o=`${r.className()}`;if(o+=` ${r.getModifierWithValueClassName("type",this.type())}`,o+=` ${r.getModifierWithValueClassName("align",this.textAlign())}`,this._direction&&(o+=` ${r.getModifierWithValueClassName("dir",this._direction)}`),this._paragraph.characters.length==0){let n=this._isPrompt?"prompt":"empty";o+=` ${r.getModifierClassName(n)}`}return o}paragraph(){return this._paragraph}type(){return this._paragraph.viewType}textAlign(){return this._paragraph.textAlign}className(){return this._className}getLineHeightForFontSize(t){return na(t)}getFontSize(t){if(t==="auto")throw Error("cannot set 'auto' font-size in default paragraph");return t}};var ia={};function D1(e){return ia[e]||(ia[e]={}),ia[e]}function E1(e){delete ia[e]}function R1(e,t,r,o,n){if(!e)return null;let i=e.style,a={},s=new Set,c="",l=1;if(i.forEach(d=>{switch(d.name){case"bold":a["font-weight"]=r?"normal":"bold";break;case"italic":a["font-style"]=t?"normal":"italic";break;case"underline":s.add("underline");break;case"strikethrough":s.add("line-through");break;case"fontSize":{let u=o(d.size);a["font-size"]=`${u}px`;let h=n(u);a["line-height"]=`${h}`;break}case"fontColor":a.color=`${d.color}`;break;case"textHighlightColor":{c=d.color;break}case"textHighlightOpacity":l=d.opacity;break;case"alignment":break;default:L(d)}}),e.url&&s.add("underline"),s.size&&(a["text-decoration"]=[...s].join(" ")),c&&c!==We){let[d,u,h]=Y(c);a["background-color"]=`rgba(${d}, ${u}, ${h}, ${l})`}return a}function I1(e,t,r,o){return M(e,`:${t}`)`
		<sup style=${o}>${r}</sup>`}function M1(e,t,r,o){return M(e,`:${t}`)`
		<sub style=${o}>${r}</sub>`}function A1({rendererKey:e,id:t,text:r,textDecoration:o,alignment:n}){let i={"text-decoration":o};return n==="superscript"?I1(e,t,r,i):M1(e,t,r,i)}function Hf({rendererKey:e,id:t,text:r,alignment:o,styles:n}){let i=o?n&&{...n,"text-decoration":null}:n,a=o?A1({rendererKey:e,id:t,text:r,alignment:o,textDecoration:n?n["text-decoration"]:""}):r;return{chunkStyles:i,content:a}}function Vf(e){let{rendererKey:t,id:r}=e,{content:o,chunkStyles:n}=Hf(e);return M(t,`:${r}`)`
		<span style=${n}>${o}</span>`}function F1({rendererKey:e,onOverHandler:t,url:r,text:o,styles:n,id:i,alignment:a}){let{content:s,chunkStyles:c}=Hf({rendererKey:e,id:i,text:o,alignment:a,styles:n});return M(e,`:${i}`)`
		<a href=${r} target=_blank onmouseover=${t} style=${c}>${s}</a>`}function At(e,t,r=!1,o=!1){let n=e.paragraph(),i=k.isList(n),a=$f({characters:n.characters}),s=[],c=new Co,l=!1,d=D1(e.renderId);if(a.forEach((T,N)=>{let J=R1(T.styles,e.invertItalic,e.invertBold,e.getFontSize.bind(e),e.getLineHeightForFontSize.bind(e)),we=c.generate(`${e.renderId}_${T.text}_${J}`),Je=T.text;N==a.length-1&&Je.endsWith(`
`)&&(Je+=dt.ZERO_WIDTH_SPACE);let $e=te.getAlignment(T.styles.style),Pt=T.styles.url;Pt&&(l=!0);let se=Pt?F1({rendererKey:d,id:we,styles:J,text:Je,url:Pt,alignment:$e,onOverHandler:t}):Vf({rendererKey:d,id:we,styles:J,text:Je,alignment:$e});s.push(se)}),s.length)l&&E1(e.renderId);else{let T=c.generate(`${e.renderId}_empty`),N=Vf({rendererKey:d,id:T,styles:null,text:dt.ZERO_WIDTH_SPACE,alignment:null});s.push(N)}let u=`enter-blockquote-field-${e.paragraphIndex}`,S=`${i?"enter-list-item-field":"enter-paragraph-field"}-${e.paragraphIndex}`,R=o||r||i?null:e.placeholder,w=M(d,`:${e.renderId}`),I=e.className(),C=!o&&!r,v=o?"-1":"";switch(n.viewType){case"header":return w`<h1 class=${I} data-key=${n.key} contenteditable=${C}>${s}</h1>`;case"subheader":return w`<h2 class=${I} data-key=${n.key} contenteditable=${C}>${s}</h2>`;case"blockquote":case"pullquote":return w`<blockquote class=${I} data-key=${n.key} data-at=${he(u)} contenteditable=${C}>${s}</blockquote>`}return w`
		<p
			class=${I}
			tabindex=${v}
			data-key=${n.key}
			data-placeholder=${R}
			data-at=${he(S)}
			contenteditable=${C}
		>${s}</p>`}var P1="paragraph-block",O1={},ko=class extends E{constructor({wrappedParagraph:t,onHyperlinkOverFn:r,readonlyMode:o,isLock:n}){super({blockName:P1,relatedData:O1}),this._wrappedParagraph=t,this._readonlyMode=o,this._onHyperlinkOverFn=r,this.updateModifier("type",t.type()),this.updateModifier("lock",n),this.updateModifier("read-only",o)}setBlock(){}_renderParagraph(){return At(this._wrappedParagraph,this._onHyperlinkOverFn,this._readonlyMode,!1)}_render(){let r=this._wrappedParagraph.paragraph().key;return this._renderFunctionEx(`:paragraph-block-${r}`)`
<div class=${this._getCssClasses()} data-key="${r}">
	${this._renderParagraph()}
</div>`}};var aa=class extends E{constructor(t){super({blockName:"insert-indicator"}),this.updateModifier("type",t)}_render(){return this._html`
			<div class=${this._getCssClasses()}></div>`}};function So(e){let t=$(e);if(t)return t.viewType;let r=Ct.toExerciseBlock(e);if(r)return Ct.getBlockType(r);let o=Wt.toAttachmentBlock(e);if(o)return Wt.getBlockType(o);let n=ne.toCollageBlock(e);if(n)return ne.getBlockType(n);let i=_t.toNoteBlock(e);if(i)return _t.getBlockType(i);let a=g.toTableBlock(e);if(a)return g.getBlockType(a);let s=O.toFlipCardsBlock(e);if(s)return O.getBlockType(s);let c=ie.toDividerBlock(e);if(c)return ie.getBlockType(c);let l=ye.toContinueBlock(e);if(l)return ye.getBlockType(l);let d=at.toVideoBlock(e);if(d)return at.getBlockType(d);let u=uo.toEmbedBlock(e);return u?lr.getBlockType(u):""}var sa=class{constructor(t,r){this.type=t,this.items=[],this.counterReset=r}};var ca=class extends E{constructor(t){super({blockName:"rich-text-editor",direction:t}),this._renderers={},this._readonlyMode=!1,this._renderedBlockIndex=0,this._prevFloatedElementRenderer=null,this.onHyperlinkOver=this._createSignal(),this._relatedGroupData={}}getLockedBlocks(){return[]}setReadonlyMode(t){this._readonlyMode!==t&&(this._readonlyMode=t,this._sheduleRender())}setDirection(t){this._direction!==t&&(super.setDirection(t),this._sheduleRender())}registerRenderer(t,r){this._renderers[t]=r}_getReadonlyMode(){return this._readonlyMode}_getBlockMap(){}_getParagraphPlaceholder(t){return""}_getParagraphPrompt(t){return""}_getGroupRelatedData(){return this._relatedGroupData}_getListId(t){return t.items.filter(r=>!(r instanceof aa)).reduce((r,o)=>`${r}-${o.key}`,"")}isLock(t){return!1}isHidden(t){return!1}isSelected(t){}_renderBlock(t,r){let o=this._getPrevBlockType(this._renderedBlockIndex),n=this._getNextBlockType(this._renderedBlockIndex);this._renderedBlockIndex++;let i=$(t);if(i){let l=this._getParagraphPlaceholder(i),d=this._getParagraphPrompt(i),u=new mt({paragraph:i,blockBeforeType:o,blockAfterType:n,placeholder:l,prompt:d,paragraphIndex:r,direction:this._direction});return this._prevFloatedElementRenderer&&(this._prevFloatedElementRenderer.updateModifier("before",u.type()),this._prevFloatedElementRenderer=null),this._renderParagraphBlock({wrappedParagraph:u,onHyperlinkOverFn:this.onHyperlinkOver.toFn(),readonlyMode:this._readonlyMode,isLock:this.isLock(t),isSelected:this.isSelected(t)})}let s=this._renderers[t.type]({block:t,blockBeforeType:o,blockAfterType:n,onHyperlinkOverFn:this.onHyperlinkOver.toFn(),readonlyMode:this._readonlyMode,isLock:this.isLock(t),direction:this._direction,isSelected:this.isSelected(t),isHidden:this.isHidden(t)}),c=lr.toAbstractMediaBlock(t);return c&&c.alignment==="float-left"&&(this._prevFloatedElementRenderer=s),s.domElement()}_getPrevBlockType(t){let r=this._getBlockMap(),o=Kt(r,t-1);return o?So(o):"none"}_getNextBlockType(t){let r=this._getBlockMap(),o=Kt(r,t+1);return o?So(o):"none"}_renderParagraphBlock({wrappedParagraph:t,onHyperlinkOverFn:r,readonlyMode:o,isLock:n,isSelected:i}){}_processBlock({blocks:t,block:r}){t.push(r)}_getBlockGroups(t){let r=[],o=null,n=0;return sr.forEach(t,i=>{if(k.isList(i)){let a=m($(i));o&&o.type!==a.viewType&&(r.push(o),o=null);let s=a.viewType==="ol"&&!!a.isOrderedListFirstItem;s&&(n=0),(!o||s)&&(o&&r.push(o),o=new sa(a.viewType,n)),a.viewType==="ol"&&++n,this._processBlock({blocks:o.items,block:i});return}o&&(r.push(o),o=null),this._processBlock({blocks:r,block:i})}),o&&r.push(o),r}_renderBlockGroup(t,r){let o=`enter-paragraph-field-${r}`;if(t instanceof sa){let n=t.items.map((s,c)=>this._renderBlock(s,c)),i=M(this._getGroupRelatedData(),this._getListId(t));if(t.type==="ul")return i`<ul class='list-block' data-at=${he(o)}>${n}</ul>`;let a={"counter-reset":`li ${t.counterReset}`};return i`<ol class='list-block' style=${a}>${n}</ol>`}return this._renderBlock(t,r)}_renderBlocks(t){return this._renderedBlockIndex=0,this._getBlockGroups(t).map((r,o)=>this._renderBlockGroup(r,o))}};var Wf={text:{text:[16,16],none:[16,16],header:[16,16],subheader:[16,16],media:[16,16],"media-float-left":[16,16],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],exercise:[16,16],attachment:[16,16],collage:[16,16],video:[16,16],note:[16,16],table:[16,16],"flip-cards":[16,16],"divider-line":[16,16],"divider-line-with-text":[16,16],"divider-arrow":[16,16],"divider-quotes":[16,16],"divider-diamonds":[16,16],continue:[16,16],ol:[16,16],ul:[16,16],blockquote:[16,16],pullquote:[16,16]},header:{text:[56,0],none:[56,0],header:[56,0],subheader:[56,0],media:[56,0],"media-float-left":[56,0],"media-inner":[56,0],"media-outer":[56,0],"media-full":[56,0],exercise:[56,0],attachment:[56,0],collage:[56,0],video:[56,0],note:[56,0],table:[56,0],"flip-cards":[56,0],"divider-line":[56,0],"divider-line-with-text":[56,0],"divider-arrow":[56,0],"divider-quotes":[56,0],"divider-diamonds":[56,0],continue:[56,0],ol:[56,0],ul:[56,0],blockquote:[56,0],pullquote:[56,0]},subheader:{text:[40,0],none:[40,0],header:[40,0],subheader:[40,0],media:[40,0],"media-float-left":[40,0],"media-inner":[40,0],"media-outer":[40,0],"media-full":[40,0],exercise:[40,0],attachment:[40,0],collage:[40,0],video:[40,0],note:[40,0],table:[40,0],"flip-cards":[40,0],"divider-line":[40,0],"divider-line-with-text":[40,0],"divider-arrow":[40,0],"divider-quotes":[40,0],"divider-diamonds":[40,0],continue:[40,0],ol:[40,0],ul:[40,0],blockquote:[40,0],pullquote:[40,0]},exercise:{text:[40,40],none:[40,40],header:[40,40],subheader:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],exercise:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},attachment:{text:[40,40],none:[40,40],header:[40,40],subheader:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],exercise:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},collage:{text:[40,40],none:[40,40],header:[40,40],subheader:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],exercise:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},video:{text:[40,40],none:[40,40],header:[40,40],subheader:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],exercise:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"media-float-left":{text:[40,40],none:[40,40],header:[40,40],subheader:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],exercise:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"media-inner":{text:[40,40],none:[40,40],header:[40,40],subheader:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],exercise:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"media-outer":{text:[40,40],none:[40,40],header:[40,40],subheader:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],exercise:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"media-full":{text:[40,40],none:[40,40],header:[40,40],subheader:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],exercise:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"flip-cards":{text:[40,40],none:[40,40],header:[40,40],subheader:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],exercise:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},table:{text:[32,32],none:[32,32],header:[32,32],subheader:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],exercise:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],ol:[32,32],ul:[32,32],blockquote:[32,32],pullquote:[32,32]},note:{text:[32,32],none:[32,32],header:[32,32],subheader:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],exercise:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],ol:[32,32],ul:[32,32],blockquote:[32,32],pullquote:[32,32]},blockquote:{text:[24,24],none:[24,24],header:[24,24],subheader:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],exercise:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24]},pullquote:{text:[56,56],none:[56,56],header:[56,56],subheader:[56,56],media:[56,56],"media-float-left":[56,56],"media-inner":[56,56],"media-outer":[56,56],"media-full":[56,56],exercise:[56,56],attachment:[56,56],collage:[56,56],video:[56,56],note:[56,56],table:[56,56],"flip-cards":[56,56],"divider-line":[56,56],"divider-line-with-text":[56,56],"divider-arrow":[56,56],"divider-quotes":[56,56],"divider-diamonds":[56,56],continue:[56,56],ol:[56,56],ul:[56,56],blockquote:[56,56],pullquote:[56,56]},"divider-line":{text:[0,0],none:[0,0],header:[0,0],subheader:[0,0],media:[0,0],"media-float-left":[0,0],"media-inner":[0,0],"media-outer":[0,0],"media-full":[0,0],exercise:[0,0],attachment:[0,0],collage:[0,0],video:[0,0],note:[0,0],table:[0,0],"flip-cards":[0,0],"divider-line":[0,0],"divider-line-with-text":[0,0],"divider-arrow":[0,0],"divider-quotes":[0,0],"divider-diamonds":[0,0],continue:[0,0],ol:[0,0],ul:[0,0],blockquote:[0,0],pullquote:[0,0]},"divider-line-with-text":{text:[24,24],none:[24,24],header:[24,24],subheader:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],exercise:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24]},"divider-arrow":{text:[24,24],none:[24,24],header:[24,24],subheader:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],exercise:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24]},"divider-quotes":{text:[32,0],none:[32,0],header:[32,0],subheader:[32,0],media:[32,0],"media-float-left":[32,0],"media-inner":[32,0],"media-outer":[32,0],"media-full":[32,0],exercise:[32,0],attachment:[32,0],collage:[32,0],video:[32,0],note:[32,0],table:[32,0],"flip-cards":[32,0],"divider-line":[32,0],"divider-line-with-text":[32,0],"divider-arrow":[32,0],"divider-quotes":[32,0],"divider-diamonds":[32,0],continue:[32,0],ol:[32,0],ul:[32,0],blockquote:[32,0],pullquote:[32,0]},"divider-diamonds":{text:[24,24],none:[24,24],header:[24,24],subheader:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],exercise:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24]},continue:{text:[64,40],none:[64,40],header:[64,40],subheader:[64,40],media:[64,40],"media-float-left":[64,40],"media-inner":[64,40],"media-outer":[64,40],"media-full":[64,40],exercise:[64,40],attachment:[64,40],collage:[64,40],video:[64,40],note:[64,40],table:[64,40],"flip-cards":[64,40],"divider-line":[64,40],"divider-line-with-text":[64,40],"divider-arrow":[64,40],"divider-quotes":[64,40],"divider-diamonds":[64,40],continue:[64,40],ol:[64,40],ul:[64,40],blockquote:[64,40],pullquote:[64,40]},ol:{text:[32,32],none:[32,32],header:[32,32],subheader:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],exercise:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],ol:[16,16],ul:[16,16],blockquote:[32,32],pullquote:[32,32]},ul:{text:[24,24],none:[24,24],header:[24,24],subheader:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],exercise:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],ol:[8,8],ul:[8,8],blockquote:[24,24],pullquote:[24,24]}};function Uf(e,t){return Wf[e][t][0]}function zf(e,t){return Wf[e][t][1]}var L1={blockWrapper:{withMods:e=>__getCssClass("xa4510__block-wrapper",e)}},$1=.89,K1={},me=class extends E{constructor({block:t,blockBeforeType:r,blockAfterType:o,blockRenderer:n,isHidden:i=!1,direction:a}){super({relatedData:K1,direction:a}),this._block=t,this._isHidden=i,this._blockBeforeType=r,this._blockAfterType=o,this._currentBlockType=So(this._block),this._blockRenderer=n,this.setOnDomElementReCreatedCallback(()=>{})}blockRenderer(){return this._blockRenderer}setBlockRenderer(t){this._blockRenderer!==t&&(this._blockRenderer=t,this._sheduleRender())}setBlock(t){this._block!==t&&(this._block=t,this._currentBlockType=So(this._block),this._blockRenderer.setBlock(t),this._sheduleRender())}setHidden(t){this._isHidden!==t&&(this._isHidden=t,this._sheduleRender())}setDirection(t){this._direction!==t&&(super.setDirection(t),this._blockRenderer.setDirection(t))}setBlockBeforeType(t){this._blockBeforeType!==t&&(this._blockBeforeType=t,this._sheduleRender())}setBlockAfterType(t){this._blockAfterType!==t&&(this._blockAfterType=t,this._sheduleRender())}_calculatePadding(t){return ct()?t*$1:t}_getBlockPaddingTop(){return this._calculatePadding(this._block.designSettings&&this._block.designSettings.paddingTop!==null?this._block.designSettings.paddingTop:Uf(this._currentBlockType,this._blockBeforeType))}_getBlockPaddingBottom(){return this._calculatePadding(this._block.designSettings&&this._block.designSettings.paddingBottom!==null?this._block.designSettings.paddingBottom:zf(this._currentBlockType,this._blockAfterType))}_getBlockWrapperCssStyles(){var o;let t={"background-color":"","padding-block-start":"","padding-block-end":""},r=(o=this._block.designSettings)==null?void 0:o.background;if(r&&r.color!==We){let n=Y(r.color),i=r.opacity;t["background-color"]=`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${i})`}if(t["padding-block-start"]=`${this._getBlockPaddingTop()}px`,t["padding-block-end"]=`${this._getBlockPaddingBottom()}px`,this._wasRendered()){let n=this.domElement();qe(n,"--top-padding-height",t["padding-block-start"]),qe(n,"--bottom-padding-height",t["padding-block-end"])}return t}_getRenderId(){let t=$(this._block);return t?`:block-${this._block.key}-${this._block.type}-${t.viewType}`:`:block-${this._block.key}-${this._block.type}`}_getClassName(){let t=lr.toAbstractMediaBlock(this._block),r=$(this._block);return L1.blockWrapper.withMods({"fit-content":ne.isCollageBlock(this._block),"float-left":!!t&&t.alignment==="float-left","clear-both":!r,"before-lists":this._blockBeforeType==="ol"||this._blockBeforeType==="ul",dir:this._direction,hidden:this._isHidden})}_render(){return this._renderFunctionEx(this._getRenderId())`
<div
	class=${this._getClassName()}
	style=${this._getBlockWrapperCssStyles()}
	draggable="false"
	data-wrapper-key=${this._block.key}
>
	${this._blockRenderer.domElement()}
</div>
`}};var la=class extends ko{_render(){let t=this._wrappedParagraph.paragraph(),r=t.key;return this._renderFunctionEx(`:list-paragraph-block-${r}-${t.viewType}`)`
<li class=${this._getCssClasses()} data-key=${r}>
	${this._renderParagraph()}
</li>`}};var Mc={};function Gf({wrappedParagraph:e,blockBeforeType:t,blockAfterType:r,direction:o,onHyperlinkOverFn:n}){let i,a=e.paragraph(),s=k.isList(a)?new la({wrappedParagraph:e,onHyperlinkOverFn:n,readonlyMode:!0,isLock:!1}):new ko({wrappedParagraph:e,onHyperlinkOverFn:n,readonlyMode:!0,isLock:!1});return Mc[a.key]?(i=Mc[a.key],i.setBlock(a),i.setDirection(o),i.setBlockRenderer(s)):(i=new me({block:a,blockBeforeType:t,blockAfterType:r,direction:o,blockRenderer:s}),Mc[a.key]=i),i}var qf="continue-block-group",N1=`${qf}_hidden`,da=class{constructor(t,r){this.continueButtonKey=t,this.blockMap=tr(r,o=>o.key)}},ma=class extends ca{constructor(t,r,o=Fe()){super(o),this._state=t,this._continueKey=r,this._passedContinueButtonKeys=[],this._invalidatePassedContinueButtonKeys()}updateState(t,r){this._state==t&&this._continueKey==r||(this._state=t,this._continueKey=r,this._invalidatePassedContinueButtonKeys(),this._sheduleRender())}_getBlockMap(){return this._state.blockMap}isLock(t){return!0}isSelected(t){return!1}_renderParagraphBlock({wrappedParagraph:t,onHyperlinkOverFn:r}){return Gf({wrappedParagraph:t,onHyperlinkOverFn:r,blockAfterType:t.blockAfterType,blockBeforeType:t.blockBeforeType,direction:this._direction}).domElement()}_invalidatePassedContinueButtonKeys(){if(!this._continueKey)return;let t=[],r=this._getBlockMap();for(let o of r.order)if(ye.toContinueBlock(r.blocks[o])&&t.push(o),o===this._continueKey)break;this._passedContinueButtonKeys=t}isHidden(t){let r=ye.toContinueBlock(t);return r?this._passedContinueButtonKeys.includes(r.key):!1}_getContinueGroupId(t){return t.blockMap.order.reduce((r,o)=>`${r}-${o}`,"")}_getContinueGroups(){let t=this._getBlockMap(),r=[],o=[];if(sr.forEach(t,n=>{o.push(n);let i=ye.toContinueBlock(n);if(i){let a=new da(i.key,o);r.push(a),o=[]}}),o.length){let n=new da("none",o);r.push(n)}return r}_renderContinueGroups(){let t=this._passedContinueButtonKeys.indexOf(this._continueKey);return this._getContinueGroups().map((r,o)=>{let n=super._renderBlocks(r.blockMap),i=M(this._getGroupRelatedData(),this._getContinueGroupId(r)),a=o>t+1,s=ke(qf,a?N1:null);return i`<div class=${s}>${n}</div>`})}_render(){return this._html`
			<div class=${this._getCssClasses()}>
				${this._renderContinueGroups()}
			</div>`}};var Qf=null,Yf=null;function kt(e){if(!e.length||e.startsWith("data:")||e.startsWith("blob:"))return e;let t=e;return Qf&&(t=`${Qf}${e}`),Yf&&(t=Yf(t)),t}var Ac=0,Xf=1024,Zf=Xf*1024,V1=Zf*1024;function jf(e){return Math.round(e*10)/10}function H1(e){return Math.max(Ac,Math.round(e/Xf))}function W1(e){return Math.max(Ac,jf(e/Zf))}function U1(e){return Math.max(Ac,jf(e/V1))}function Jf(e){let t=U1(e);if(t>1)return B("Common.FileSize.ToGb",{volume:t});let r=W1(e);return r>1?B("Common.FileSize.ToMb",{volume:r}):B("Common.FileSize.ToKb",{volume:H1(e)})}function xo(e,{component:t,tooltipText:r,size:o,stayOnHover:n,show:i,side:a,align:s,isPreventDefaultClick:c}){let l=F();return Mt({html:e,elementRef:l,text:r,size:o,stayOnHover:n,show:i,side:a,align:s,isPreventDefaultClick:c}),Rt(e,t,l)}var z1={container:"x6e61f__container"};function eh(e,t){return e`
<div class=${z1.container}>
	${e(ra,t)}
</div>`}function th(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.841 31.182V19.068h1.803c.61 0 1.106.495 1.106 1.106v9.902c0 .61-.495 1.106-1.106 1.106H30.84zM14.25 17.68v15.166L28.773 34.5V15.75L14.25 17.68z" fill="#4169B4"/><path d="m23.61 27.043 1.118-6.117h1.705l-1.842 8.597H22.87l-1.352-5.751-1.351 5.75h-1.723l-1.842-8.596h1.705l1.124 6.105 1.369-6.105h1.448l1.363 6.117z" fill="#fff"/></svg>
`}function rh(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M14.658 26.355v2.895h-2.056v-8.531h3.404c.652 0 1.228.12 1.728.363.504.238.893.58 1.166 1.025.278.442.416.944.416 1.506 0 .832-.299 1.498-.896 1.998-.594.496-1.41.744-2.45.744h-1.312zm0-1.587h1.348c.398 0 .701-.1.908-.3.21-.198.316-.48.316-.843 0-.398-.107-.717-.322-.955-.215-.238-.508-.36-.879-.363h-1.37v2.46zM21.018 29.25v-8.531h2.748c.754 0 1.432.172 2.033.515a3.56 3.56 0 0 1 1.406 1.448c.34.62.512 1.318.516 2.091v.393c0 .781-.166 1.482-.498 2.104a3.619 3.619 0 0 1-1.395 1.453 3.956 3.956 0 0 1-2.003.527h-2.807zm2.056-6.943v5.361h.715c.59 0 1.043-.209 1.36-.627.316-.422.474-1.047.474-1.875v-.37c0-.823-.158-1.444-.474-1.862-.317-.418-.778-.627-1.383-.627h-.691zM34.749 25.852h-3.317v3.398h-2.056v-8.531h5.707v1.588h-3.65v1.963h3.316v1.582z" fill="#E05D36"/></svg>
`}function oh(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.5 31.25V19h1.75a1.5 1.5 0 0 1 1.5 1.5v9.25a1.5 1.5 0 0 1-1.5 1.5H30.5zM14.25 17.68v15.166L28.875 34.5V15.75L14.25 17.68z" fill="#D1684D"/><path d="M20.49 26.523v3.102h-1.746V20.82h3.305c.636 0 1.194.12 1.675.363a2.6 2.6 0 0 1 1.118 1.034c.26.443.39.95.39 1.518 0 .862-.286 1.544-.856 2.044-.566.496-1.352.744-2.357.744h-1.53zm0-1.47h1.559c.461 0 .812-.113 1.053-.339.244-.226.366-.548.366-.967 0-.432-.122-.78-.366-1.046-.245-.267-.582-.404-1.013-.412h-1.6v2.764z" fill="#fff"/></svg>
`}function nh(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/></svg>
`}function ih(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.5 31.25V19h1.75a1.5 1.5 0 0 1 1.5 1.5v9.25a1.5 1.5 0 0 1-1.5 1.5H30.5zM14.25 17.68v15.166L28.875 34.5V15.75L14.25 17.68z" fill="#468B5B"/><path d="m21.563 23.855 1.588-3.035h2.007l-2.467 4.366 2.531 4.439h-2.03l-1.63-3.084-1.629 3.084h-2.03l2.53-4.439-2.466-4.366h2.007l1.588 3.035z" fill="#fff"/></svg>
`}function ah(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m6.293 10.707 3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0-1.414-1.414L11 10.586V3a1 1 0 1 0-2 0v7.586L7.707 9.293a1 1 0 0 0-1.414 1.414zM5 15a1 1 0 1 0-2 0v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 1 0-2 0v1H5v-1z" fill="currentColor"/></svg>
`}function ua(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.654 5.02a6 6 0 0 1 8.6 2.08l-.432-.173a1 1 0 0 0-.744 1.857l2.625 1.052a1 1 0 0 0 1.3-.556l1.052-2.626A1 1 0 0 0 17.2 5.91l-.134.335a8 8 0 0 0-14.533.889 1 1 0 1 0 1.867.716 6 6 0 0 1 2.255-2.83zm6.693 10.07a6 6 0 0 1-8.583-2.05l.335.162a1 1 0 0 0 .873-1.8l-2.545-1.235a1 1 0 0 0-1.336.463L.856 13.175a1 1 0 1 0 1.8.873l.181-.375a8 8 0 0 0 14.632-.696 1 1 0 1 0-1.868-.717 6 6 0 0 1-2.255 2.83z" fill="currentColor"/></svg>
`}var Yt={attachmentFigure:"x99dbb__attachment-figure",attachmentSubblock:{withMods:e=>__getCssClass("x99dbb__attachment-subblock",e)},attachmentBlock:{withMods:e=>__getCssClass("x99dbb__attachment-block",e)},dndIcon:"x99dbb__dnd-icon",attachmentIcon:"x99dbb__attachment-icon",attachmentInfo:"x99dbb__attachment-info",attachmentName:"x99dbb__attachment-name",attachmentSize:"x99dbb__attachment-size",attachmentButtons:"x99dbb__attachment-buttons",placeholder:"x99dbb__placeholder"};function G1(e,{disabled:t,onReplace:r,onDownload:o}){return e`
<div class=${Yt.attachmentButtons}>
	${e.renderIf(xo,()=>r&&{component:f(Qe,{state:t?"disabled":"default",style:"linkSecondary",structure:"icon",icon:f(ua),size:"small",onClick:r}),tooltipText:B("Roll.Editor.AttachmentBlock.UpdateButtonTooltip")})}
	${e(xo,{component:f(Qe,{state:t?"disabled":"default",style:"linkSecondary",structure:"icon",icon:f(ah),size:"small",onClick:o}),tooltipText:B("Roll.Editor.AttachmentBlock.DownloadButtonTooltip")})}
</div>`}function q1(e,{extension:t}){return e`
<div class=${Yt.attachmentIcon}>
	${e.switch(()=>{switch(t){case"doc":case"docx":return f(th,{});case"ppt":case"pptx":return f(oh,{});case"xls":case"xlsx":return f(ih,{});case"pdf":return f(rh,{});default:return f(nh,{})}})}
</div>`}function Q1(e){return e`
<img class=${Yt.placeholder} aria-hidden=true src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />`}function sh(e,{key:t,fileName:r,fileSize:o,fileExtension:n,isLoading:i,isPlayer:a,disabled:s,onReplace:c,onDownload:l}){let d=F();return Se(d,"click",()=>{a&&l()}),e`
<div
	class=${Yt.attachmentBlock.withMods({clickable:a,lock:!!s})}
	save-ref=${d}
	draggable=true
>
	${e.switch(()=>i?f(eh,{size:"medium"},Yt.attachmentIcon):f(q1,{extension:n}))}
	<div class=${Yt.attachmentSubblock.withMods({uploading:i})}>
		<div class=${Yt.attachmentInfo}>
			${e(ta,{text:r},Yt.attachmentName)}
			<div class=${Yt.attachmentSize}>${Jf(o)}</div>
		</div>
		${e(G1,{disabled:!!s,onReplace:c,onDownload:a?()=>{}:l})}
		${e.renderIf(Q1,()=>!a&&!i)}
	</div>
</div>`}var Y1={attachmentFigure:"x99dbb__attachment-figure",attachmentSubblock:{withMods:e=>__getCssClass("x99dbb__attachment-subblock",e)},attachmentBlock:{withMods:e=>__getCssClass("x99dbb__attachment-block",e)},dndIcon:"x99dbb__dnd-icon",attachmentIcon:"x99dbb__attachment-icon",attachmentInfo:"x99dbb__attachment-info",attachmentName:"x99dbb__attachment-name",attachmentSize:"x99dbb__attachment-size",attachmentButtons:"x99dbb__attachment-buttons",placeholder:"x99dbb__placeholder"},X1="attachment-block",Fc={},Z1={},Pc=class extends E{constructor({block:t}){super({blockName:X1}),this._block=t,this._attachmentElement=null}setBlock(t){this._block!==t&&(this._attachmentElement=null,this._block=t,this._sheduleRender())}_render(){let{key:t,src:r,fileName:o}=this._block,n=qt(Z1,`:attachment-block-${t}`),i=!0;return n`
<figure class=${ke(this._getCssClasses(),Y1.attachmentFigure)}>
	${n(sh,{...this._block,isPlayer:i,onDownload:()=>{let a=document.createElement("a");a.setAttribute("href",kt(m(r))),a.setAttribute("download",o),a.click()}})}
</figure>`}};function ch({block:e,blockBeforeType:t,blockAfterType:r,direction:o}){let n;return Fc[e.key]?(n=Fc[e.key],n.setBlock(e),n.setDirection(o)):(n=new me({block:e,blockBeforeType:t,blockAfterType:r,direction:o,blockRenderer:new Pc({block:e})}),Fc[e.key]=n),n}var Oc={create(e){return{...Mi.create(e),parentCollageKey:e.parentCollageKey}},toCollagedImageBlock(e){return e&&e.type===p.IMAGE&&e.parentCollageKey?e:null}};var j1=10,EK=j1*1024*1024,J1=["png","jpg","jpeg","gif"];function lh(){return J1.slice()}var gr=class extends E{constructor({bemInfo:t,blockName:r,block:o,relatedData:n}){super({bemInfo:t,blockName:r,block:o,relatedData:n}),this._hidden=!1,this._x=null,this._y=null,this._width=null,this._height=null,this._text=""}onDisconnected(){return this._getBrowserEventSignal(U.CUSTOM_DISCONNECTED)}setText(t){this._text=t,this._sheduleRender()}show(){this._hidden&&(this._hidden=!1,this._sheduleRender())}hide(){this._hidden||(this._hidden=!0,this._sheduleRender())}visible(){return!this._hidden}x(){return this._x}y(){return this._y}move(t,r){(t!=this._x||r!=this._y)&&(this._x=t,this._y=r,this._sheduleRender())}setWidth(t){t!=this._width&&(this._width=t,this._sheduleRender())}setHeight(t){t!=this._height&&(this._height=t,this._sheduleRender())}_getText(){return this._text}_getBaseStyles(){let t={display:this._hidden?"none":""};return this._x!=null&&(t.left=this._x),this._y!=null&&(t.top=this._y),this._width!=null&&(t.width=this._width),this._height!=null&&(t.height=this._height),t}_render(){return this._html`
<div
	class=${this._getCssClasses()}
	style=${this._getBaseStyles()}
	ondisconnected=${this}
>
	${this._text}
</div>`}};var eS=.76;function dh(e,t,r){let o=[...Y(e),t],n=Y(Pe.whiteDefault),i=ro(n,o),[,,a]=ws(i[0],i[1],i[2]);return a<=r?"light":"dark"}function tS({setStyle:e,background:t,lightnessLimitValue:r}){let o=new FastAverageColor,n=kt(t.imageSrc);o.getColorAsync(n).then(i=>{i.error||e(dh(i.hexa,1,r))}),o.destroy()}function Xt({background:e,lightnessLimitValue:t=eS,setStyle:r}){if(!e){r("dark");return}e.type==="color"?r(dh(e.color,e.opacity,t)):e.type==="image"&&tS({background:e,lightnessLimitValue:t,setStyle:r})}function Bo(e){return e?e.type==="color"?{type:"color",color:e.color,opacity:e.opacity}:{type:"image",imageSrc:e.image.src}:null}function nn(e){return e?{type:"image",imageSrc:e.src}:null}function mh(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 2a1 1 0 0 0-2 0v2H2a1 1 0 0 0 0 2h2v8a2 2 0 0 0 2 2h8v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H6V2zm3 2a1 1 0 0 0 0 2h5v5a1 1 0 1 0 2 0V6a2 2 0 0 0-2-2H9z" fill="currentColor"/></svg>
`}function uh(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.212 1 .485.875 1.37 2.474a1 1 0 1 1-1.748.97l-.228-.412a2.5 2.5 0 1 0 3.5-1.582 1 1 0 0 1 .874-1.799 4.5 4.5 0 1 1-6.317 2.905l-.315.175a1 1 0 0 1-.97-1.75l2.474-1.37.875-.486zM2 3a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h13a2 2 0 0 0 2-2v-3a1 1 0 0 0-2 0v3H2V5h5a1 1 0 1 0 0-2H2zm10.445 7.113a1 1 0 0 0-1.307-.092L8.5 12l-1.178-.587a1 1 0 0 0-.96.037L3.5 13.166V14.5h10v-3.332l-1.055-1.055zM4.75 10.5a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z" fill="currentColor"/></svg>
`}function ph(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1H8zM6 4H3a1 1 0 0 0 0 2v10a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V6a1 1 0 1 0 0-2h-3a3 3 0 0 0-3-3H9a3 3 0 0 0-3 3zm9 12V6H5v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1zm-7-1a1 1 0 0 1-1-1V9a1 1 0 0 1 2 0v5a1 1 0 0 1-1 1zm3-1a1 1 0 1 0 2 0V9a1 1 0 1 0-2 0v5z" fill="currentColor"/></svg>
`}function fh(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm0 6a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm1.5 7.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM11 4a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm0 6a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm1.5 7.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" fill="currentColor"/></svg>
`}var rS={dndIcon:"xea8c5__dnd-icon"};function hh(e,{className:t,onClick:r,onMouseOver:o,onMouseOut:n}){return e`
<div
	class=${ke(rS.dndIcon,t)}
	draggable="true"
	contenteditable="false"
	onclick=${()=>r&&r()}
	onmouseover=${()=>o&&o()}
	onmouseout=${()=>n&&n()}
>
	${e(f(fh))}
</div>`}function pa(){let[,e]=Z(!0);return j(()=>e(t=>!t),[])}var fa="media-block",oS="wrapper",nS="content",iS="placeholder",aS=740,ha=class extends E{constructor({block:t,contentRendererFn:r,direction:o}){super({blockName:fa,direction:o}),this._block=t,this._contentRendererFn=r,this._wrapperClassName=new xe(fa,oS).className(),this._contentClassName=new xe(fa,nS).className(),this._placeholderClassName=new xe(fa,iS).className(),this.fixedRatio=0,this.setBlock(t)}getBlock(){return this._block}setBlock(t){this._block=t,this._invalidateModifiers()}setDirection(t){this._direction!==t&&(super.setDirection(t),this._invalidateModifiers())}_invalidateModifiers(){this.updateModifier("align",this._block.alignment),this.updateModifier("dir",this._direction)}_getWrapperInlineStyles(){}_onContentSizeChange(t){this.fixedRatio=t,this._sheduleRender()}_getInlineStyles(){return document.body.clientWidth<=aS||this._block.alignment!=="float-left"||this._block.type===p.EMBED?null:{width:`${this._block.width}px`}}_getPlaceholderStyles(){return this._block.width?{"padding-bottom":`${(this.fixedRatio?this.fixedRatio:this._block.height/this._block.width)*100}%`}:{width:"100%",height:`${this._block.height}px`}}};function Lc(e,t,r=[]){let o=Le(t);_e(()=>{let n=e instanceof Element?e:e&&e.current;if(!n)return;let i=new ResizeObserver(([a])=>{o.current&&o.current(a.contentRect)});return i.observe(n),()=>{i.disconnect()}},[e,o,...r])}function sS(){let e=!1;try{e=!!window.Animation}catch(t){}return e}function $c({element:e,createKeyframes:t,abortSignal:r}){if(!sS())return Promise.resolve();let o=new Animation(t(e));return new Promise(n=>{let i=e.style.pointerEvents;e.style.pointerEvents="none";function a(){c(),n()}function s(){c(),n("aborted")}function c(){e.style.pointerEvents=i,r&&r.removeEventListener("abort",s),o.removeEventListener("cancel",s),o.removeEventListener("finish",a)}r&&r.addEventListener("abort",s),o.addEventListener("cancel",s),o.addEventListener("finish",a),o.play()})}function ga({element:e,getAppearKeyframes:t,getHideKeyframes:r,onAppeared:o,onHidden:n}){let[i,a]=Z(!1),s=pa(),c=F(new AbortController),l=F(e),d=F(null);e!==l.current&&(d.current=l.current),l.current=e;let u=Le({getAppearKeyframes:t,getHideKeyframes:r,onAppeared:o||(()=>{}),onHidden:n||(()=>{})});return _e(()=>{if(!e)return;c.current.abort(),c.current=new AbortController;let h=c.current.signal,S=u.current.getAppearKeyframes,R=u.current.getHideKeyframes;return S?(a(!0),$c({element:e,createKeyframes:S,abortSignal:h}).then(()=>{a(!1),u.current.onAppeared()})):u.current.onAppeared(),()=>{if(!R||h.aborted){d.current=null,s(),u.current.onHidden();return}a(!0),$c({element:e,createKeyframes:R,abortSignal:h}).then(()=>{d.current=null,a(!1),u.current.onHidden()})}},[u,e,s]),{animating:i,element:d.current||e}}function ya({layer:e,element:t,onAppend:r,beforeAppend:o,beforeUnmount:n}){let i=F(null),a=Le(n),s=j(()=>{let c=i.current;c&&(m(c.parentElement==e,`useExternalLayer(): layer "${e}" doesn't contain element`),a.current&&a.current(),e.removeChild(c),i.current=null)},[e,a]);_e(()=>s,[s]),t!=i.current&&(s(),t&&(o&&o(t),t.style.position="absolute",e.appendChild(t),r&&r(t)),i.current=t)}function _a(e){let t=st(e);return t?t.characters.length:0}var P=class{static _getAllTablesFromSelection(t,r){return xn(G.getAllBlocksFromSelection(t,r).map(o=>g.toTableBlock(o)))}static _changeCellColor(t,r,o){let n={name:"backgroundColor",color:r};if(g.addCellMeta(t,n),r!==We){let i={name:"backgroundOpacity",opacity:o};g.addCellMeta(t,i)}}static _applyForEachCell(t,r){for(let o of t.rowsOrder)for(let n of t.colsOrder){let i=g.getCell(t,o,n);r(i)}}static _applyForEachRowCell(t,r,o){t.colsOrder.forEach(n=>{let i=g.getCell(t,r,n);o(i)})}static _applyForEachColumnCell(t,r,o){t.rowsOrder.forEach(n=>{let i=g.getCell(t,n,r);o(i)})}static _getCellParagraphStyles(t,r,o){let n=g.getCell(t,r,o),i=$(n.content);if(!(i!=null&&i.characters.length)){let a=ve(n.meta,"charactersMeta");return(a==null?void 0:a.name)==="charactersMeta"?a.data.style:[]}return i.characters[0].meta.style}static _getCellTextAlignment(t,r,o){let n=g.getCell(t,r,o),i=m($(n.content));return{vertical:n.verticalTextAlign,horizontal:i.textAlign}}static _getCellKey(t,r,o){return g.getCell(t,r,o).key}static getFirstRowKey(t){return t.rowsOrder[0]}static getLastRowKey(t){return t.rowsOrder[t.rowsOrder.length-1]}static getPreviousRowKey(t,r){let o=t.rowsOrder.indexOf(r);return o===0?null:t.rowsOrder[o-1]}static getNextRowKey(t,r){let o=t.rowsOrder.indexOf(r);return o===t.rowsOrder.length-1?null:t.rowsOrder[o+1]}static getFirstColumnKey(t){return t.colsOrder[0]}static getLastColumnKey(t){return t.colsOrder[t.colsOrder.length-1]}static getPreviousColumnKey(t,r){let o=t.colsOrder.indexOf(r);return o===0?null:t.colsOrder[o-1]}static getNextColumnKey(t,r){let o=t.colsOrder.indexOf(r);return o===t.colsOrder.length-1?null:t.colsOrder[o+1]}static getCellTextLength(t,r,o){let n=g.getCell(t,r,o);return _a(n.content)}static getCellBelow(t,r,o){let n=P.getNextRowKey(t,r);return n?g.getCell(t,n,o):null}static getCellAbove(t,r,o){let n=P.getPreviousRowKey(t,r);return n?g.getCell(t,n,o):null}static getTableTextStyles(t){let r=P.getFirstRowKey(t),o=P.getFirstColumnKey(t);return P._getCellParagraphStyles(t,r,o)}static getTableTextAlignment(t){let r=P.getFirstRowKey(t),o=P.getFirstColumnKey(t);return P._getCellTextAlignment(t,r,o)}static getTableRowTextAlignment(t,r){let o=P.getFirstColumnKey(t);return P._getCellTextAlignment(t,r,o)}static getTableRowTextStyles(t,r){let o=P.getFirstColumnKey(t);return P._getCellParagraphStyles(t,r,o)}static getTableColumnTextAlignment(t,r){let o=P.getFirstRowKey(t);return P._getCellTextAlignment(t,o,r)}static getTableColumnTextStyles(t,r){let o=P.getFirstRowKey(t);return P._getCellParagraphStyles(t,o,r)}static updateTableAlign(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r]));return n.alignment=o,{selection:_.createTableBlockSelection(r)}}static addLastTableRow(t,r){let o=m(g.toTableBlock(t.blockMap.blocks[r]));return g.addLastRow(o),{selection:_.createTableBlockSelection(r)}}static addTableRowBefore(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r])),i=g.addRowBefore(n,o),a=P.getFirstColumnKey(n),s=P._getCellKey(n,i,a);return{selection:{..._.createTableBlockSelection(r),customSelection:ue.createCellSelection({rowKey:i,colKey:a,cellKey:s})}}}static addTableRowAfter(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r])),i=g.addRowAfter(n,o),a=P.getFirstColumnKey(n),s=P._getCellKey(n,i,a);return{selection:{..._.createTableBlockSelection(r),customSelection:ue.createCellSelection({rowKey:i,colKey:a,cellKey:s})}}}static removeTableRow(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r])),i=P.getNextRowKey(n,o);return g.removeRow(n,o),n.rowsOrder.length?(i||(i=P.getLastRowKey(n)),{selection:_.createTableRowSelection(r,i)}):Ut(t,r,k.create())}static addLastTableColumn(t,r){let o=m(g.toTableBlock(t.blockMap.blocks[r]));return g.addLastColumn(o),{selection:_.createTableBlockSelection(r)}}static addTableColumnBefore(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r])),i=g.addColumnBefore(n,o),a=P.getFirstRowKey(n),s=P._getCellKey(n,a,i);return{selection:{..._.createTableBlockSelection(r),customSelection:ue.createCellSelection({rowKey:a,colKey:i,cellKey:s})}}}static addTableColumnAfter(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r])),i=g.addColumnAfter(n,o),a=P.getFirstRowKey(n),s=P._getCellKey(n,a,i);return{selection:{..._.createTableBlockSelection(r),customSelection:ue.createCellSelection({rowKey:a,colKey:i,cellKey:s})}}}static moveRowUp(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r]));return g.moveRowUp(n,o),{selection:_.createTableRowSelection(r,o)}}static moveRowDown(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r]));return g.moveRowDown(n,o),{selection:_.createTableRowSelection(r,o)}}static moveColumnLeft(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r]));return g.moveColumnLeft(n,o),{selection:_.createTableColumnSelection(r,o)}}static moveColumnRight(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r]));return g.moveColumnRight(n,o),{selection:_.createTableColumnSelection(r,o)}}static pinHeaderColumn(t,r){let o=m(g.toTableBlock(t.blockMap.blocks[r]));return g.addTableMeta(o,{name:"isHeaderColumnPinned"}),{selection:_.createTableColumnSelection(r,P.getFirstColumnKey(o))}}static unpinHeaderColumn(t,r){let o=m(g.toTableBlock(t.blockMap.blocks[r]));return g.removeTableMeta(o,"isHeaderColumnPinned"),{selection:_.createTableColumnSelection(r,P.getFirstColumnKey(o))}}static changeTableRowColor(t,r,o,{color:n,opacity:i}){let a=m(g.toTableBlock(t.blockMap.blocks[r]));return P._applyForEachRowCell(a,o,s=>{P._changeCellColor(s,n,i)}),{selection:{..._.createTableBlockSelection(r),customSelection:ue.createRowSelection({rowKey:o})}}}static changeTableColumnColor(t,r,o,{color:n,opacity:i}){let a=m(g.toTableBlock(t.blockMap.blocks[r]));return P._applyForEachColumnCell(a,o,s=>{P._changeCellColor(s,n,i)}),{selection:{..._.createTableBlockSelection(r),customSelection:ue.createColumnSelection({columnKey:o})}}}static duplicateColumn(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r])),i=g.duplicateColumn(n,o);return{selection:_.createTableColumnSelection(r,i)}}static duplicateRow(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r])),i=g.duplicateRow(n,o);return{selection:_.createTableRowSelection(r,i)}}static removeTableColumn(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r])),i=P.getNextColumnKey(n,o);return g.removeColumn(n,o),n.colsOrder.length?(i||(i=P.getLastColumnKey(n)),{selection:_.createTableColumnSelection(r,i)}):Ut(t,r,k.create())}static changeTableColor(t,r,{color:o,opacity:n}){return P._getAllTablesFromSelection(t,r).forEach(i=>P._applyForEachCell(i,a=>P._changeCellColor(a,o,n))),{selection:r}}static changeTableTextVerticalAlign(t,r,o){return P._getAllTablesFromSelection(t,r).forEach(n=>P._applyForEachCell(n,i=>g.setCellVerticalAlign(i,o))),{selection:r}}static changeTableRowTextVerticalAlign(t,r,o,n){let i=m(g.toTableBlock(t.blockMap.blocks[r]));return P._applyForEachRowCell(i,o,a=>g.setCellVerticalAlign(a,n)),{selection:_.createTableRowSelection(r,o)}}static changeTableCellTextVerticalAlign(t,r,o){let{startKey:n}=r,{rowKey:i,colKey:a}=r.customSelection,s=m(g.toTableBlock(t.blockMap.blocks[n])),c=g.getCell(s,i,a);return g.setCellVerticalAlign(c,o),{selection:r}}static changeTableColumnTextVerticalAlign(t,r,o,n){let i=m(g.toTableBlock(t.blockMap.blocks[r]));return P._applyForEachColumnCell(i,o,a=>g.setCellVerticalAlign(a,n)),{selection:_.createTableColumnSelection(r,o)}}static changeTableTextHorizontalAlign(t,r,o){let n=m(g.toTableBlock(t.blockMap.blocks[r]));return P._applyForEachCell(n,i=>g.setCellHorizontalAlign(i,o)),{selection:_.createTableBlockSelection(r)}}static changeTableRowTextHorizontalAlign(t,r,o,n){let i=m(g.toTableBlock(t.blockMap.blocks[r]));return P._applyForEachRowCell(i,o,a=>g.setCellHorizontalAlign(a,n)),{selection:_.createTableRowSelection(r,o)}}static changeTableColumnTextHorizontalAlign(t,r,o,n){let i=m(g.toTableBlock(t.blockMap.blocks[r]));return P._applyForEachColumnCell(i,o,a=>g.setCellHorizontalAlign(a,n)),{selection:_.createTableColumnSelection(r,o)}}};function gh(e){let t=ve(e.meta,"charactersMeta");return t&&t.name==="charactersMeta"?t.data:null}function cS(e,t){return ve(e.meta,t)}function yh(e){let t=cS(e,"isHeaderColumnPinned");return!!t&&t.name==="isHeaderColumnPinned"}var yr={SPAN:"SPAN",DIV:"DIV",SVG:"SVG",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",UL:"UL",OL:"OL",LI:"LI",P:"P",BR:"BR",B:"B",STRONG:"STRONG",I:"I",EM:"EM",A:"A",U:"U",S:"S",STRIKE:"STRIKE",SUP:"SUP",SUB:"SUB",IMG:"IMG",IFRAME:"IFRAME",BLOCKQUOTE:"BLOCKQUOTE",Q:"Q",FIGURE:"FIGURE",FIGCAPTION:"FIGCAPTION",LINK:"LINK",CANVAS:"CANVAS",INPUT:"INPUT",BUTTON:"BUTTON",TABLE:"TABLE",TD:"TD",HR:"HR"};function _h(){let e=m(window.getSelection());return e.type==="None"?null:e.rangeCount>0?m(e.getRangeAt(0)):null}function vo(e){e.stopPropagation()}function Ur(e){kn(e,(t,r)=>{Bt(t),delete e[r]})}function Ch(e){switch(e){case"right":return"left";case"left":return"right";case"center":case"bottom":return e;default:throw L(e),new Error}}var an=220,zr="cubic-bezier(.24,.84,.26,.99)",lS=40,Sh=480;function Kc(e){return e<=Sh?360:440}function Nc(e){return e<=Sh?280:320}function xh(e,t){return V(e,{center:{appearDuration:an,hideDuration:an,hideTranslate:[0,lS],appearTranslate:[0,0],fade:!0,easing:zr},right:{appearDuration:Kc(t.getBoundingClientRect().width),hideDuration:Nc(t.getBoundingClientRect().width),hideTranslate:[t.getBoundingClientRect().width,0],appearTranslate:[0,0],fade:!1,easing:zr},bottom:{appearDuration:Kc(t.getBoundingClientRect().height),hideDuration:Nc(t.getBoundingClientRect().height),hideTranslate:[0,t.getBoundingClientRect().height],appearTranslate:[0,0],fade:!1,easing:zr},left:{appearDuration:Kc(t.getBoundingClientRect().height),hideDuration:Nc(t.getBoundingClientRect().height),hideTranslate:[-t.getBoundingClientRect().width,0],appearTranslate:[0,0],fade:!1,easing:zr}})}function kh([e,t]){return`translate(${e}px, ${t}px)`}function Bh({element:e,transformStart:t,transformEnd:r,opacity:o,duration:n,easing:i}){return new KeyframeEffect(e,[{transform:kh(t),...o?{opacity:o[0]}:{}},{transform:kh(r),...o?{opacity:o[1]}:{}}],{duration:n,easing:i,fill:"forwards"})}function vh(e,t){let{hideTranslate:r,appearTranslate:o,fade:n,appearDuration:i,easing:a}=xh(e,t);return Bh({element:t,duration:i,transformStart:r,transformEnd:o,opacity:n?[0,1]:void 0,easing:a})}function bh(e,t,r){let{hideTranslate:o,fade:n,appearTranslate:i,easing:a,hideDuration:s}=xh(e,t);return Bh({element:t,easing:a,duration:s,transformStart:i,transformEnd:o,opacity:n?[1,0]:void 0})}var dS={layer:{withMods:e=>__getCssClass("xd16ae__layer",e)}};function Th(e,{type:t,onClick:r}){return e`
<div
	class=${dS.layer.withMods({type:t})}
	onclick=${r}
>
</div>`}var mS=e=>new KeyframeEffect(e,[{opacity:0},{opacity:1}],{duration:an,easing:zr,fill:"forwards"}),uS=e=>new KeyframeEffect(e,[{opacity:1},{opacity:0}],{duration:an,easing:zr,fill:"forwards"}),wh=pS();function Dh({html:e,layer:t,props:r}){let o=e.renderIf(Th,()=>r),{element:n}=ga({element:o,getAppearKeyframes:mS,getHideKeyframes:uS});ya({layer:Dr(t),element:n}),_e(()=>{if(!o)return;let i=Dr(t);return i.style.pointerEvents="auto",wh.increment(i),()=>{wh.decrement(i)===0&&(i.style.pointerEvents="")}},[o,t])}function pS(){let e=new Map;function t(o){var i;let n=(i=e.get(o))!=null?i:0;return e.set(o,++n),n}function r(o){var i;let n=(i=e.get(o))!=null?i:0;return e.set(o,--n),n}return{increment:t,decrement:r}}function fS(e,t){switch(e){case"center":return{left:Math.round((window.innerWidth-t.clientWidth)*.5),top:Math.round((window.innerHeight-t.clientHeight)*.5)};case"right":return{top:0,bottom:0,right:0};case"bottom":return{bottom:0,left:0,right:0};case"left":return{top:0,bottom:0,left:0};default:throw L(e),new Error}}function Ca(e,t){let{left:r,top:o,bottom:n,right:i}=fS(e,t),a=s=>De(s)?`${s}px`:"";t.style.top=a(o),t.style.right=a(i),t.style.bottom=a(n),t.style.left=a(r)}var Vc=new Map;function Eh({type:e,element:t,onModalOverlayClick:r}){let o=F(null),n=pa(),i=Le(r),a=ae(()=>(Vc.has(e)||Vc.set(e,[]),m(Vc.get(e))),[e]);t&&o.current===null&&(o.current=a.push({idRef:o,redraw:n,onModalOverlayClick:()=>i.current&&i.current()})-1,o.current&&o.current>=1&&a[o.current-1].redraw()),!t&&o.current===a.length-1&&(o.current&&o.current>=1&&a[o.current-1].redraw(),a.pop(),o.current=null),_e(()=>()=>{o.current!==null&&(a.splice(o.current),o.current=null)},[a]);let s=j(()=>{if(a.length){let c=a[a.length-1];c.onModalOverlayClick&&c.onModalOverlayClick()}},[a]);return{isFirst:o.current===0,activeElement:o.current===a.length-1?t:null,onModalOverlayClick:s}}function Rh(e){H(()=>{if(e){let t=window.document.body,r=t.style.overflow;return t.style.overflow="hidden",()=>{t.style.overflow=r}}},[e])}function Ih({html:e,side:t,createModal:r,close:o,beforeUnmount:n,modalOverlayType:i="default"}){let a=e(r()),s=Mn()?Ch(t):t,{isFirst:c,activeElement:l,onModalOverlayClick:d}=Eh({type:s==="center"?"popup":"sidePanel",element:a,onModalOverlayClick:o});Rh(c),Dh({html:e,layer:"popup",props:c?{type:i,onClick:d}:null});let{element:u}=ga({element:l,getAppearKeyframes:h=>vh(s,h),getHideKeyframes:h=>bh(s,h)});ya({layer:Dr("popup"),element:u,onAppend:h=>Ca(s,h),beforeUnmount:n}),Lc(document.body,()=>a&&Ca(s,a)),Lc(a,()=>a&&Ca(s,a))}function Mh(e,t,r){let[o,n]=Z(1),i=ae(()=>Ue(e),[e]);return H(()=>{if(t.current){let a=t.current,s=r?r.width:a.clientWidth,c=r?r.height:a.clientHeight,l=i.width/s,d=i.height/c;l>1||d>1?n(Math.max(l,d)):n(1)}},[t,i,r]),o}var _r={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};function bo(e,t,r,o,n=!1,i=!0){let a=o||{};Se(e,"keydown",n?null:s=>{s.defaultPrevented||s.keyCode===t&&(a.ctrl===void 0||s.ctrlKey===a.ctrl)&&(a.shift===void 0||s.shiftKey===a.shift)&&(a.metaKey===void 0||s.metaKey===a.metaKey)&&(i&&s.preventDefault(),r(s))})}var Hc={};function To(e){return Hc[e]||(Hc[e]={}),Hc[e]}var hS={input:"x33b88__input"};function ka(e,{browseRef:t,onChange:r,accept:o,multiple:n,autotestId:i}){let a=af();_e(()=>{t.current=()=>a.current.click()},[t,a]);function s(){let l=a.current,d=l.files?[...l.files]:[];l.value="",r(d)}function c(l){l.stopPropagation()}return e`
<input
	save-ref=${a}
	class=${hS.input}
	type='file'
	accept=${o==null?void 0:o.join(", ")}
	multiple=${n}
	onchange=${s}
	onclick=${c}
	data-at=${he(i)}
>`}function Ah(){return F(()=>{})}function Sa(e){return{browseRef:Ah(),accept:lh().map(r=>`.${r}`),onChange:r=>{r.length&&e(r[0])}}}function Fh(e){return e`
<svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="39" cy="55" r="6" fill="currentColor"/><path d="M13 82h5v15h3v-7h3v10h-6v11h-5V96H7V84h3v9h3V82z" fill="#fff"/><path d="M13 82h5v15h3v-7h3v10h-6v11h-5V96H7V84h3v9h3V82z" fill="currentColor" fill-opacity=".6"/><path d="m95 61 42 50H53l42-50z" fill="#fff"/><path d="m95 61 42 50H53l42-50z" fill="currentColor" fill-opacity=".68"/><path d="m57 75 30 36H27l30-36z" fill="#fff"/><path d="m57 75 30 36H27l30-36z" fill="currentColor" fill-opacity=".24"/><path fill-rule="evenodd" clip-rule="evenodd" d="M34.419 111.001h-2.577c6.816-2.376 11.236-8.42 15.233-14.827.6-.962 1.192-1.933 1.78-2.899 1.785-2.93 3.545-5.82 5.452-8.29 1.842-2.386 3.853-4.424 6.21-5.762l.652.781c-2.259 1.242-4.222 3.198-6.07 5.592-1.87 2.422-3.589 5.243-5.366 8.16v.001c-.594.975-1.194 1.961-1.81 2.947-3.559 5.704-7.585 11.363-13.504 14.297zm11.531 0h-1.586c1.146-.872 2.199-1.881 3.184-2.988 2.575-2.896 4.66-6.433 6.707-9.908l.064-.107c2.054-3.487 4.084-6.918 6.524-9.438 1.396-1.441 2.937-2.596 4.704-3.301l.678.812c-1.742.628-3.262 1.738-4.663 3.185-2.341 2.417-4.312 5.736-6.382 9.25l-.087.148c-2.03 3.445-4.157 7.054-6.798 10.023a24.943 24.943 0 0 1-2.345 2.324zm10.222 0h-1.44a17.107 17.107 0 0 0 1.818-1.933c1.554-1.902 3.014-4.285 4.55-6.792l.599-.974c1.749-2.842 3.614-5.77 5.806-8.176a21.594 21.594 0 0 1 2.576-2.427l.64.768c-.87.684-1.692 1.47-2.477 2.332-2.12 2.328-3.943 5.181-5.694 8.027l-.592.965-.001.002-.004.006c-1.53 2.497-3.028 4.943-4.629 6.902-.375.458-.758.894-1.152 1.3zm8.87 0h-1.586c2.453-1.905 4.676-4.281 6.515-6.795 1.852-2.531 3.297-5.178 4.185-7.581.09-.247.176-.49.255-.73l.748.897-.065.18c-.925 2.502-2.418 5.23-4.316 7.824-1.632 2.231-3.576 4.379-5.735 6.205zm9.686 0h-1.21l.116-.171c1.739-2.56 3.703-5.166 6.777-7.735l.64.768c-2.834 2.369-4.692 4.767-6.323 7.138zm7.01 0h-1.614a46.061 46.061 0 0 1 4.3-3.09l.646.775a47.918 47.918 0 0 0-3.332 2.315z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M34.419 111.001h-2.577c6.816-2.376 11.236-8.42 15.233-14.827.6-.962 1.192-1.933 1.78-2.899 1.785-2.93 3.545-5.82 5.452-8.29 1.842-2.386 3.853-4.424 6.21-5.762l.652.781c-2.259 1.242-4.222 3.198-6.07 5.592-1.87 2.422-3.589 5.243-5.366 8.16v.001c-.594.975-1.194 1.961-1.81 2.947-3.559 5.704-7.585 11.363-13.504 14.297zm11.531 0h-1.586c1.146-.872 2.199-1.881 3.184-2.988 2.575-2.896 4.66-6.433 6.707-9.908l.064-.107c2.054-3.487 4.084-6.918 6.524-9.438 1.396-1.441 2.937-2.596 4.704-3.301l.678.812c-1.742.628-3.262 1.738-4.663 3.185-2.341 2.417-4.312 5.736-6.382 9.25l-.087.148c-2.03 3.445-4.157 7.054-6.798 10.023a24.943 24.943 0 0 1-2.345 2.324zm10.222 0h-1.44a17.107 17.107 0 0 0 1.818-1.933c1.554-1.902 3.014-4.285 4.55-6.792l.599-.974c1.749-2.842 3.614-5.77 5.806-8.176a21.594 21.594 0 0 1 2.576-2.427l.64.768c-.87.684-1.692 1.47-2.477 2.332-2.12 2.328-3.943 5.181-5.694 8.027l-.592.965-.001.002-.004.006c-1.53 2.497-3.028 4.943-4.629 6.902-.375.458-.758.894-1.152 1.3zm8.87 0h-1.586c2.453-1.905 4.676-4.281 6.515-6.795 1.852-2.531 3.297-5.178 4.185-7.581.09-.247.176-.49.255-.73l.748.897-.065.18c-.925 2.502-2.418 5.23-4.316 7.824-1.632 2.231-3.576 4.379-5.735 6.205zm9.686 0h-1.21l.116-.171c1.739-2.56 3.703-5.166 6.777-7.735l.64.768c-2.834 2.369-4.692 4.767-6.323 7.138zm7.01 0h-1.614a46.061 46.061 0 0 1 4.3-3.09l.646.775a47.918 47.918 0 0 0-3.332 2.315z" fill="currentColor" fill-opacity=".5"/><path d="M145 87h4v13h2v-6.5h3v9.5h-5v8h-4V99h-5V89h3v7h2v-9z" fill="#fff"/><path d="M145 87h4v13h2v-6.5h3v9.5h-5v8h-4V99h-5V89h3v7h2v-9z" fill="currentColor" fill-opacity=".6"/></svg>
`}function Ph(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 0a1 1 0 0 1 1 1v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 1 1-2 0V5h-2a1 1 0 1 1 0-2h2V1a1 1 0 0 1 1-1zm-6 4a1 1 0 0 1-1 1H2v11h13v-5a1 1 0 1 1 2 0v5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7a1 1 0 0 1 1 1zM3.5 9.25a1.25 1.25 0 1 0 2.5 0 1.25 1.25 0 0 0-2.5 0zm8.945.863a1 1 0 0 0-1.307-.092L8.5 12l-1.178-.587a1 1 0 0 0-.96.037L3.5 13.166V14.5h10v-3.332l-1.055-1.055z" fill="currentColor"/></svg>
`}var Gr={text:{ratioX:1,ratioY:1},image:{ratioX:1,ratioY:1},imageWithText:{ratioX:1.7,ratioY:1}};var Wc={imageSelection:"x9c461__image-selection",imageContainer:{withMods:e=>__getCssClass("x9c461__image-container",e)},image:{withMods:e=>__getCssClass("x9c461__image",e)}};function gS(e){return e`
<img
	class=${Wc.imageSelection}
	src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="
	tabIndex="-1"
	aria-hidden=true
	draggable=false
/>
`}function yS(e,{image:t,withImageSelection:r,width:o,height:n,onClick:i,withZoom:a}){let s=Tm(t),c=o&&n?`width: ${o}px; height: ${n}px;`:"";return e`
<div
	class=${Wc.image.withMods({withZoom:!!a})}
	style=${`
	    ${c}
		background: url(${kt(t.src)}) no-repeat;
		background-size: ${s.width}% ${s.height}%;
		background-position: ${s.positionX}% ${s.positionY}%;`}
	onclick=${i}
>
	${e.renderIf(gS,()=>r)}
</div>
`}function _S(e,{image:t,withSize:r,withBackdrop:o,withImageSelection:n,withZoom:i,containerRef:a,containerLimit:s,className:c="",onClick:l}){let d=de(),u=ae(()=>Ue(t),[t]),h=Mh(t,a||d,s);return e`
<div
	class=${c+" "+Wc.imageContainer.withMods({fill:!r,origin:!!r,backdrop:!!o})}
	save-ref=${d}
>
	${e(yS,{image:t,withZoom:i,withImageSelection:n,width:r?u.width/h:void 0,height:r?u.height/h:void 0,onClick:l})}
</div>
`}function Cr(e,{image:t,...r}){let o=ae(()=>({...t,crop:t.crop?t.crop:$s()}),[t]);return Rt(e,f(_S,{...r,image:o}))}var CS={imageTemp:"x11b01__image-temp"};function qr(e,{image:t,imageRatio:r,isTemporary:o}){let n=ae(()=>({...t,crop:t.crop?t.crop:bm(t.width,t.height,r.ratioX,r.ratioY)}),[t,r]),i=de();return H(()=>{o&&i.current.classList.toggle(CS.imageTemp)},[i,o]),Rt(e,f(Cr,{image:n}),i)}var wo={image:"x003b0__image",imageToolbar:"x003b0__image-toolbar",divider:"x003b0__divider",imageContainer:"x003b0__image-container",overlay:"x003b0__overlay"};function kS(e,{image:t,imageRatio:r}){let o=de();return _e(()=>{t.overlay&&t.overlay.color!==We?(o.current.style.background=t.overlay.color,o.current.style.opacity=`${t.overlay.opacity}`):(o.current.style.background="",o.current.style.opacity="")},[t.overlay,o]),e`
<div class=${wo.imageContainer}>
	${e(qr,{image:t,imageRatio:r})}
	<div
		class=${wo.overlay}
		save-ref=${o}
	>
	</div>
</div>
`}function SS(e,{onReplaceImage:t,onDeleteImage:r,onCropImage:o}){return e`
<div class=${wo.imageToolbar}>
	${e(Qe,{style:"ghostInversed",structure:"icon",icon:f(uh),onClick:t,tooltip:B("Common.Editor.ImageControls.MediaToolbar.Replace")})}
	<div class=${wo.divider}></div>
	${e(Qe,{style:"ghostInversed",structure:"icon",icon:f(mh),onClick:o,tooltip:B("Common.Editor.CropImage.TooltipText")})}
	<div class=${wo.divider}></div>
	${e(Qe,{style:"ghostInversed",structure:"icon",icon:f(ph),onClick:r,tooltip:B("Common.Editor.DeleteImage.TooltipText")})}
</div>`}function Oh(e,{imageData:t,imageRatio:r,readonlyMode:o,onUploadImage:n,onDeleteImage:i,onCropImage:a,onOpenFileDialog:s}){let c=Sa(n),l=j(()=>{c.browseRef.current(),s()},[c.browseRef,s]);function d(u){vo(u)}return e`
<div class=${wo.image} oninput=${d}>
	${e.renderIf(ka,()=>!o&&c)}
	${e(kS,{image:t,imageRatio:r})}
	${e.renderIf(SS,()=>!o&&{onReplaceImage:l,onDeleteImage:i,onCropImage:a})}
</div>`}var Do={content:"x8d2e7__content",imageWithDownload:"x8d2e7__image-with-download",imageWithStub:"x8d2e7__image-with-stub",downloadStub:"x8d2e7__download-stub",downloadStubText:"x8d2e7__download-stub-text",stubIcon:"x8d2e7__stub-icon"};function xS(e,{onUploadImage:t,onOpenFileDialog:r}){let o=Sa(t),n=j(()=>{o.browseRef.current(),r()},[o.browseRef,r]);function i(a){vo(a)}return e`
<div
	class=${Do.imageWithDownload}
	oninput=${i}
>
	${e(ka,o)}
	<div
		class=${Do.downloadStub}
		onclick=${n}
	>
		${e(Ph,{})}
		<span class=${Do.downloadStubText}>${B("Roll.Editor.FlipCardsBlock.AddImage.Placeholder")}</span>
	</div>
</div>
	`}function BS(e){return e`
<div class=${Do.imageWithStub}>
	${e(Fh,{},Do.stubIcon)}
</div>
`}function Lh(e,{image:t,imageRatio:r,blobData:o,readonlyMode:n,onUploadImage:i,onOpenFileDialog:a,onDeleteImage:s,onCropImage:c}){return e`
<div class=${Do.content}>
	${e.switch(()=>o?f(qr,{image:o,imageRatio:r,isTemporary:!0}):t?f(Oh,{imageData:t,imageRatio:r,readonlyMode:n,onDeleteImage:s,onUploadImage:i,onOpenFileDialog:a,onCropImage:c}):n?f(BS):f(xS,{onUploadImage:i,onOpenFileDialog:a}))}
</div>`}var Eo=class extends Ye{constructor({cardKey:t,sideType:r,readonlyMode:o,contentType:n}){super(),this._sideType=r,this._readonlyMode=o,this._cardKey=t,this._commonSignalData={cardKey:this._cardKey,sideType:this._sideType},this._image=null,this._contentType=n,this.onUploadImageSignal=this._createSignal(),this.onFileDialogOpenSignal=this._createSignal(),this.onCropImageSignal=this._createSignal(),this.onRemoveImageSignal=this._createSignal(),this._imageBlobData=null}imageBlobData(){return this._imageBlobData}setImageBlobData(t){this._imageBlobData=t}renderImageContent(t,r){return this._image=t,Ce(Lh)({image:t,imageRatio:Gr[this._contentType],blobData:this._imageBlobData,readonlyMode:this._readonlyMode,onUploadImage:this._onUploadImage.bind(this),onOpenFileDialog:this.onFileDialogOpenSignal.toFn(),onDeleteImage:this._onDeleteImage.bind(this),onCropImage:this._onCropImage.bind(this)},r)}_onDeleteImage(){this.onRemoveImageSignal.dispatch(this._commonSignalData)}_onCropImage(){this._image&&this.onCropImageSignal.dispatch({...this._commonSignalData,imageData:this._image,contentType:this._contentType})}_onUploadImage(t){this.onUploadImageSignal.dispatch({...this._commonSignalData,file:t})}};var vS={dndButton:"xba6a5__dnd-button"};function $h(e,{controlBackgroundData:t}){let r=de(),o=j(n=>{let i=Nt(),a=V(n,{dark:i.textAccentDefault,light:i.textOncolorDefault});qe(r.current,"--color",a)},[r]);return H(()=>{Xt({background:t,setStyle:o})},[o,t]),Rt(e,f(hh,{className:vS.dndButton}),r)}var Uc={},kr=class extends E{constructor({flipCardsBlockKey:t,cardData:r,sideData:o,sideType:n,onHyperlinkOverFn:i,readonlyMode:a,canDrag:s,isLock:c,relatedData:l}){super({blockName:"flip-card-side",relatedData:l}),this._flipCardsBlockKey=t,this._cardData=r,this._sideType=n,this._sideData=o,this._canDrag=s,this._onHyperlinkOverFn=i,this._readonlyMode=a,this._isLock=c,this._flipHint=this._renderFlipHint(),this._lastDndControlBackgroundData=null,this.updateModifier("mobile",ed())}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._sheduleRender())}setSideData(t){this._sideData!==t&&(this._sideData=t,this._invalidateFlipHintStyle(),this._sheduleRender())}setCanDrag(t){t!==this._canDrag&&(this._canDrag=t,this._sheduleRender())}_getFlipHintBackgroundData(){throw new Error("_getFlipHintBackgroundData not implemented")}_getDndControlBackgroundData(){throw new Error("_getDndControlBackgroundData not implemented")}_renderCardContent(){}_generateRenderId(t){return`:${t}-${this._cardData.key}-${this._sideType}-${this._sideData.type}`}_renderFlipHint(){return M(Uc,this._generateRenderId("flip-card-flip-button"))`
<div
	class='card-flip-hint'
	onconnected=${()=>this._invalidateFlipHintStyle()}
>
	${Ce(ua)({},this._renderFunctionEx(this._generateRenderId("flip-card-flip-button-icon")))}
</div>
		`}_renderDndControl(){let t=this._getDndControlBackgroundData();return(!this._lastDndControlBackgroundData||!ls(t,this._lastDndControlBackgroundData))&&(this._lastDndControlBackgroundData=t),M(Uc,this._generateRenderId("flip-card-dnd"))`
<div
	class='card-dnd-control'
	draggable="true"
>
	${Ce($h)({controlBackgroundData:this._lastDndControlBackgroundData},this._renderFunctionEx(this._generateRenderId("flip-card-dnd-button")))}
</div>
		`}_invalidateFlipHintStyle(){if(!this._flipHint)return;let t=r=>{let o=Nt(),n=V(r,{dark:{background:o.overlayHovered,color:o.iconPlaceholder},light:{background:o.overlayModalsDefault,color:o.iconOncolorSecondary}});qe(this._flipHint,"--color",n.color),qe(this._flipHint,"--background",n.background)};Xt({background:this._getFlipHintBackgroundData(),setStyle:t})}_render(){return M(Uc,this._generateRenderId("flip-card-side"))`
<div class=${this._getCssClasses()}>
	${this._renderCardContent()}
	${this._readonlyMode||!this._canDrag?null:this._renderDndControl()}
	${this._readonlyMode?this._renderFlipHint():null}
</div>
		`}};var bS={},sn=class extends kr{constructor({cardData:t,sideData:r,sideType:o,onHyperlinkOverFn:n,readonlyMode:i,isLock:a,relatedData:s,flipCardsBlockKey:c,canDrag:l}){super({flipCardsBlockKey:c,cardData:t,sideData:r,sideType:o,onHyperlinkOverFn:n,readonlyMode:i,isLock:a,relatedData:s,canDrag:l}),this._sideWithImageHelper=new Eo({readonlyMode:i,cardKey:t.key,sideType:o,contentType:"image"})}onUploadImageSignal(){return this._sideWithImageHelper.onUploadImageSignal}onCropImageSignal(){return this._sideWithImageHelper.onCropImageSignal}onRemoveImageSignal(){return this._sideWithImageHelper.onRemoveImageSignal}onFileDialogOpenSignal(){return this._sideWithImageHelper.onFileDialogOpenSignal}setImageBlobData(t){this._sideWithImageHelper.setImageBlobData(t),this._sheduleRender()}setSideData(t){this._sideWithImageHelper.setImageBlobData(null),super.setSideData(t)}_getFlipHintBackgroundData(){return nn(this._sideData.image)}_getDndControlBackgroundData(){return nn(this._sideData.image)}_renderCardContent(){return M(bS,`:flip-card-side-content-${this._cardData.key}-${this._sideType}-${this._sideData.type}`)`
<div class='image-side-content'>
	${this._sideWithImageHelper.renderImageContent(this._sideData.image,this._renderFunctionEx(`:flip-card-side-content-image-${this._cardData.key}-${this._sideType}-${this._sideData.type}`))}
</div>
		`}};function xa(e,t,r){let o={"font-size":"","caret-color":"","line-height":""};if(_a(e)!==0)return o;let n=t==null?void 0:t.style;if(n){let i=te.getFontSize(n);if(i&&i!=="auto"&&(o["font-size"]=`${i}px`,o["line-height"]=r(i)),!Jl()){let a=te.getFontColor(n);a&&(o["caret-color"]=a)}}return o}var Ba=class extends mt{constructor({paragraph:t,bemInfo:r,blockBeforeType:o,idPrefix:n,placeholder:i,prompt:a,paragraphIndex:s,flipCardSideRef:c}){super({paragraph:t,bemInfo:r,blockBeforeType:o,idPrefix:n,placeholder:i,prompt:a,paragraphIndex:s}),this._flipCardSideElement=c}getFontSize(t){if(t!=="auto")return t;let r=this._flipCardSideElement.current;if(!r)return 0;let{width:o}=r.getBoundingClientRect();return o>=420?24:o>=260?20:o>=200?18:16}};var TS={},Ro=class extends Ye{constructor({cardKey:t,flipCardsBlockKey:r,sideType:o,contentType:n,onHyperlinkOverFn:i,isLock:a,readonlyMode:s}){super(),this._cardKey=t,this._flipCardsBlockKey=r,this._sideType=o,this._contentType=n,this._onHyperlinkOverFn=i,this._readonlyMode=s,this._isLock=a,this.onSheduleRenderSignal=this._createSignal(),this._cardRef={current:null},this._cardResizeObserver=new ResizeObserver(()=>this._invalidateSideRenderer()),this._paragraphResizeObserver=new ResizeObserver(()=>this._invalidateSideRenderer())}setLockMode(t){this._isLock!==t&&(this._isLock=t)}cardRef(){return this._cardRef}renderParagraphWrapper(t,r,o,n){return M(TS,`:flip-card-side-content-paragraph-${this._cardKey}-${this._sideType}-${this._contentType}`)`
			<div
				contenteditable=${!this._readonlyMode&&!this._isLock}
				class=${this._getParagraphWrapperClasses(r)}
				onscroll=${this._invalidateSideRenderer.bind(this)}
				data-flip-cards-key=${this._flipCardsBlockKey}
				data-card-key=${this._cardKey}
				data-side=${this._sideType}
				data-name="flip-card-text-field"
			>
				${this._renderParagraph(t,r,o,n)}
			</div>
		`}getBackgroundStyles(t){if(t.type!=="color"||t.color===We)return null;let[r,o,n]=Y(t.color),i=t.opacity;return`background: rgba(${r}, ${o}, ${n}, ${i})`}getParagraphStyles(t){return t.type==="image"?{}:xa(t.text,pi(t),na)}getControlBackgroundData(t){return Bo(t)}onConnected(t){this._cardResizeObserver.observe(t);let r=m(t.querySelector(".flip-card-paragraph"));this._paragraphResizeObserver.observe(r)}onDisconnected(){this._cardResizeObserver.disconnect(),this._paragraphResizeObserver.disconnect()}_setPlaceholderColor(t,r){if(!t)return;let o=n=>{let i=Nt(),a=V(n,{dark:i.textSubdued,light:i.textOncolorSecondary});qe(t,"--placeholder-color",a)};Xt({background:Bo(r),setStyle:o})}_renderParagraph(t,r,o,n){let i=$(t);if(!i)throw new Error;let a=At(new Ba({paragraph:i,placeholder:B("Roll.Editor.FlipCardsBlock.Card.TextPlaceholder"),idPrefix:"flip-card-paragraph",flipCardSideRef:this._cardRef}),this._onHyperlinkOverFn,this._readonlyMode,this._isLock);return a.classList.add("flip-card-paragraph"),this._setPlaceholderColor(a,o),ht(a,n),a}_getParagraphWrapperClasses(t){let r=new xe("card-paragraph-wrapper"),o=`${r.className()}`;return o+=` ${r.getModifierWithValueClassName("vertical-align",t)}`,o}_invalidateSideRenderer(){this.onSheduleRenderSignal.dispatch()}};var wS={},cn=class extends kr{constructor({cardData:t,sideData:r,sideType:o,onHyperlinkOverFn:n,readonlyMode:i,isLock:a,relatedData:s,flipCardsBlockKey:c,canDrag:l}){super({flipCardsBlockKey:c,cardData:t,sideData:r,sideType:o,onHyperlinkOverFn:n,readonlyMode:i,isLock:a,relatedData:s,canDrag:l}),this._sideWithImageHelper=new Eo({readonlyMode:i,cardKey:t.key,sideType:o,contentType:"imageWithText"}),this._sideWithTextHelper=new Ro({readonlyMode:i,onHyperlinkOverFn:n,sideType:o,contentType:"imageWithText",cardKey:this._cardData.key,flipCardsBlockKey:c,isLock:a}),this._addSignal(this._sideWithTextHelper.onSheduleRenderSignal,()=>this._sheduleRender())}onUploadImageSignal(){return this._sideWithImageHelper.onUploadImageSignal}onCropImageSignal(){return this._sideWithImageHelper.onCropImageSignal}onRemoveImageSignal(){return this._sideWithImageHelper.onRemoveImageSignal}onFileDialogOpenSignal(){return this._sideWithImageHelper.onFileDialogOpenSignal}setImageBlobData(t){this._sideWithImageHelper.setImageBlobData(t),this._sheduleRender()}setSideData(t){this._sideWithImageHelper.setImageBlobData(null),super.setSideData(t)}setLockMode(t){this._sideWithTextHelper.setLockMode(t),super.setLockMode(t)}_getFlipHintBackgroundData(){return this._sideWithTextHelper.getControlBackgroundData(this._sideData.background)}_getDndControlBackgroundData(){return nn(this._sideData.image)}_onConnected(){let t=this.domElement();this._sideWithTextHelper.onConnected(t)}_onDisconnected(){this._sideWithTextHelper.onDisconnected()}_renderCardContent(){let t=this._sideData.text;return M(wS,`:flip-card-side-content-${this._cardData.key}-${this._sideType}-${this._sideData.type}`)`
<div
	class='image-with-text-side-content'
	save-ref=${this._sideWithTextHelper.cardRef()}
	onconnected=${this._onConnected.bind(this)}
	ondisconnected=${this._onDisconnected.bind(this)}
>
	<div class='image-wrapper'>
		${this._sideWithImageHelper.renderImageContent(this._sideData.image,this._renderFunctionEx(`:flip-card-side-content-image-${this._cardData.key}-${this._sideType}-${this._sideData.type}`))}
	</div>
	<div
		class='text-wrapper'
		style=${this._sideWithTextHelper.getBackgroundStyles(this._sideData.background)}
	>
		${this._sideWithTextHelper.renderParagraphWrapper(t,this._sideData.verticalTextAlign,this._sideData.background,this._sideWithTextHelper.getParagraphStyles(this._sideData))}
	</div>
</div>
		`}};var DS={},va=class extends E{constructor(t,r,o){super({blockName:"text-side-background-image"}),this._cardKey=t,this._sideType=r,this._backgroundImageBlobData=null,this._imageBackground=o.type==="image"?o:null}setBackgroundImageBlobData(t){this._backgroundImageBlobData=t,this._sheduleRender()}setBackgroundImageData(t){this._imageBackground=t,this._sheduleRender()}hasImageOnBackground(){return!!this._imageBackground||!!this._backgroundImageBlobData}_getBackgroundImageOverlayStyles(){var a;let t=(a=this._imageBackground)==null?void 0:a.overlay;if(!t||t.color===We)return null;let[r,o,n]=Y(t.color),i=t.opacity;return`background: rgba(${r}, ${o}, ${n}, ${i})`}_renderBlobBackgroundImage(){if(!this._backgroundImageBlobData)return null;let t={image:this._backgroundImageBlobData,imageRatio:{ratioX:Gr.text.ratioX,ratioY:Gr.text.ratioY},isTemporary:!0};return Ce(qr)(t)}_renderBackgroundImage(){if(this._backgroundImageBlobData)return this._renderBlobBackgroundImage();if(!this._imageBackground)return null;let t={image:this._imageBackground.image,imageRatio:{ratioX:Gr.text.ratioX,ratioY:Gr.text.ratioY}};return Ce(qr)(t,this._renderFunctionEx(`:flip-card-side-image-${this._cardKey}-${this._sideType}`))}_render(){return M(DS,`:flip-card-side-background-image-${this._cardKey}-${this._sideType}`)`
<div class="text-side-background-image">
	${this._renderBackgroundImage()}
	<div
		class="text-side-background-image-overlay"
		style=${this._getBackgroundImageOverlayStyles()}
	>
	</div>
</div>
		`}};var ES={},ln=class extends kr{constructor({cardData:t,sideData:r,sideType:o,onHyperlinkOverFn:n,readonlyMode:i,relatedData:a,flipCardsBlockKey:s,isLock:c,canDrag:l}){super({flipCardsBlockKey:s,cardData:t,sideData:r,sideType:o,onHyperlinkOverFn:n,readonlyMode:i,relatedData:a,isLock:c,canDrag:l}),this._backgroundImage=new va(t.key,o,r.background),this._sideWithTextHelper=new Ro({readonlyMode:i,onHyperlinkOverFn:n,sideType:o,contentType:"text",cardKey:this._cardData.key,flipCardsBlockKey:s,isLock:c}),this._addSignal(this._sideWithTextHelper.onSheduleRenderSignal,()=>this._sheduleRender())}_getFlipHintBackgroundData(){return this._sideWithTextHelper.getControlBackgroundData(this._sideData.background)}_getDndControlBackgroundData(){return this._sideWithTextHelper.getControlBackgroundData(this._sideData.background)}setLockMode(t){this._sideWithTextHelper.setLockMode(t),super.setLockMode(t)}setBackgroundImageBlobData(t){this._backgroundImage.setBackgroundImageBlobData(t),this._sheduleRender()}setSideData(t){t.background.type==="image"?this._backgroundImage.setBackgroundImageData(t.background):this._backgroundImage.setBackgroundImageData(null),this._backgroundImage.setBackgroundImageBlobData(null),super.setSideData(t)}_getBackgroundStyles(){let t=this._sideData.background;if(t.type!=="color"||this._backgroundImage.hasImageOnBackground()||t.color===We)return null;let[o,n,i]=Y(t.color),a=t.opacity;return`background: rgba(${o}, ${n}, ${i}, ${a})`}_onConnected(){let t=this.domElement();this._sideWithTextHelper.onConnected(t)}_onDisconnected(){this._sideWithTextHelper.onDisconnected()}_renderCardContent(){let t=this._sideData.text;return M(ES,`:flip-card-side-content-${this._cardData.key}-${this._sideType}-${this._sideData.type}`)`
<div
	class='text-side-content'
	save-ref=${this._sideWithTextHelper.cardRef()}
	onconnected=${this._onConnected.bind(this)}
	ondisconnected=${this._onDisconnected.bind(this)}
	style=${this._getBackgroundStyles()}
>
	${this._backgroundImage.domElement()}
	${this._sideWithTextHelper.renderParagraphWrapper(t,this._sideData.verticalTextAlign,this._sideData.background,this._sideWithTextHelper.getParagraphStyles(this._sideData))}
</div>
		`}};var Kh=12,RS={},Zt=new WeakMap,ba=class extends E{constructor({flipCardsBlockKey:t,cardData:r,onHyperlinkOverFn:o,canDrag:n,readonlyMode:i,isLock:a,relatedData:s}){super({blockName:"flip-card",relatedData:s}),this._flipCardsBlockKey=t,this._cardData=r,this._readonlyMode=i,this._isLock=a,this._canDrag=n,this._onHyperlinkOverFn=o,this._activeSideType="front",this.onClickSignal=this._createSignal(),this.onMouseEnterSignal=this._createSignal(),this.onMouseLeaveSignal=this._createSignal(),this.onUploadImageSignal=this._createSignal(),this.onCropImageSignal=this._createSignal(),this.onRemoveImageSignal=this._createSignal(),this.onFileDialogOpenSignal=this._createSignal(),this._frontSideRenderer=this._getSideRenderer("front"),this._backSideRenderer=this._getSideRenderer("back"),this.updateModifier("active-side",this._activeSideType),this.updateModifier("readonly",this._readonlyMode)}key(){return this._cardData.key}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._frontSideRenderer.setLockMode(t),this._backSideRenderer.setLockMode(t))}setCardData(t){t!==this._cardData&&(this._cardData=t,this._invalidateSidesRenderer(),this._sheduleRender())}setCanDrag(t){t!==this._canDrag&&(this._canDrag=t,this._invalidateSidesRenderer(),this._sheduleRender())}activeSide(){return this._activeSideType}setActiveSide(t){this._activeSideType!==t&&(this._activeSideType=t,this.updateModifier("active-side",t))}setImageBlobOnActiveSide(t){let r=this._getActiveSideRenderer();(r instanceof sn||r instanceof cn)&&r.setImageBlobData(t)}setBackgroundImageBlobOnActiveSide(t){let r=this._getActiveSideRenderer();r instanceof ln&&r.setBackgroundImageBlobData(t)}_getActiveSideRenderer(){return V(this._activeSideType,{front:this._frontSideRenderer,back:this._backSideRenderer})}_invalidateSidesRenderer(){this._frontSideRenderer=this._getSideRenderer("front"),this._backSideRenderer=this._getSideRenderer("back")}_addSideRendererClassname(t,r){let o=V(r,{front:"front-side",back:"back-side"});t.addBemInfo(o)}_createImageSideRenderer(t,r){let o=To(`FlipCardSideRenderer-${this._cardData.key}-${t}-${r.type}`);if(Zt.has(o)){let i=m(Zt.get(o));return i.setSideData(r),i.setCanDrag(this._canDrag),i}let n=new sn({flipCardsBlockKey:this._flipCardsBlockKey,cardData:this._cardData,sideType:t,sideData:r,isLock:this._isLock,readonlyMode:this._readonlyMode,onHyperlinkOverFn:this._onHyperlinkOverFn,relatedData:o,canDrag:this._canDrag});return this._addSideRendererClassname(n,t),Zt.set(o,n),this._readonlyMode||this._invalidateImageChangeDispatcher(n),n}_createTextSideRenderer(t,r){let o=To(`FlipCardSideRenderer-${this._cardData.key}-${t}-text`);if(Zt.has(o)){let i=m(Zt.get(o));return i.setSideData(r),i.setCanDrag(this._canDrag),i}let n=new ln({flipCardsBlockKey:this._flipCardsBlockKey,cardData:this._cardData,sideType:t,sideData:r,readonlyMode:this._readonlyMode,isLock:this._isLock,onHyperlinkOverFn:this._onHyperlinkOverFn,relatedData:o,canDrag:this._canDrag});return this._addSideRendererClassname(n,t),Zt.set(o,n),n}_createImageWithTextSideRenderer(t,r){let o=To(`FlipCardSideRenderer-${this._cardData.key}-${t}-${r.type}`);if(Zt.has(o)){let i=m(Zt.get(o));return i.setSideData(r),i.setCanDrag(this._canDrag),i}let n=new cn({flipCardsBlockKey:this._flipCardsBlockKey,cardData:this._cardData,sideType:t,sideData:r,readonlyMode:this._readonlyMode,isLock:this._isLock,onHyperlinkOverFn:this._onHyperlinkOverFn,relatedData:o,canDrag:this._canDrag});return this._addSideRendererClassname(n,t),Zt.set(o,n),this._readonlyMode||this._invalidateImageChangeDispatcher(n),n}_getSideRenderer(t){let r=this._getCardSideData(t);return V(r.type,{image:()=>this._createImageSideRenderer(t,r),text:()=>this._createTextSideRenderer(t,r),imageWithText:()=>this._createImageWithTextSideRenderer(t,r)})()}_getCardSideData(t){return V(t,{front:this._cardData.frontSide,back:this._cardData.backSide})}_invalidateImageChangeDispatcher(t){this._addSignal(t.onUploadImageSignal(),this.onUploadImageSignal.toFn()),this._addSignal(t.onFileDialogOpenSignal(),this.onFileDialogOpenSignal.toFn()),this._addSignal(t.onCropImageSignal(),this.onCropImageSignal.toFn()),this._addSignal(t.onRemoveImageSignal(),this.onRemoveImageSignal.toFn())}_onCardClick(t){let r=t.target&&this._checkClickAtLink(t.target);!t.defaultPrevented&&!r&&this.onClickSignal.dispatch(this._cardData.key)}_checkClickAtLink(t){return m(t.parentElement).tagName===yr.A}_onMouseEnter(){this.onMouseEnterSignal.dispatch(this._cardData.key)}_onMouseLeave(){this.onMouseLeaveSignal.dispatch(this._cardData.key)}_render(){let t=this._cardData;return M(RS,`:flip-card-${t.key}`)`
<div
	class=${this._getCssClasses()}
	onclick=${this._onCardClick.bind(this)}
	onmouseenter=${this._onMouseEnter.bind(this)}
	onmouseleave=${this._onMouseLeave.bind(this)}
	data-card-key=${t.key}
>
	<div class='card-flip-container'>
		${this._frontSideRenderer.domElement()}
		${this._backSideRenderer.domElement()}
	</div>
</div>`}};var zc={},Nh=180,IS=468,MS=.93,AS=599,FS="rgba(41, 133, 224, 0.5)";var PS={inner:{defaultScreen:{gap:24,horizontalPadding:0},smallScreen:{gap:20,horizontalPadding:0}},outer:{defaultScreen:{gap:24,horizontalPadding:56},smallScreen:{gap:20,horizontalPadding:20}},"full-width":{defaultScreen:{gap:24,horizontalPadding:56},smallScreen:{gap:20,horizontalPadding:20}}},Gc=new WeakMap,Ta=class extends E{constructor({block:t,readonlyMode:r,isLock:o,onHyperlinkOverFn:n,direction:i}){super({blockName:"flip-cards-list",direction:i}),this._block=t,this._readonlyMode=r,this._isLock=o,this._onHyperlinkOverFn=n,this._activeSide="front",this._cardsRenderers=[],this._resizeObserver=new ResizeObserver(()=>this._invalidateCardsGrid()),this.onUploadCardImageSignal=this._createSignal(),this.onFileDialogOpenSignal=this._createSignal(),this.onPasteFromBufferCardImageSignal=this._createSignal(),this.onAddExternalCardImageSignal=this._createSignal(),this.onCropCardImageSignal=this._createSignal(),this.onRemoveCardImageSignal=this._createSignal(),this.onCardClickSignal=this._createSignal(),this.onCardMouseEnterSignal=this._createSignal(),this.onCardMouseLeaveSignal=this._createSignal(),this.onSelectBlockSignal=this._createSignal(),this._showAddingAnimation=!1,this._transitionStart=!1,this._insertionPointInfo=null,this._placeholderRef={current:null},this._contentWidthChangedSignal=this._createSignal(),this._cardsInRowCount=this._block.maxCardsInRow,this._invalidateCardsRenderers(),Lm(t.key,this._activeSide)}setBlock(t){var r,o,n;this._block!==t&&(((r=this._block.designSettings)==null?void 0:r.background)!==((o=t.designSettings)==null?void 0:o.background)&&this._invalidateInsertionPointColor((n=t.designSettings)==null?void 0:n.background),this._block=t,this._invalidateCardsRenderers(),this._invalidateCardsGrid(),this._sheduleRender())}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._cardsRenderers.forEach(r=>r.setLockMode(t)))}getCardRendererByKey(t){return this._cardsRenderers.find(r=>r.key()===t)||null}setCardsActiveSide(t){this._activeSide=t,this._cardsRenderers.forEach(r=>r.setActiveSide(t))}insertionPointInfo(){return this._insertionPointInfo}clearInsertionPointInfo(){this._insertionPointInfo&&(this._insertionPointInfo=null,this._resetCardsShift(),this._sheduleRender())}setInsertionPointInfo(t){(!this._insertionPointInfo||!Jr(this._insertionPointInfo,t))&&(this._insertionPointInfo=t,this._updateCardsShiftByInsertionPoint(),this._sheduleRender())}setAddingAnimationShow(t){this._showAddingAnimation!==t&&(this._showAddingAnimation=t,this._invalidatePlaceholder(),this._invalidateCardsGrid())}contentWidthChangedSignal(){return this._contentWidthChangedSignal}_invalidatePlaceholder(){let t=this._placeholderRef.current;!t||(this._showAddingAnimation?this._showPlaceholderWithAnimation(t):this._playHideAddingAnimation(t))}_playShowAddingAnimation(t){Oe(()=>{t.style.setProperty("transform","scale(1)")})}_invalidatePlaceholderVisibility(){Oe(()=>{this._transitionStart||this._hidePlaceholder()})}_playHideAddingAnimation(t){getComputedStyle(t).display==="block"&&Oe(()=>{t.style.setProperty("transform","scale(0)"),this._invalidatePlaceholderVisibility()})}_invalidateCardsRenderers(){let t=[];ot(this._block.cardsBlockMap,r=>{let o=this._createFlipCard(r);t.push(o)}),this._cardsRenderers=t}_createFlipCard(t){let r=t.key,o=$t(this._block.cardsBlockMap)>1,n=To(`FlipCardRenderer${r}`);if(Gc.has(n)){let a=m(Gc.get(n));return a.setCardData(t),a.setCanDrag(o),a}let i=new ba({flipCardsBlockKey:this._block.key,cardData:t,onHyperlinkOverFn:this._onHyperlinkOverFn,readonlyMode:this._readonlyMode,isLock:this._isLock,relatedData:n,canDrag:o});return i.setActiveSide(this._activeSide),Gc.set(n,i),this._invalidateMouseEventDispatcher(i),this._readonlyMode||this._invalidateImageChangedDispatcher(i),i}_getGridParams(t){let{defaultScreen:r,smallScreen:o}=PS[this._block.cardsLayout];return t>AS?r:o}_invalidateCardsGrid(){let t=O.getFlipCardsCount(this._block);this._showAddingAnimation&&(t+=1);let r=Math.min(this._block.maxCardsInRow,t),o=this.domElement(),n=o.closest(`div[data-wrapper-key="${this._block.key}"]`),{gap:i,horizontalPadding:a}=this._getGridParams(n.offsetWidth),s=a*2,c=Math.floor((o.offsetWidth+i-s)/(Nh+i)),l=Math.min(r,c);this._cardsInRowCount=l,o.style.setProperty("grid-template-columns",`repeat(${l}, minmax(${Nh}px, ${IS}px))`),o.style.setProperty("padding-inline",`${a}px`),o.style.setProperty("gap",`${i}px`),Oe(()=>this._invalidateContentWidthChanged())}_invalidateContentWidthChanged(){let t=this._getCardsContainerGap(),r=this._cardsInRowCount,o=Q.getFirstCard(this._block),n=m(this.getCardRendererByKey(o.key)),i=r*n.domElement().offsetWidth+(r-1)*t;this._contentWidthChangedSignal.dispatch(this._insertionPointInfo?i+Kh*2:i)}_setCardsShift(t,r){t.forEach(o=>o&&o.updateModifier("shift",r))}_resetCardsShift(){this._setCardsShift(this._cardsRenderers,null),this._invalidateContentWidthChanged()}_updateCardsShiftByInsertionPoint(){if(this._resetCardsShift(),!this._insertionPointInfo)return;let{insertBefore:t,insertionElementKey:r}=this._insertionPointInfo,o=this._block.cardsBlockMap.order,n=o.indexOf(r),i=this._getCardIndexInRow(n),a=n-i,s=n+(this._cardsInRowCount-i),c=t?n:n+1,l=o.slice(a,c),d=o.slice(c,s),u=(h,S)=>{let R=h.map(this.getCardRendererByKey.bind(this));this._setCardsShift(R,S)};u(l,"left"),u(d,"right"),this._invalidateContentWidthChanged()}_invalidateMouseEventDispatcher(t){this._addSignal(t.onClickSignal,this.onCardClickSignal.toFn()),this._addSignal(t.onMouseEnterSignal,this.onCardMouseEnterSignal.toFn()),this._addSignal(t.onMouseLeaveSignal,this.onCardMouseLeaveSignal.toFn())}_invalidateImageChangedDispatcher(t){this._addSignal(t.onUploadImageSignal,this.onUploadCardImageSignal.toFn()),this._addSignal(t.onFileDialogOpenSignal,this.onFileDialogOpenSignal.toFn()),this._addSignal(t.onCropImageSignal,this.onCropCardImageSignal.toFn()),this._addSignal(t.onRemoveImageSignal,this.onRemoveCardImageSignal.toFn())}_onConnected(){var t;this._resizeObserver.observe(document.body),this._invalidateInsertionPointColor((t=this._block.designSettings)==null?void 0:t.background)}_onDisconnected(){this._resizeObserver.unobserve(document.body),this._showAddingAnimation=!1,this._hidePlaceholder()}_invalidatePlaceholderColor(){var n;let t=this._placeholderRef.current;if(!t)return;let r=i=>{let a=Nt(),s=V(i,{dark:a.borderDefault,light:a.borderOncolorDefault});qe(t,"--placeholder-color",s)},o=(n=this._block.designSettings)==null?void 0:n.background;Xt({background:Bo(o?{type:"color",...o}:null),lightnessLimitValue:MS,setStyle:r})}_invalidateInsertionPointColor(t){if(!this._wasRendered())return;let r=this.domElement(),o=n=>{let i=Nt(),a=V(n,{dark:FS,light:i.iconOncolorDefault});qe(r,"--insertion-target-color",a)};Xt({background:Bo(t?{type:"color",...t}:null),setStyle:o})}_showPlaceholderWithAnimation(t){this._invalidatePlaceholderColor(),t.style.setProperty("display","block"),this._playShowAddingAnimation(t)}_hidePlaceholder(){let t=this._placeholderRef.current;!t||t.style.setProperty("display","none")}_onPlaceholderTransitionEnd(){this._transitionStart=!1,this._showAddingAnimation||this._hidePlaceholder()}_onMousedown(t){t.target===this.domElement()&&(t.preventDefault(),this.onSelectBlockSignal.dispatch())}_getInsertionPointStyles(){var S;let t={};if(!this._insertionPointInfo)return t;let{insertBefore:r,insertionElementKey:o}=this._insertionPointInfo,n=(S=this.getCardRendererByKey(o))==null?void 0:S.domElement();if(!n)return t;let i=n.offsetHeight,a=n.offsetWidth,s=n.offsetTop,c=n.offsetLeft;t.height=`${i}px`,t.top=`${s}px`;let l=this._getCardsContainerGap(),d=parseFloat(m(window.getComputedStyle(n).marginInlineStart)),u=l/2,h=c-d;return this._direction==="rtl"&&(h=this.domElement().offsetWidth-c-a-d),r?t["inset-inline-start"]=`${h-u}px`:t["inset-inline-start"]=`${h+a+u}px`,t}_getCardIndexInRow(t){return t%this._cardsInRowCount}_getCardsContainerGap(){let t=this.domElement(),r=m(window.getComputedStyle(t));return r.gap?parseFloat(r.gap):0}_renderInsertionPoint(){return!this._wasRendered()||!this._insertionPointInfo?null:M(zc,`:insertion-point-${this._block.key}`)`
<div
	class="insertion-target"
	style=${this._getInsertionPointStyles()}
>
</div>
		`}_renderNewCardPlaceholder(){return M(zc,`:new-card-placeholder-${this._block.key}`)`
<div
	class="new-card-placeholder"
	style="display: none"
	save-ref=${this._placeholderRef}
	ontransitionstart=${()=>{this._transitionStart=!0}}
	ontransitionend=${this._onPlaceholderTransitionEnd.bind(this)}
></div>`}_render(){let t=this._block;return M(zc,`:flip-cards-list-${t.key}`)`
			<div
				class=${this._getCssClasses()}
				onconnected=${this._onConnected.bind(this)}
				ondisconnected=${this._onDisconnected.bind(this)}
				onmousedown=${this._onMousedown.bind(this)}
			>
				${this._cardsRenderers.map(r=>r.domElement())}
				${this._renderNewCardPlaceholder()}
				${this._renderInsertionPoint()}
			</div>`}};var wa=class extends E{constructor({block:t,onHyperlinkOverFn:r,readonlyMode:o,isLock:n,direction:i}){super({blockName:"flip-cards-block",direction:i}),this._block=t,this._cardsListRenderer=new Ta({block:t,onHyperlinkOverFn:r,readonlyMode:o,isLock:n,direction:i}),this.cardsCountChangedSignal=this._createSignal(),this.cardsLayoutChangedSignal=this._createSignal(),this.maxCardsInRowChangedSignal=this._createSignal(),this._invalidateModifiers()}setDirection(t){this._cardsListRenderer.setDirection(t),super.setDirection(t)}setBlock(t){this._block!==t&&($t(t.cardsBlockMap)!==$t(this._block.cardsBlockMap)&&this.cardsCountChangedSignal.dispatch(),t.cardsLayout!==this._block.cardsLayout&&this.cardsLayoutChangedSignal.dispatch(),t.maxCardsInRow!==this._block.maxCardsInRow&&this.maxCardsInRowChangedSignal.dispatch(),this._block=t,this._invalidateModifiers(),this._cardsListRenderer.setBlock(t),this._sheduleRender())}_invalidateModifiers(){this.updateModifier("align",this._block.cardsLayout)}};function Vh(e,t,r){let o=r.getBoundingClientRect(),n=t.getBoundingClientRect(),i=Math.round(o.left-n.left+(o.width-e.clientWidth)*.5);qe(e,"inset-inline-start",`${i}px`)}var Da=class extends gr{constructor(t,r){super({block:"tooltip-with-tail"}),r&&this.addBemInfo(r),this._relatedElement=t,this._addSignal(this.onDidRedraw(),()=>this._reCalcTailPosition()),this.showBelow()}showAbove(){this.updateModifier("show","above")}showBelow(){this.updateModifier("show","below")}_reCalcTailPosition(){Vh(m(this._getChildElement("tail")),this.domElement(),this._relatedElement)}_renderContent(){return this._childHtml("content")`
<div></div>`}_render(){let t=X([this.createChildBemInfo("tail")]);return this._html`
<div class=${this._getCssClasses()} style=${this._getBaseStyles()} onconnected=${()=>this._reCalcTailPosition()}>
	${this._childHtml("tail")`<div class=${t}></div>`}
	${this._renderContent()}
</div>`}};var Ea=class extends E{constructor(){super({blockName:"top-layer"}),this._component=null,this._componentStrategy=null,this._hideSignalKey=null,this._addSignal(this.onDidRedraw(),()=>{this._componentStrategy&&this._componentStrategy.invalidateComponentPosition()})}hide(){this._componentStrategy&&this._componentStrategy.hide()}_showImpl({component:t,componentStrategy:r}){this._component=t,this._componentStrategy=r,this._cleanListeners(),this._hideSignalKey=this._addSignal(this._componentStrategy.hideSignal(),()=>this._hideImpl()),this._componentStrategy.beforeShow(),this._sheduleRender()}_hideImpl(){this._cleanListeners(),this._component=null,this._componentStrategy=null,this._sheduleRender()}_cleanListeners(){this._hideSignalKey&&this._removeSignalByKey(this._hideSignalKey),this._hideSignalKey=null}_render(){return this._html`
<div class=${this._getCssClasses()}>
	${this._component}
</div>`}};var Io=class extends Ye{constructor(t){super(),this._component=t,this._hideSignal=this._createSignal()}hide(){let t=this._beforeHide();t?t.addCallOnce(()=>this._hideSignal.dispatch()):this._hideSignal.dispatch()}invalidateComponentPosition(){}beforeShow(){}_beforeHide(){}hideSignal(){return this._hideSignal}};var OS=20,LS=10,Sr=class extends Io{constructor({component:t,relatedElement:r,offsetX:o=OS,offsetY:n=LS}){super(t),this._relatedElement=r,this._offsetX=o,this._offsetY=n}invalidateComponentPosition(){let t=this._relatedElement.getBoundingClientRect();(!t.width||!t.height||!this._relatedElement.parentNode)&&y.warn(`incorrect bounding box (${this._relatedElement.parentNode==null})`),this._component.move(t.left-this._offsetX,t.bottom+this._offsetY);let r=this._component.x()||0;r<0&&(r=this._offsetX),r+this._component.domElement().clientWidth>window.innerWidth&&(r=window.innerWidth-this._offsetX-this._component.domElement().clientWidth);let o=this._component.y()||0;o<0&&(o=this._offsetY),o+this._component.domElement().clientHeight>window.innerHeight&&(o=t.top-this._offsetY-this._component.domElement().clientHeight),this._component.move(r,o)}};var Hh=150,$S=5,KS=10,Ra=class extends Sr{constructor({tooltip:t,relatedElement:r,offsetX:o=$S,offsetY:n=KS,showBelow:i}){super({component:t,relatedElement:r,offsetX:o,offsetY:n}),this._showBelow=i,this._onMouseOutKey=null,this._onComponentMouseOutKey=null,this._onTouchStartKey=null}beforeShow(){this._onMouseOutKey=this._listen(this._relatedElement,U.MOUSEOUT,o=>this._checkForHide(o)),this._onComponentMouseOutKey=this._listen(this._component.domElement(),U.MOUSEOUT,o=>this._checkForHide(o)),this._onTouchStartKey=this._listen(document.body,U.TOUCHSTART,o=>this._checkForHide(o));let t=this._component.domElement(),r=Wr(t);Qt({reducer:r,timingFn:Yi(hr),duration:Hh})}_beforeHide(){return this._onMouseOutKey&&this._unlistenByKey(this._onMouseOutKey),this._onComponentMouseOutKey&&this._unlistenByKey(this._onComponentMouseOutKey),this._onTouchStartKey&&this._unlistenByKey(this._onTouchStartKey),this._playHideAnimation()}invalidateComponentPosition(){let t=this._showBelow,r=this._getTooltip(),o=this._relatedElement.getBoundingClientRect();(!o.width||!o.height||!this._relatedElement.parentNode)&&y.warn(`incorrect bounding box (${this._relatedElement.parentNode==null})`);let n=r.domElement().getBoundingClientRect(),i=o.left+o.width*.5-n.width*.5,a=this._showBelow?o.bottom+this._offsetY:o.top-this._offsetY-n.height;r.move(i,a);let s=r.x()||0;s<0&&(s=this._offsetX),s+n.width>window.innerWidth&&(s=window.innerWidth-this._offsetX-n.width);let c=r.y()||0;c<0&&(c=o.bottom+this._offsetY,t=!0),this._component.move(s,c),t?r.showBelow():r.showAbove()}_checkForHide(t){let r=t.relatedTarget;r instanceof Node&&!this._relatedElement.contains(r)&&!this._component.domElement().contains(r)&&this.hide()}_getTooltip(){return this._component}_playHideAnimation(){let t=this._component.domElement(),r=Wr(t);return Qt({reducer:r,timingFn:hr,duration:Hh,afterAnimation:()=>{this._component.hide()}})}};var Ia=class extends Io{constructor(t){super(t),this._onMouseDownKey=null}invalidateComponentPosition(){}beforeShow(){this._onMouseDownKey=this._listen(document.body,U.MOUSEDOWN,t=>this._onMouseDown(t))}_beforeHide(){return this._onMouseDownKey&&this._unlistenByKey(this._onMouseDownKey),null}_onMouseDown(t){let r=t.target;r instanceof Node&&!this._component.domElement().contains(r)&&this.hide()}};var Ma=class extends Sr{constructor(t){super(t),this._onMouseDownKey=null}beforeShow(){this._onMouseDownKey=this._listen(document.body,U.MOUSEDOWN,t=>this._onMouseDown(t))}_beforeHide(){return this._onMouseDownKey&&this._unlistenByKey(this._onMouseDownKey),null}_onMouseDown(t){let r=t.target;r instanceof Node&&!this._relatedElement.contains(r)&&!this._component.domElement().contains(r)&&this.hide()}};var NS=5,VS=10,Aa=class extends Sr{constructor({tooltip:t,relatedElement:r,offsetX:o=NS,offsetY:n=VS,showBelow:i}){super({component:t,relatedElement:r,offsetX:o,offsetY:n}),this._showBelow=i,this._onMouseOutKey=null,this._onTouchStartKey=null}beforeShow(){this._onMouseOutKey=this._listen(this._relatedElement,U.MOUSEOUT,()=>this.hide()),this._onTouchStartKey=this._listen(document.body,U.TOUCHSTART,t=>this._checkForHide(t))}_beforeHide(){return this._onMouseOutKey&&this._unlistenByKey(this._onMouseOutKey),this._onTouchStartKey&&this._unlistenByKey(this._onTouchStartKey),null}invalidateComponentPosition(){let t=this._showBelow,r=this._getTooltip(),o=this._relatedElement.getBoundingClientRect();(!o.width||!o.height||!this._relatedElement.parentNode)&&y.warn(`incorrect bounding box (${this._relatedElement.parentNode==null})`);let n=r.domElement().getBoundingClientRect(),i=o.left+o.width*.5-n.width*.5,a=this._showBelow?o.bottom+this._offsetY:o.top-this._offsetY-n.height;r.move(i,a);let s=r.x()||0;s<0&&(s=this._offsetX),s+n.width>window.innerWidth&&(s=window.innerWidth-this._offsetX-n.width);let c=r.y()||0;c<0&&(c=o.bottom+this._offsetY,t=!0),this._component.move(s,c),t?r.showBelow():r.showAbove()}_checkForHide(t){let r=t.target;r instanceof Node&&!this._relatedElement.contains(r)&&!this._component.domElement().contains(r)&&this.hide()}_getTooltip(){return this._component}};var Fa=class extends Ea{showPopup(t){this._showImpl({component:t.component,componentStrategy:new Ma(t)})}showTooltip({tooltip:t,relatedElement:r,offsetX:o,offsetY:n,showBelow:i=!0,enableAnimation:a=!1}){let s=a?new Ra({tooltip:t,relatedElement:r,offsetX:o,offsetY:n,showBelow:i}):new Aa({tooltip:t,relatedElement:r,offsetX:o,offsetY:n,showBelow:i});this._showImpl({component:t,componentStrategy:s})}showFreePositioningPopup(t){this._showImpl({component:t,componentStrategy:new Ia(t)})}};function Wh(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 3a1 1 0 1 0-2 0v6H3a1 1 0 0 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3z" fill="currentColor"/></svg>
`}var Ft=(e,t,r)=>pt(e,t,o=>{try{r(o)===!0&&o.preventDefault(),_p()||uc()}catch(n){y.error(n)}});function xr(e,{paragraph:t,idPrefix:r,isLock:o,onHyperlinkOverFn:n,readonlyMode:i,paragraphClassName:a,placeholder:s}){let c=ae(()=>new mt({paragraph:t,idPrefix:r,placeholder:s}),[r,t,s]),l=ae(()=>{let d=At(c,n,i,o);return a&&d.classList.add(...a.split(" ")),d},[c,o,n,i,a]);return e`
<div contenteditable=${!i&&!o} data-name="paragraph-wrapper">
	${l}
</div>`}var Pa={continueContent:{withMods:e=>__getCssClass("x17f33__continue-content",e)},paragraphWrapper:"x17f33__paragraph-wrapper",continueText:"x17f33__continue-text"};function HS(e){let t=Y(e.color);return{background:`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${e.opacity})`}}function WS(e,{paragraph:t,isLock:r,onHyperlinkOverFn:o,readonlyMode:n}){let i=ke(Pa.continueText,"continue-text");return e(xr,{paragraph:t,idPrefix:"continue-block",isLock:r,readonlyMode:n,onHyperlinkOverFn:o,paragraphClassName:i},Pa.paragraphWrapper)}function Uh(e,{block:t,isLock:r,onHyperlinkOverFn:o,onClick:n=()=>{},readonlyMode:i}){let a=ae(()=>HS(t.continueColor),[t.continueColor]),s=Pa.continueContent.withMods({readonly:i});return e`
<div
	class=${s}
	style=${a}
	onclick=${n}
>
	${e(WS,{paragraph:t.paragraph,isLock:r,readonlyMode:i,onHyperlinkOverFn:o},Pa.paragraphWrapper)}
</div>`}var US={},Oa=class extends E{constructor({onHyperlinkOverFn:t,block:r,direction:o}){super({relatedData:US,blockName:"divider-block",direction:o}),this._block=r,this._onHyperlinkOverFn=t,this._invalidateModifiers()}setBlock(t){this._block!==t&&(this._block=t,this._invalidateModifiers(),this._sheduleRender())}_invalidateModifiers(){this.updateModifier("align",this._getDividerAlignment()),this.updateModifier("type",this._block.dividerType)}_getDividerAlignment(){switch(this._block.dividerType){case"line":case"line-with-text":return this._block.alignment;case"arrow":case"quotes":case"diamonds":return"inner"}}};var zS={dividerContainer:"x17200__divider-container"};function Mo(e,{figure:t}){return e`
<div class=${zS.dividerContainer}>
	${e(t)}
</div>`}var GS=16,qS=56;function QS(e){return e`
<svg width=${GS} height=${qS} fill="currentColor">
	<mask id="path-1-inside-1_915_7477" fill="white">
		<path fill-rule="evenodd" clip-rule="evenodd" d="M9.25149 1.25C9.25149 0.559644 8.69185 0 8.00149 0C7.31114 0 6.75149 0.559644 6.75149 1.25V43.25H1.78966C1.00734 43.25 0.527991 44.1078 0.93801 44.7741L7.14854 54.8661C7.53903 55.5006 8.46138 55.5006 8.85186 54.8661L15.0622 44.7741C15.4722 44.1078 14.9929 43.25 14.2105 43.25H9.25149V1.25Z"/>
	</mask>
	<path fill-rule="evenodd" clip-rule="evenodd" d="M9.25149 1.25C9.25149 0.559644 8.69185 0 8.00149 0C7.31114 0 6.75149 0.559644 6.75149 1.25V43.25H1.78966C1.00734 43.25 0.527991 44.1078 0.93801 44.7741L7.14854 54.8661C7.53903 55.5006 8.46138 55.5006 8.85186 54.8661L15.0622 44.7741C15.4722 44.1078 14.9929 43.25 14.2105 43.25H9.25149V1.25Z"/>
	<path d="M6.75149 43.25V44.25H7.75149V43.25H6.75149ZM0.93801 44.7741L0.0863544 45.2982L0.086355 45.2982L0.93801 44.7741ZM7.14854 54.8661L6.29689 55.3902L7.14854 54.8661ZM8.85186 54.8661L9.70352 55.3901L9.70352 55.3901L8.85186 54.8661ZM15.0622 44.7741L14.2105 44.25V44.25L15.0622 44.7741ZM9.25149 43.25H8.25149V44.25H9.25149V43.25ZM8.00149 1C8.13956 1 8.25149 1.11193 8.25149 1.25H10.2515C10.2515 0.0073592 9.24413 -1 8.00149 -1V1ZM7.75149 1.25C7.75149 1.11193 7.86342 1 8.00149 1V-1C6.75885 -1 5.75149 0.0073592 5.75149 1.25H7.75149ZM7.75149 43.25V1.25H5.75149V43.25H7.75149ZM1.78966 44.25H6.75149V42.25H1.78966V44.25ZM1.78966 44.25L1.78966 44.25V42.25C0.225014 42.25 -0.73368 43.9657 0.0863544 45.2982L1.78966 44.25ZM8.0002 54.342L1.78966 44.25L0.086355 45.2982L6.29689 55.3902L8.0002 54.342ZM8.0002 54.342H8.0002L6.29689 55.3902C7.07786 56.6592 8.92256 56.6592 9.70352 55.3901L8.0002 54.342ZM14.2105 44.25L8.0002 54.342L9.70352 55.3901L15.9139 45.2982L14.2105 44.25ZM14.2105 44.25L14.2105 44.25L15.9139 45.2982C16.7339 43.9656 15.7752 42.25 14.2105 42.25V44.25ZM9.25149 44.25H14.2105V42.25H9.25149V44.25ZM8.25149 1.25V43.25H10.2515V1.25H8.25149Z" mask="url(#path-1-inside-1_915_7477)"/>
</svg>`}function zh(e){return Mo(e,{figure:f(QS,{})})}var YS=3,Gh=10,qh=6;function XS(e){let t=(Gh+qh)*YS-qh;return e`
<svg width=${t} height=${Gh} fill="currentColor">
	<polygon points="0 5, 5 10, 10 5, 5 0"/>
	<polygon points="16 5, 21 10, 26 5, 21 0"/>
	<polygon points="32 5, 37 10, 42 5, 37 0"/>
</svg>`}function Qh(e){return Mo(e,{figure:f(XS,{})})}var La=32;function ZS(e){return e`
<svg width=${La} height=${La} fill="currentColor">
	<path d="M8.252 28.704C6.756 28.704 5.532 28.398 4.58 27.786C3.628 27.174 2.846 26.392 2.234 25.44C1.554 24.284 1.078 23.094 0.806 21.87C0.602 20.578 0.5 19.524 0.5 18.708C0.5 15.376 1.35 12.35 3.05 9.63C4.60865 7.13616 6.96757 5.07104 10.1268 3.43463C10.6108 3.18392 11.2007 3.38941 11.4445 3.87694C11.704 4.39597 11.4683 5.02324 10.9526 5.28938C9.247 6.16963 7.7348 7.4125 6.416 9.018C4.92 10.922 4.54672 11.7378 4.30005 13.5C4.05338 15.2622 4.59605 16.362 4.80005 16.974C5.88805 16.09 6.824 15.648 8.252 15.648C10.02 15.648 11.55 16.226 12.842 17.382C14.134 18.538 14.78 20.136 14.78 22.176C14.78 24.08 14.134 25.644 12.842 26.868C11.55 28.092 10.02 28.704 8.252 28.704Z" />
	<path d="M25.252 28.704C23.756 28.704 22.532 28.398 21.58 27.786C20.628 27.174 19.846 26.392 19.234 25.44C18.554 24.284 18.078 23.094 17.806 21.87C17.602 20.578 17.5 19.524 17.5 18.708C17.5 15.376 18.35 12.35 20.05 9.63C21.6087 7.13616 23.9676 5.07104 27.1268 3.43463C27.6108 3.18392 28.2007 3.38941 28.4445 3.87694C28.704 4.39597 28.4683 5.02324 27.9526 5.28938C26.247 6.16963 24.7348 7.4125 23.416 9.018C21.92 10.922 21.5467 11.7378 21.3 13.5C21.0534 15.2622 21.596 16.362 21.8 16.974C22.888 16.09 23.824 15.648 25.252 15.648C27.02 15.648 28.55 16.226 29.842 17.382C31.134 18.538 31.78 20.136 31.78 22.176C31.78 24.08 31.134 25.644 29.842 26.868C28.55 28.092 27.02 28.704 25.252 28.704Z" />
</svg>
`}function jS(e){return e`
<svg width=${La} height=${La} fill="currentColor">
	<path d="M13.918 3.71393L13.338 7.94794C11.83 7.83194 10.728 8.14127 10.032 8.87593C9.336 9.6106 8.91067 10.5966 8.756 11.8339C8.60133 13.0713 8.56267 14.4053 8.64 15.8359H13.918V28.0739H4V13.5159C4 9.9586 4.88933 7.2906 6.668 5.51193C8.48533 3.73327 10.902 3.13393 13.918 3.71393Z" />
	<path d="M27.918 3.71393L27.338 7.94794C25.83 7.83194 24.728 8.14127 24.032 8.87593C23.336 9.6106 22.9107 10.5966 22.756 11.8339C22.6013 13.0713 22.5627 14.4053 22.64 15.8359H27.918V28.0739H18V13.5159C18 9.9586 18.8893 7.2906 20.668 5.51193C22.4853 3.73327 24.902 3.13393 27.918 3.71393Z" />
</svg>
`}function JS(e){switch(e){case"quote_1":return f(ZS);case"quote_2":return f(jS);default:throw L(e,`Unknown quotes divider style: ${e}`),new Error}}function Yh(e,{style:t}){return Mo(e,{figure:JS(t)})}function $a(e,{lineWidth:t=2}){let r=t/2;return e`
<svg width="100%" height=${t}>
	<line x1="0" y1="${r}" x2="100%" y2="${r}" stroke="currentColor" stroke-width=${t} stroke-linecap="round"/>
</svg>`}function Ka(e,{lineWidth:t=2,isReverse:r=!1}){let o=t/2,n=["0","100%"];r&&n.reverse();let[i,a]=n;return e`
<svg width="100%" height=${t}>
	<line x1="${i}" y1="${o}" x2="${a}" y2="${o}" stroke="currentColor" stroke-width=${t} stroke-dasharray="6 6" stroke-linecap="round"/>
</svg>`}function Xh(e,{blockKey:t,lineWidth:r=2}){let o=r/2;return e`
<svg width="100%" height=${r}>
	<line x1="0" y1="${o}" x2="100%" y2="${o}" stroke="url(#linear_gradient_${t})" stroke-width=${r} />
	<defs>
		<linearGradient id="linear_gradient_${t}" x1="100%" y1="0" x2="0" y2="0" gradientUnits="userSpaceOnUse">
			<stop stop-color="currentColor" stop-opacity="0"/>
			<stop offset="0.5" stop-color="currentColor"/>
			<stop offset="1" stop-color="currentColor" stop-opacity="0"/>
		</linearGradient>
	</defs>
</svg>`}function Zh(e,{blockKey:t,lineWidth:r=2,isReverse:o=!1}){let n=r/2,i=[1,0];o&&i.reverse();let[a,s]=i;return e`
<svg width="100%" height=${r}>
	<line x1="0" y1="${n}" x2="100%" y2="${n}" stroke="url(#linear_gradient_${t}_${o})" stroke-width=${r} />
	<defs>
		<linearGradient id="linear_gradient_${t}_${o}" x1="0" y1="0" x2="100%" y2="0" gradientUnits="userSpaceOnUse">
			<stop stop-color="currentColor" stop-opacity="${a}"/>
			<stop offset="1" stop-color="currentColor" stop-opacity="${s}"/>
		</linearGradient>
	</defs>
</svg>`}var ex={dividerContainer:"xdd8a9__divider-container"},tx={lineContainer:"x79258__line-container"};function rx(e,{blockKey:t,style:r,isReverse:o}){return e`
<div class=${tx.lineContainer}>
	${e.switch(()=>{switch(r){case"solid":return f($a,{});case"dotted":return f(Ka,{isReverse:o});case"faded":return f(Xh,{blockKey:t});default:return L(r,`unknown line style ${r}`),null}})}
</div>
`}function jh(e,{block:t,direction:r}){let o=r==="rtl";return e`
<div class=${ex.dividerContainer}>
	${e(rx,{style:t.style,blockKey:t.key,isReverse:o})}
</div>`}var Na={dividerContainer:"xc177b__divider-container",textWrapper:{withMods:e=>__getCssClass("xc177b__text-wrapper",e)},paragraphWrapper:"xc177b__paragraph-wrapper",dividerText:"xc177b__divider-text"},ox={lineContainer:"x79258__line-container"};function Jh(e,{blockKey:t,style:r,isReverse:o}){return e`
<div class=${ox.lineContainer}>
	${e.switch(()=>{switch(r){case"solid":return f($a,{});case"dotted":return f(Ka,{isReverse:o});case"faded":return f(Zh,{blockKey:t,isReverse:o});default:return L(r,`unknown line style ${r}`),null}})}
</div>
`}function nx(e,{paragraph:t,paragraphStyle:r,dividerColor:o,isLock:n,readonlyMode:i,onHyperlinkOverFn:a}){let s=ae(()=>{let d=o.opacity,u=Y(Pe.whiteDefault),h=[...Y(o.color),d],[S,R,w]=ro(u,h);return{background:`rgb(${S}, ${R}, ${w})`}},[o]),c=Na.textWrapper.withMods({style:r}),l=ke(Na.dividerText,"divider-text");return e`
<div class=${c} style=${s}>
	${e(xr,{paragraph:t,idPrefix:"divider-block",isLock:n,readonlyMode:i,onHyperlinkOverFn:a,paragraphClassName:l},Na.paragraphWrapper)}
</div>`}function eg(e,{block:t,onHyperlinkOverFn:r,readonlyMode:o,isLock:n,direction:i}){let a=i==="rtl";return e`
<div class=${Na.dividerContainer}>
	${e(Jh,{style:t.style,blockKey:t.key,isReverse:!a})}
	${e(nx,{paragraph:t.paragraph,paragraphStyle:t.paragraphStyle,dividerColor:t.dividerColor,isLock:n,readonlyMode:o,onHyperlinkOverFn:r})}
	${e(Jh,{style:t.style,blockKey:t.key,isReverse:a})}
</div>`}var tg={dividerContent:"xaca90__divider-content",draggableBackground:"xaca90__draggable-background"};function ix(e){let t=Y(e.color),r=e.opacity;return{color:`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${r})`}}function rg(e,{block:t,isLock:r,onHyperlinkOverFn:o,readonlyMode:n,direction:i}){let a=ae(()=>ix(t.dividerColor),[t.dividerColor]);return e`
<div
	class=${tg.dividerContent}
	style=${a}
>
	${e.switch(()=>{switch(t.dividerType){case"line":return f(jh,{block:t,direction:i});case"line-with-text":return f(eg,{block:t,isLock:r,onHyperlinkOverFn:o,readonlyMode:n,direction:i});case"arrow":return f(zh,{});case"diamonds":return f(Qh,{});case"quotes":return f(Yh,{style:t.style})}})}
	<div class=${tg.draggableBackground} draggable="true"></div>
</div>`}var ax={};function og(e,t,r){let o=t+" embed-block",n=m(uo.toEmbedBlock(e));function i(a){let s=a.target;try{let c=m(s.contentWindow),l=new ResizeObserver(()=>{l.unobserve(c.document.body),r(c.document.body.clientHeight/c.document.body.clientWidth)});l.observe(c.document.body)}catch(c){}}return M(ax,`:embed-${n.key}`)`
<iframe onload=${i} class=${o} src=${n.src} allowfullscreen loading="lazy">
</iframe>`}var dn="gotoNextQuestion";function ng(e){e.on(dn,(t,r)=>{let o=r.selectedQuestionIndex;if(o==r.questionsState.length-1){y.error("Goto next operation isn't  available for last question");return}r.selectedQuestionIndex=o+1})}var qc="gotoPreviousQuestion";function ig(e){e.on(qc,(t,r)=>{let o=r.selectedQuestionIndex;if(o==0){y.error("Goto previous operation isn't  available for first question");return}r.selectedQuestionIndex=o-1})}var Qc="restartExercise";function ag(e){e.on(Qc,(t,r)=>{let o=r.exercise.settings.shuffleAnswers;r.questionsState=r.questionsState.map(n=>Wi.create(n.question,o)),r.selectedQuestionIndex=0})}var Yc="setTypeInAnswer";function sg(e){e.on(Yc,(t,r)=>{let o=m(Ge.selectedQuestionState(r)),n=lt(o);if(!n){y.error(`For question with type: ${o.question.type} not available 'Set type in answer' action`);return}n.contentState.answer=t})}var Xc="submit";function cg(e){e.on(Xc,(t,r)=>{let o=m(Ge.selectedQuestionState(r));o.answered=!0})}var mn="setChoiceCorrect";function lg(e){e.on(mn,(t,r)=>{let o=m(Ge.selectedQuestionState(r)),n=o.question.type,i=It(o);if(!i){y.error(`For question with type: ${n} not available 'Set choice correct' action`);return}i.contentState.choicesState.forEach(s=>{n=="mc"?s.selected=s.choice.key==t:s.choice.key==t&&(s.selected=!s.selected)})})}function sx(e,t){t.forEach(r=>r(e))}function dg(e){let t=(n,i="")=>{let a=r.get(n);a?e(s=>a(i,s)):y.warn(`Unknown action: ${n}`)},r=new Map;return sx({on:(n,i)=>{r.set(n,i)}},[ig,ng,cg,sg,lg,ag]),{dispatch:t}}var{getCssClass:cx}=Re`/src/roll/components/richtext/renderer/exercise/NavigationButton.css`;function Zc(e,t){let r={hidden:!t.visible};return e`
<div
	class=${cx("button",r,t.className)}
	onclick=${t.onClick}
></div>`}function mg(e,{text:t,autotestData:r}){return e`
<div data-at=${he(r)}>
	${t}
</div>`}function ug(e){let[t,r]=Z(!1);return H(()=>{let o=e.current,n=null,i=Ft(o,"mousedown",()=>{n=Ft(window,"mouseup",()=>{r(!1),Bt(n)}),r(!0)});return()=>Ur([n,i])},[e]),t}function pg(e){let[t,r]=Z(!1);return H(()=>{let o=e.current,n=[Ft(o,"mouseover",()=>r(!0)),Ft(o,"mouseout",()=>r(!1))];return()=>Ur(n)},[e]),t}function fg(e,t){let r=F(),o=pg(r),n=ug(r);function i(l){t.onclick&&(l.preventDefault(),t.onclick())}let{getCssClass:a}=t,s={...t.mods,over:o,down:n},c=t.focusable===!1?-1:void 0;return e`
<button
	save-ref=${r}
	disabled=${t.disabled}
	class=${`${a("button",s,t.className)}`}
	onmouseover=${t.onmouseover}
	onmouseout=${t.onmouseout}
	tabindex=${c}
	onclick=${i}
	onkeydown=${t.onkeydown}
	onmousedown=${t.onmousedown}
	data-at=${he(t.autotestData)}
>
	${t.text||""}
</button>`}function Ao(e){let t=vt(e);if(!t)throw new Error("OrderedMap is empty");let r=$(t);if(!r)throw new Error("First block is not paragraph");return r}function lx(e){let t=(a,s)=>(s?a:a.toLowerCase()).trim(),r=e.contentState,o=r.typeIn,n=o.caseSensitive,i=t(r.answer,n);for(let a of o.answers)if(i==t(a.text,n))return!0;return!1}function dx(e){for(let t of e.contentState.choicesState)if(t.selected!=t.choice.correct)return!1;return!0}function hg(e){let t=lt(e);if(t)return lx(t);let r=It(e);return r?dx(r):(y.error(`Unknown question type: ${e.question.type}`),!1)}function gg(e){return e.type=="mc"?e:null}function yg(e){return gg(e.question)?e:null}function _g(e){return e.type=="mr"?e:null}function Cg(e){return _g(e.question)?e:null}function kg(e){let t=It(e);if(t)return!!t.contentState.choicesState.find(n=>n.selected);let r=lt(e);return r?!!r.contentState.answer:(y.error(`Unknown question type: ${e.question.type}`),!1)}var{getCssClass:jc}=Re`/src/roll/components/richtext/renderer/exercise/question/AttachmentRenderer.css`;function mx(e){switch(e.type){case"i":return f(ux,e);case"e":return f(px,e);default:throw L(e.type),new Error("Unknown attachment type")}}function ux(e,t){let r=ae(()=>Ue(t),[t]),o=r.height/r.width;return e`
<div class=${jc("image")} style=${`max-width: ${r.width}px`}>
	<div style=${`padding-bottom: ${o*100}%`}>
		${e(Cr,{image:t})}
	</div>
</div>
`}function px(e,t){return e`
<iframe
	class=${jc("embed-attachment")}
	src=${t.src}
></iframe>`}function Sg(e,t){let r=t.attachment;return e`
<div
	class=${jc("attachment")}
>
	${e.switch(()=>mx(r))}
</div>`}var fx={tooltipLink:"x1059a__tooltip-link"};function hx(e){let t={},r=[];return W.hasStyle(e,"bold")&&(t["font-weight"]="bold"),W.hasStyle(e,"italic")&&(t["font-style"]="italic"),W.hasStyle(e,"underline")&&r.push("underline"),W.hasStyle(e,"strikethrough")&&r.push("line-through"),r.length&&(t["text-decoration"]=r.join(" ")),t}function gx(e,{alignment:t,style:r,text:o}){return t==="superscript"?e`<sup style=${r}>${o}</sup>`:e`<sub style=${r}>${o}</sub>`}function xg(e,{style:t,text:r,alignment:o}){return o?gx(e,{alignment:o,text:r,style:t}):e`<span style=${t}>${r}</span>`}function yx(e,{style:t,text:r,url:o,urlTooltipEnabled:n,alignment:i}){let a=de();Mt({html:e,elementRef:a,text:{html:`<a href=${o} class=${fx.tooltipLink} target="_blank">${o}</a>`},size:"small",show:n,side:"bottom",stayOnHover:!0});let s=f(xg,{alignment:i,text:r,style:t});return e`<a href='${o}' save-ref=${a} target=_blank>${e(s)}</a>`}function _x(e,t,r){let o=hx(e.styles),n=te.getAlignment(e.styles.style),i=e.styles.url,a=e.text;e.isLast&&a.endsWith(`
`)&&(a+=dt.ZERO_WIDTH_SPACE);let s=t.generate(`chunk_${e.text}${i?"_url":"_text"}`);return i?Nr(s,yx,{style:o,text:a,url:i,urlTooltipEnabled:r,alignment:n}):Nr(s,xg,{style:o,text:a,alignment:n})}function Cx(e,t,r){t.length||t.push({text:dt.ZERO_WIDTH_SPACE,styles:W.create(),isLast:!0});let o=new Co;return e.renderAll(t,n=>_x(n,o,r))}function Bg(e,{paragraph:t,placeholder:r="",className:o,autotestData:n,urlTooltipEnabled:i}){let a=k.getTextRuns(t),s=a.length?"":r,c=o&&s?o.split(" ").map(l=>`${l} ${l}_empty`).join(" "):o;return e`<p
	class=${c}
	data-key=${t.key}
	data-placeholder=${s}
	data-at=${he(n)}
>${Cx(e,a,i)}</p>`}var Br={content:"x91b27__content",header:"x91b27__header",subheader:"x91b27__subheader",text:"x91b27__text",defaultParagraph:"x91b27__default-paragraph",exerciseParagraph:"x91b27__exercise-paragraph"};var KG={content:Br.content,header:Br.header,subheader:Br.subheader,text:Br.text,ul:Br.text,ol:Br.text},NG=Br.defaultParagraph,vg=Br.exerciseParagraph;function vr(e,t){return Bg(e,{...t,className:ke(vg,t.className),urlTooltipEnabled:!1})}var ut={NONE:"none",SELECTED:"selected",CORRECT:"correct",INCORRECT:"incorrect"};function Va(e,t,r){let o=e.selected,n=e.choice;return t&&r?n.correct?ut.CORRECT:ut.INCORRECT:o?ut.SELECTED:ut.NONE}function bg(e,t){return e`
<svg
	class=${t.className}
	viewBox="0 0 6 6" 
	xmlns="http://www.w3.org/2000/svg"
>
	<circle cx="828" cy="556" r="3" transform="translate(-825 -553)" fill="none"/>
</svg>`}function Tg(e,t){return e`
<svg
	class=${t.className} 
	viewBox="0 0 12 10" 
	xmlns="http://www.w3.org/2000/svg"
>
	<path d="M10.135.32a1.09 1.09 0 0 1 1.548 1.538L4.405 9.182.317 5.072a1.09 1.09 0 0 1 1.547-1.538l2.54 2.553L10.135.32z" fill="none"/>
</svg>`}function br(e,t){return e`
<svg
	class=${t.className}  
	viewBox="0 0 12 10" 
	xmlns="http://www.w3.org/2000/svg"
>
	<path d="M10.135.32a1.09 1.09 0 0 1 1.548 1.538L4.405 9.182.317 5.072a1.09 1.09 0 0 1 1.547-1.538l2.54 2.553L10.135.32z" fill="none"/>
</svg>`}function Tr(e,t){return e`
<svg
	class=${t.className} 
	viewBox="0 0 10 10" 
	xmlns="http://www.w3.org/2000/svg"
>
	<path d="M5 3.571L7.857.714a1.01 1.01 0 0 1 1.429 1.429L6.429 5l2.857 2.857a1.01 1.01 0 0 1-1.429 1.428L5 6.428 2.143 9.285A1.01 1.01 0 0 1 .714 7.857L3.571 5 .714 2.142A1.01 1.01 0 0 1 2.143.714L5 3.57z" fill="#42484E"/>
</svg>
`}var{getCssClass:Qr}=Re`/src/roll/components/richtext/renderer/exercise/question/content/multiplechoice/MultipleChoicesRenderer.css`;function kx(e){switch(e){case ut.SELECTED:return f(bg,{className:Qr("radio")});case ut.CORRECT:return f(br,{className:Qr("correct")});case ut.INCORRECT:return f(Tr,{className:Qr("incorrect")});default:return null}}function Sx(e,t){return e`
<input type="radio" name="radio"/>
<span class=${Qr("control",{},t.getCssClass("control"))}>
	${e.switch(()=>kx(t.status))}
</span>`}function xx(e,t){let r=Et(jt),o=t.answered,n=t.state.selected,i=Va(t.state,o,t.showCorrectAnswers),a={selected:n,status:i},s=Ao(t.state.choice.content.blockMap);function c(l){let d=l.target,u=m(d.parentElement);if(d.tagName!=yr.A&&u.tagName!=yr.A){l.preventDefault();let h=t.state.choice.key;r(mn,h)}}return e`
<label
	class=${Qr("choice",a,t.getCssClass("choice"))}
	onclick=${!o&&c}
	disabled=${o?!0:null}
>
	${e(Sx,{status:i,getCssClass:t.getCssClass})}
	${e(vr,{className:Qr("text"),paragraph:s})}
</label>`}function wg(e,t){let r={answered:t.answered,dir:t.direction};return e`
<div
	class=${Qr("choices",r)}
>
	${e.renderAll(t.state.choicesState,o=>Nr(o.choice.key,xx,{getCssClass:t.getCssClass,state:o,answered:t.answered,showCorrectAnswers:t.showCorrectAnswers}))}
</div>`}var{getCssClass:Yr}=Re`/src/roll/components/richtext/renderer/exercise/question/content/multipleresponse/MultipleResponsesRenderer.css`;function Bx(e){switch(e){case ut.SELECTED:return f(Tg,{className:Yr("checkbox")});case ut.CORRECT:return f(br,{className:Yr("correct")});case ut.INCORRECT:return f(Tr,{className:Yr("incorrect")});default:return null}}function vx(e,t){return e`
<input type="checkbox" />
<span class=${Yr("control",{},t.getCssClass("control"))}>
	${e.switch(()=>Bx(t.status))}
</span>`}function bx(e,t){let r=Et(jt),o=t.answered,n=t.state.selected,i=Va(t.state,o,t.showCorrectAnswers),a={selected:n,status:i},s=Ao(t.state.choice.content.blockMap);function c(l){let d=l.target,u=m(d.parentElement);if(d.tagName!=yr.A&&u.tagName!=yr.A){l.preventDefault();let h=t.state.choice.key;r(mn,h)}}return e`
<label
	class=${Yr("choice",a,t.getCssClass("choice"))}
	onclick=${!o&&c}
	disabled=${o?!0:null}
>
	${e(vx,{getCssClass:t.getCssClass,status:i})}
	${e(vr,{className:Yr("text"),paragraph:s})}
</label>`}function Dg(e,t){let r={answered:t.answered,dir:t.direction};return e`
<div
	class=${Yr("choices",r)}
>
	${e.renderAll(t.state.choicesState,o=>Nr(o.choice.key,bx,{getCssClass:t.getCssClass,state:o,answered:t.answered,showCorrectAnswers:t.showCorrectAnswers}))}
</div>`}var{getCssClass:un}=Re`/src/roll/components/richtext/renderer/exercise/question/content/typein/TypeInRenderer.css`;function Tx(e,t){let r=t.answers.map(o=>o.text);return e`
<p class=${un("responses")}>
	${B("Roll.Exercise.Player.Content.TypeIn.AcceptableResponses")}: ${r.join(", ")}
</p>`}function Eg(e,t){let r=Et(jt),o=t.answered,n=t.state,i=n.typeIn,a=i.caseSensitive,s=n.answer;function c(h){return a?h.text==s:h.text.toUpperCase()==s.toUpperCase()}let l=!!i.answers.find(c),d={correct:o&&l,incorrect:o&&!l};function u(h){let S=h.target;r(Yc,S.value)}return e`
<div
	class=${un("type-in",d,t.getCssClass("type-in"))}
>
	${e.renderIf(br,()=>o&&l&&{className:un("correct")})}
	${e.renderIf(Tr,()=>o&&!l&&{className:un("incorrect")})}
	<input
		class=${un("answer")}
		value=${n.answer}
		placeholder=${B("Roll.Exercise.Player.Content.TypeIn.Placeholder")}
		oninput=${u}
		readonly=${o?"":void 0}
	/>
	${e.renderIf(Tx,()=>o&&t.showCorrectAnswers&&{answers:i.answers})}
</div>`}var{getCssClass:Ha}=Re`/src/roll/components/richtext/renderer/exercise/question/FeedbackRenderer.css`;function wx(e){return e?f(br,{className:""}):f(Tr,{className:""})}function Rg(e,t){let r=t.correctAnswered,o=dr.getFeedbackText(t.feedback,r),n=!k.isEmptyParagraph(o),i={"with-text":n,dir:t.direction},a={correct:r,incorrect:!r},s=r?B("Roll.Exercise.Player.Status.Correct"):B("Roll.Exercise.Player.Status.Incorrect");return e`
<div class=${Ha("feedback-container",i,t.getCssClass("feedback-container"))}>
	<div class=${Ha("status-icon",a,t.getCssClass("status-icon"))}>
		${e.switch(()=>wx(r))}
	</div>
	<div class=${Ha("status-label",{},t.getCssClass("status-label"))}>
		${s}
	</div>
	${e.renderIf(vr,()=>n&&{className:ke(Ha("text"),t.getCssClass("feedback-text")),paragraph:o})}
</div>
`}var{getCssClass:St}=Re`/src/roll/components/richtext/renderer/exercise/question/QuestionRenderer.css`;function Dx({questionState:e,showCorrectAnswers:t,direction:r}){let o=yg(e);if(o)return f(wg,{getCssClass:St,state:o.contentState,answered:e.answered,showCorrectAnswers:t,direction:r});let n=Cg(e);if(n)return f(Dg,{getCssClass:St,state:n.contentState,answered:e.answered,showCorrectAnswers:t,direction:r});let i=lt(e);return i?f(Eg,{getCssClass:St,state:i.contentState,answered:e.answered,showCorrectAnswers:t}):(y.error(`Unknown question type: ${e.question.type}`),null)}function Ig(e,t){let{questionNumber:r,showCorrectAnswers:o,animationEnabled:n}=t,i=m(t.questionState),a=i.question,s=a.feedback,c=Ao(a.description.blockMap),l=Et(jt),d=Et(Jc),u=Et(el),h=i.answered,S=hg(i),R={questionState:i,showCorrectAnswers:o,direction:t.direction},w={dir:t.direction};if(h&&n){w["with-animations"]=!0,o&&(w["show-correct-answers"]=!0);let C=dr.getFeedbackText(s,S);k.isEmptyParagraph(C)||(w["with-feedback"]=!0)}let I="xLarge";return e`
<div class=${St("question",w)}>
	${e.renderIf(mg,()=>!!r&&{text:r},St("question-number"))}
	${e(vr,{className:St("description"),paragraph:c})}
	${e.renderIf(Sg,()=>a.attachment&&{attachment:a.attachment})}
	${e.switch(()=>Dx(R))}
	${e.renderIf(Qe,()=>!h&&{style:"primary",structure:"text",text:B("Roll.Exercise.Player.Button.Submit"),state:kg(i)?"default":"disabled",onClick:()=>{d(!0),u("bottom"),l(Xc)},size:I,minWidth:!1},St("submit-button"))}
	${e.renderIf(Rg,()=>h&&{getCssClass:St,correctAnswered:S,feedback:s,direction:t.direction})}
	${e.renderIf(Qe,()=>h&&t.nextQuestionAvailable&&{style:"primary",structure:"text",text:B("Roll.Exercise.Player.Button.Next"),onClick:()=>{d(!1),u("top"),l(dn)},size:I,minWidth:!1},St("next-button"))}
	${e.renderIf(fg,()=>t.restartAvailable&&{getCssClass:St,className:St("restart-button"),text:B("Roll.Exercise.Player.Button.RestartExercise"),onclick:()=>{d(!1),u("top"),l(Qc)}})}
</div>`}var{getCssClass:tl}=Re`/src/roll/components/richtext/renderer/exercise/ExerciseBlockRenderer.css`,jt=Ai(()=>{}),Jc=Ai(()=>{}),el=Ai(()=>{});function Mg(e,t){let r=t.state,o=t.dispatch,n=t.scrollToElementFn,[i,a]=Z(!1),[s,c]=Z("none"),l=r.selectedQuestionIndex,d=r.questionsState.length,u=l+1!=d,h=!!r.questionsState.find(C=>!C.answered),S;if(d>1){let C=String((l==null?-1:l)+1).padStart(2,"0"),v=String(d).padStart(2,"0");S=`${C}/${v}`}let R=Ge.selectedQuestionState(r),w={[t.mode]:!0,dir:t.direction},I=F();return H(()=>{s!="none"&&(n(I.current,s),c("none"))},[s,n]),e.setContext(jt,o).setContext(Jc,a).setContext(el,c)`
<div
	class=${tl("exercise",w)}
	contenteditable="false"
	save-ref=${I}
>
	${e(Zc,{className:tl("prev-button"),visible:Ge.previousQuestionAvailable(r),onClick:()=>{a(!1),c("top"),o(qc)}})}
	${e.renderIf(Ig,()=>!!R&&{questionNumber:S,questionState:R,showCorrectAnswers:r.exercise.settings.showCorrectAnswers,nextQuestionAvailable:u,restartAvailable:!h&&!u,animationEnabled:i,direction:t.direction})}
	${e(Zc,{className:tl("next-button"),visible:Ge.nextQuestionAvailable(r),onClick:()=>{a(!1),c("top"),o(dn)}})}
</div>`}var Ex="note-block",Wa=class extends E{constructor({block:t,onHyperlinkOverFn:r,readonlyMode:o,isLock:n}){super({blockName:Ex}),this._block=t,this._readonlyMode=o,this._isLock=n,this._onHyperlinkOverFn=r}setBlock(t){this._block=t,this._sheduleRender()}setReadonlyMode(t){this._readonlyMode=t}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._invalidateModifiers())}_invalidateModifiers(){this.updateModifier("lock",this._isLock)}};function Ag(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1a7.7 7.7 0 0 1 7.7 7.7c0 2.527-1.466 4.578-2.91 6.598-.406.566-.81 1.13-1.178 1.702H8.388c-.369-.572-.772-1.136-1.177-1.702C5.766 13.278 4.3 11.227 4.3 8.7A7.7 7.7 0 0 1 12 1zm3.3 19.8V19H8.7v1.8a2.2 2.2 0 0 0 2.2 2.2h2.2a2.2 2.2 0 0 0 2.2-2.2zM12.725 3.044a1 1 0 0 0-.242 1.985 4 4 0 0 1 3.45 3.242 1 1 0 0 0 1.966-.365 6 6 0 0 0-5.174-4.862z" fill="currentColor"/></svg>
`}function Fg(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zm-9.68-4.98a1.62 1.62 0 1 1-3.24 0 1.62 1.62 0 0 1 3.24 0zM9.5 10.8a1 1 0 0 1 1-1h1.8a1 1 0 0 1 1 1v5h1.2v2h-4.4v-2h1.2v-4h-.8a1 1 0 0 1-1-1z" fill="currentColor"/></svg>
`}function Pg(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM7 11a1 1 0 1 0 0 2h10a1 1 0 1 0 0-2H7z" fill="currentColor"/></svg>
`}function Og(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM13 7a1 1 0 1 0-2 0v4H7a1 1 0 1 0 0 2h4v4a1 1 0 1 0 2 0v-4h4a1 1 0 1 0 0-2h-4V7z" fill="currentColor"/></svg>
`}function Lg(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM9.998 8.834v-.009a1 1 0 0 1-2-.007c0-.351.117-.726.266-1.048.158-.344.394-.714.713-1.057.649-.7 1.654-1.295 3.021-1.295 2.64 0 4 1.876 4 3.4V9.563a3.24 3.24 0 0 1-2.604 3.176.493.493 0 0 0-.396.483v.576a1 1 0 1 1-2 0v-.576c0-1.188.839-2.211 2.004-2.444a1.24 1.24 0 0 0 .996-1.215V8.818c0-.392-.437-1.4-2-1.4-.734 0-1.23.304-1.555.655a2.104 2.104 0 0 0-.364.537c-.055.119-.073.193-.079.216a.033.033 0 0 1-.002.008zM12 16.02a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z" fill="currentColor"/></svg>
`}function $g(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zm-5.74-2.35a1 1 0 0 0-1.52-1.3l-5.296 6.18-2.737-2.737a1 1 0 0 0-1.414 1.414l3.5 3.5a1 1 0 0 0 1.466-.056l6-7z" fill="currentColor" opacity=".9"/></svg>
`}function Kg(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 5.32A2.4 2.4 0 0 0 1 7.425v9.151a2.4 2.4 0 0 0 1.25 2.107l8.6 4.69a2.4 2.4 0 0 0 2.299 0l8.6-4.69a2.4 2.4 0 0 0 1.25-2.107v-9.15a2.4 2.4 0 0 0-1.25-2.108l-8.6-4.69a2.4 2.4 0 0 0-2.299 0l-8.6 4.69zm6.857 2.372a1 1 0 0 0-1.414 1.414L10.586 12l-2.893 2.893a1 1 0 1 0 1.414 1.414L12 13.413l2.893 2.893a1 1 0 0 0 1.414-1.414L13.414 12l2.893-2.893a1 1 0 1 0-1.414-1.414L12 10.585 9.107 7.692z" fill="currentColor"/></svg>
`}function Ng(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.612 4.62c-1.149-2.031-4.075-2.031-5.224 0L1.53 18.525C.4 20.524 1.844 23 4.142 23h15.716c2.297 0 3.742-2.476 2.612-4.476L14.612 4.62zM12 8.5a1 1 0 0 1 1 1v5a1 1 0 0 1-2 0v-5a1 1 0 0 1 1-1zm1.5 9.8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" fill="currentColor"/></svg>
`}var pn={noteBlockContent:"x50f93__note-block-content",dndIcon:"x50f93__dnd-icon",dndLayer:"x50f93__dnd-layer",noteTextWrapper:{withMods:e=>__getCssClass("x50f93__note-text-wrapper",e)},paragraph:"x50f93__paragraph",iconWrapper:{withMods:e=>__getCssClass("x50f93__icon-wrapper",e)},noteBlock:"x50f93__note-block"};function Rx(e){switch(e){case"correct":return f($g);case"incorrect":return f(Kg);case"info":return f(Fg);case"minus":return f(Pg);case"plus":return f(Og);case"question":return f(Lg);case"warning":return f(Ng);case"bulb":return f(Ag);case"withoutIcon":return null;default:L(e,`Unknown note type: ${e}`)}}function Ix(e,{iconBinding:t,iconColor:r}){return e`
<div
	style=${{color:r.color,opacity:r.opacity}}
>
	${e(t)}
</div>`}function Mx(e,{backgroundColor:t,draggable:r}){return e`
<div
	draggable=${r}
	class=${pn.dndLayer}
	style=${{background:t.color,opacity:t.opacity}}
></div>`}function Vg(e,{block:t,isLock:r,onHyperlinkOverFn:o,readonlyMode:n}){var c;let i=!n&&!r,a=Rx(t.noteType),s=ae(()=>k.create({key:t.key,characters:t.characters}),[t.characters,t.key]);return e`
<div class=${pn.noteBlockContent}>
	${e(Mx,{backgroundColor:(c=t.customBackgroundColor)!=null?c:Qo.getBackgroundColorData(t.noteType),draggable:i})}
	<div class=${pn.iconWrapper.withMods({"with-icon":!!a})}>
		${e.renderIf(Ix,()=>{var l;return!!a&&{iconBinding:a,iconColor:(l=t.customIconColor)!=null?l:Qo.getIconColorData(t.noteType)}})}
	</div>
	<div
		class=${pn.noteTextWrapper.withMods({"with-icon":!!a})}
		contenteditable="false"
	>
		${e(xr,{paragraph:s,idPrefix:"note-text",onHyperlinkOverFn:o,readonlyMode:n,isLock:r,paragraphClassName:"note-text",placeholder:B("Roll.Note.Placeholder")},pn.paragraph)}
	</div>
</div>`}var Ax={},Ua=class extends E{constructor({onHyperlinkOverFn:t,block:r,direction:o}){super({relatedData:Ax,blockName:"video-block",direction:o}),this._block=r,this._onHyperlinkOverFn=t,this._invalidateModifiers()}setBlock(t){this._block!==t&&(this._block=t,this._invalidateModifiers(),this._sheduleRender())}_invalidateModifiers(){this.updateModifier("align",this._block.alignment)}};function Hg(e,{src:t,posterSrc:r}){function o(i){vo(i)}let n=r?t:`${t}#t=0.001`;return e`
		<video
			src=${kt(n)}
			poster=${r&&kt(r)}
			preload="metadata"
			controls
			controlsList="nodownload"
			oninput=${o}
		></video>`}var rl={videoContainer:"x40fed__video-container",video:"x40fed__video",videoPlaceholder:"x40fed__video-placeholder"};function Wg(e,{content:t,width:r,height:o,isDraggable:n=!1}){let i=r>=o?o/r*100:100;return e`
		<div
			draggable=${n}
			class=${rl.videoContainer}
		>
			${e(t,rl.video)}
			<div class=${rl.videoPlaceholder} style=${{"padding-bottom":`${i}%`}}></div>
		</div>`}function Ug(e){return e?e.replace(/^\s|\s$/,dt.NBSP):dt.ZERO_WIDTH_SPACE}var ol={area:"x473a7__area",button:{withMods:e=>__getCssClass("x473a7__button",e)},icon:"x473a7__icon"};function zg(e,{onClick:t,style:r="default",icon:o=f(go),size:n="small",autotestId:i}){function a(s){s.defaultPrevented||(s.preventDefault(),t())}return e`
<div
	class=${ol.area}
	onclick=${a}
	data-at=${he({[rf]:"OverlayButton",[kc]:i})}
>
	<button
		class=${ol.button.withMods({style:r,size:n})}
		onclick=${a}
	>
		${e(o,ol.icon)}
	</button>
</div>
`}function za(e){return e<=27?"1.5":e<=31?"1.35":e<=56?"1.25":"normal"}var Ga=class extends mt{getLineHeightForFontSize(t){return za(t)}};var Fx="table",nl={},qa=class extends E{constructor({block:t,isLock:r,onHyperlinkOverFn:o,readonlyMode:n,direction:i}){super({blockName:Fx,direction:i}),this._block=t,this._readonlyMode=n,this._isLock=r,this._direction=i,this._onHyperlinkOverFn=o,this._onCellFocusSignal=this._createSignal(),this._onCellBlurSignal=this._createSignal(),this._onCellMouseOver=this._createSignal(),this._onCellMouseOut=this._createSignal(),this._invalidateModifiers()}onCellKeyDown(){return this._getBrowserEventSignal(U.KEY_DOWN)}onCellBlurSignal(){return this._onCellBlurSignal}onCellFocusSignal(){return this._onCellFocusSignal}onCellMouseOver(){return this._onCellMouseOver}onCellMouseOut(){return this._onCellMouseOut}setBlock(t){this._block!==t&&(this._block=t,this._invalidateModifiers(),this._sheduleRender())}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._sheduleRender())}setDirection(t){this._direction!==t&&(super.setDirection(t),this._invalidateModifiers())}getCellElement(t){return this.domElement().querySelector(`[data-cell-key='${t}']`)}getLeftCellFromRow(t){let r=this._direction==="rtl"?P.getLastColumnKey(this._block):P.getFirstColumnKey(this._block);return m(g.getCell(this._block,t,r)).key}getFirstCellFromColumn(t){let r=P.getFirstRowKey(this._block);return m(g.getCell(this._block,r,t)).key}_invalidateModifiers(){this.updateModifier("pin-header-column",yh(this._block)),this.updateModifier("dir",this._direction)}_renderParagraph(t,r={}){let o=$(t);if(!o)throw new Error;let n=At(new Ga({paragraph:o,idPrefix:"cell-paragraph"}),this._onHyperlinkOverFn,this._readonlyMode,this._isLock);return n.classList.add("cell-paragraph"),ht(n,r),n}_getCellStyles(t){let r="",o="",n=1;if(t.forEach(i=>{switch(i.name){case"backgroundColor":o=i.color;break;case"backgroundOpacity":n=i.opacity;break;case"charactersMeta":break;default:throw L(i),new Error(`unknown meta ${i}`)}}),o){let i=Y(Pe.whiteDefault),a=[...Y(o),n],[s,c,l]=ro(i,a);r+=`background-color: rgb(${s}, ${c}, ${l});`}return r}_getCellContentClasses(t){let r=new xe("table-cell-content"),o=`${r.className()}`;return o+=` ${r.getModifierWithValueClassName("vertical-align",t)}`,o}_getParagraphStyles(t){return xa(m($(t.content)),gh(t),za)}_renderCell(t,r){let o=this._block.rowsMap[t].colsMap[r],n=()=>{this._onCellFocusSignal.dispatch(o.key)},i=()=>{this._onCellBlurSignal.dispatch(o.key)},a=()=>{this._onCellMouseOver.dispatch({cellKey:o.key,rowKey:t,colKey:r})},s=()=>{this._onCellMouseOut.dispatch({cellKey:o.key,rowKey:t,colKey:r})},c=this._getCellStyles(o.meta),l=this._getParagraphStyles(o),d=this._getCellContentClasses(o.verticalTextAlign);return M(nl,`:cell-${this._block.key}-${t}-${r}-${o.key}`)`
<td
	style=${c}
	data-table-key=${this._block.key}
	data-cell-key=${o.key}
	data-row-key=${t}
	data-col-key=${r}
	contenteditable=${!this._readonlyMode&&!this._isLock}
	class="table-cell"
	onmouseover=${a}
	onmouseout=${s}
	onfocus=${n}
	onblur=${i}
	onkeydown=${this}
>
	<div
		contenteditable=${!this._readonlyMode&&!this._isLock}
		class=${d}
	>
		${this._renderParagraph(o.content,l)}
	</div>
</td>`}_renderRow(t){return M(nl,`:row-${this._block.key}-${t}`)`
<tr
	contenteditable="false"
	class='table-row'
	data-row-key=${t}
>
	${this._block.colsOrder.map(r=>this._renderCell(t,r))}
</tr>`}_render(){return M(nl,`:table-block-${this._block.key}`)`
<table
	contenteditable="false"
	class="${this._getCssClasses()}"
>
	${this._block.rowsOrder.map(t=>this._renderRow(t))}
</table>`}};var Qa=class extends E{constructor({tableBlock:t,tableRenderer:r,direction:o}){super({blockName:"table-scroll-container",direction:o}),this._tableBlock=t,this._tableRenderer=r,this._scrollSignal=this._createSignal()}setBlock(t){this._tableBlock!==t&&(this._tableBlock=t)}scrollSignal(){return this._scrollSignal}scrollLeft(){return this.domElement().scrollLeft}calculateCellBounds(t){if(!this._wasRendered())return null;let r=this._tableRenderer.getCellElement(t);if(!r)return null;let o=r.getBoundingClientRect(),n=this.domElement(),i=n.getBoundingClientRect();return{width:o.width,height:o.height,left:o.left-i.left+n.scrollLeft,top:o.top-i.top}}_onTableScroll(){this._scrollSignal.dispatch()}};var Px="table-shadow-container",Ox={},Ya=class extends E{constructor({tableBlock:t,tableRenderer:r,tableScrollContainer:o,direction:n}){super({blockName:Px,direction:n}),this._tableBlock=t,this._tableScrollContainer=o,new ResizeObserver(()=>this._invalidateModifiers()).observe(r.domElement()),new ResizeObserver(()=>this._invalidateModifiers()).observe(this._tableScrollContainer.domElement()),this._addSignal(this._tableScrollContainer.scrollSignal(),()=>this._invalidateModifiers())}setDirection(t){this._direction!==t&&(super.setDirection(t),this._invalidateModifiers())}_invalidateModifiers(){let t=this._tableScrollContainer.domElement(),r=this._direction==="rtl"?Math.abs(Math.ceil(t.scrollLeft)):Math.ceil(t.scrollLeft),o=Math.ceil(t.scrollWidth-t.clientWidth);this.updateModifier("left-shadow",r>0),this.updateModifier("right-shadow",r<o)}_render(){return M(Ox,`:table-block-shadow-${this._tableBlock.key}`)`
			<div class=${this._getCssClasses()}></div>
		`}};function Gg({html:e,side:t,component:r,closeOnOverlayClick:o,modalOverlayType:n}){let[i,a]=Z(null);return Ih({html:e,side:t,createModal:()=>i&&f(r,i),close:o?()=>a(null):void 0,modalOverlayType:n}),ae(()=>({open:a,close:()=>a(null)}),[])}function fn(){return"ontouchstart"in document.documentElement}function qg(e,t,r,o=300){let n=F(0),i=F(0);function a(){n.current=0,clearTimeout(i.current)}Se(e,"click",c=>{c.preventDefault(),n.current+=1,n.current===1&&(i.current=setTimeout(()=>{r&&r(),a()},o)),n.current===2&&(t(),a())})}function Qg(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.293 2.293a1 1 0 1 1 1.414 1.414L14.414 7H16a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1V4a1 1 0 1 1 2 0v1.586l3.293-3.293zm-14 14a1 1 0 1 0 1.414 1.414L7 14.414V16a1 1 0 1 0 2 0v-4a1 1 0 0 0-1-1H4a1 1 0 1 0 0 2h1.586l-3.293 3.293zM18 17v-4a1 1 0 1 0-2 0v3h-3a1 1 0 1 0 0 2h4a1 1 0 0 0 1-1zM3 2a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V4h3a1 1 0 0 0 0-2H3z" fill="currentColor"/></svg>
`}function Yg(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 10h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function il(e,t,r,o){let n=Math.abs(r.width-window.innerWidth)/2/o,i=-n,a=Math.abs(r.height-window.innerHeight)/2/o,s=-a,c=Lt(e,i,n),l=Lt(t,s,a);return{fittedX:c,fittedY:l}}function Xa(e,t,r,o,n){let i=r.x+(e.x-t.x)/n,a=r.y+(e.y-t.y)/n,{fittedX:s,fittedY:c}=il(i,a,o,n);return{x:s,y:c}}function Za(e,t){let r=e.current.offsetWidth*t,o=e.current.offsetHeight*t;return{horizontalOverflow:r>window.innerWidth,verticalOverflow:o>window.innerHeight}}function ja(e,t){let r=F({horizontalOverflow:!1,verticalOverflow:!1});return H(()=>{r.current=Za(e,t)},[e,r,t]),r}var Lx=1;function Xg(e){return e.buttons===Lx}function Zg(e,t,r,o){let n=F(window),i=wn(),a=i?_r.FF_DASH:_r.DASH,s=i?_r.FF_EQUALS:_r.EQUALS;bo(n,a,t,o),bo(n,s,e,o),bo(n,_r.NUM_MINUS,t,o),bo(n,_r.NUM_PLUS,e,o),bo(n,_r.ESC,r,o)}function jg(e,t){H(()=>{function r(o){o.deltaY>0?t():e()}return window.addEventListener("wheel",r),()=>{window.removeEventListener("wheel",r)}},[t,e])}function $x(e,t,r,o,n){let i=F({x:0,y:0}),a=F(o),s=Le(o),c=F({width:0,height:0}),l=Le(n),d=ja(t,r);H(()=>{let u=null,h=null,S=null,R=()=>{Ur([h,S])},w=C=>{let v=C,T=l.current,N=s.current,J={x:v.clientX,y:v.clientY};Xg(C)?(C.preventDefault(),N=Xa(J,i.current,a.current,c.current,r)):R(),T({x:d.current.horizontalOverflow?N.x:s.current.x,y:d.current.verticalOverflow?N.y:s.current.y})},I=C=>{let v=C,T=t.current.getBoundingClientRect();c.current={width:T.width,height:T.height},a.current=s.current,i.current={x:v.clientX,y:v.clientY},C.preventDefault(),S=Ft(window,"mouseup",R),h=Ft(window,"mousemove",w)};return(d.current.horizontalOverflow||d.current.verticalOverflow)&&(u=Ft(t.current,"mousedown",I)),()=>{Ur([u,h,S])}},[r,s,t,l,d])}function Jg(e,t,r,o,n,i,a,s){jg(i,a),Zg(i,a,s),$x(e,t,r,o,n)}function Kx(e){let t={x:e[0].pageX,y:e[0].pageY},r={x:e[1].pageX,y:e[1].pageY};return[t,r]}function al(e){if(e.length===2){let[t,r]=Kx(e);return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))}return 0}function ey(e,t,r,o,n){let i=F({startTouchPointsDist:0,startZoomScale:1,startDragPosition:{x:0,y:0},gesture:"none"}),a=ja(e,t),s=F(o),c=Le(o),l=F(),d=Le(n),u=j(v=>{i.current.gesture="pinch",i.current.startZoomScale=t,i.current.startTouchPointsDist=al(v.touches)},[t]),h=j(v=>{let N=al(v.touches)/i.current.startTouchPointsDist,J=t*N;r(J)},[t,r]),S=j(v=>{let T=e.current.getBoundingClientRect(),N=v.touches[0];l.current={width:T.width,height:T.height},i.current.startDragPosition={x:N.clientX,y:N.clientY},s.current=c.current,i.current.gesture="drag"},[c,e]),R=j(v=>{let T=d.current,N=c.current,J=v.touches[0],we={x:J.clientX,y:J.clientY};v.touches&&v.touches.length===1&&(N=Xa(we,i.current.startDragPosition,s.current,l.current,t)),T({x:a.current.horizontalOverflow?N.x:c.current.x,y:a.current.verticalOverflow?N.y:c.current.y})},[c,t,d,a]),w=j(v=>{v.cancelable&&v.preventDefault();let T=v;T.touches&&(T.touches.length===2&&i.current.gesture==="pinch"?h(T):T.touches.length===1&&i.current.gesture==="drag"&&(a.current.horizontalOverflow||a.current.verticalOverflow)&&R(T))},[R,h,a]),I=j(()=>{i.current.gesture="none",window.removeEventListener("touchmove",w),window.removeEventListener("touchend",I)},[w]),C=j(v=>{let T=v;T.touches&&(T.touches.length===2?u(T):T.touches.length===1&&S(T),window.addEventListener("touchmove",w,{passive:!1}),window.addEventListener("touchend",I))},[S,u,I,w]);H(()=>(window.addEventListener("touchstart",C),()=>{window.removeEventListener("touchstart",C)}),[C])}var Fo={preview:"x2385b__preview",imageContainer:{withMods:e=>__getCssClass("x2385b__image-container",e)},image:{withMods:e=>__getCssClass("x2385b__image",e)},zoomToolbar:{withMods:e=>__getCssClass("x2385b__zoom-toolbar",e)},centerButton:"x2385b__center-button",closeCross:"x2385b__close-cross"},cl=.5,Zr=6,Xr=1;function Nx(){let[e,t]=Z(1);return{imageScale:e,setScale:a=>{a>=Zr?t(Zr):a<=Xr?t(Xr):t(a)},increaseScale:()=>{let a=e+cl;a<=Zr?t(a):t(Zr)},decreaseScale:()=>{let a=e-cl;a>=Xr?t(a):t(Xr)},resetScale:()=>{t(Xr)}}}function Vx(e,t){let[r,o]=Z(!0);return H(()=>{r?(e.current.style.bottom=to("--tool-bar-bottom"),t.current.style.top=to("--close-button-top")):(e.current.style.bottom=`-${e.current.offsetHeight}px`,t.current.style.top=`-${t.current.offsetHeight}px`)},[r,o,e,t]),{isToolsVisible:r,setUiVisibility:o}}function Hx(e,{style:t,onClose:r}){return xo(e,{component:f(zg,{style:t==="dark"?"dark":"default",onClick:r},Fo.closeCross),tooltipText:B("Common.Close"),side:"bottom",align:"start"})}function Wx(e,{style:t,icon:r,onClick:o,disabled:n}){return Qe(e,{style:V(t,{light:"ghost",dark:"ghostInversed"}),size:"small",onClick:o,structure:"icon",icon:r,state:n?"disabled":"default"})}function sl(e,t){return xo(e,{component:f(Wx,t),tooltipText:t.tooltipText,show:!fn()})}function Ux(e,{style:t,increaseScale:r,decreaseScale:o,resetScale:n,scale:i,ref:a}){return Se(a,"click",s=>s.preventDefault()),e`
<div
	save-ref=${a}
	class=${Fo.zoomToolbar.withMods({style:t})}
>
	${e(sl,{style:t,icon:f(Yg),tooltipText:B("Common.ImageZoom.Tooltip.Decrease"),onClick:o,disabled:i==Xr})}
	${e(sl,{style:t,icon:f(Qg),tooltipText:B("Common.ImageZoom.Tooltip.ResetScale"),onClick:n,disabled:i==Xr},Fo.centerButton)}
	${e(sl,{style:t,icon:f(Wh),tooltipText:B("Common.ImageZoom.Tooltip.Increase"),onClick:r,disabled:i==Zr})}
</div>
`}function zx(e,{src:t,hasImageTransition:r,isTouchscreenDevice:o}){return e`
		<img
			class=${Fo.image.withMods({transition:r,touchscreen:o})}
			src=${t}
			alt=''
		/>`}function ty(e,{style:t,imageSrc:r,imageCrop:o,closeZoomFn:n}){let[i,a]=Z(()=>({x:0,y:0})),[s,c]=Z(!1),l=Nx(),d=de(),u=de(),h=de(),S=de(),R=fn(),{isToolsVisible:w,setUiVisibility:I}=Vx(h,u),C=se=>{let jr=Za(S,se),{fittedX:Lo,fittedY:$o}=il(i.x,i.y,{width:S.current.offsetWidth*se,height:S.current.offsetHeight*se},se);a({x:jr.horizontalOverflow?Lo:0,y:jr.verticalOverflow?$o:0})};function v(se){c(!1),l.setScale(se),C(se)}function T(){c(!0),l.increaseScale()}function N(){c(!0),l.decreaseScale(),C(l.imageScale-cl)}function J(){c(!0),l.resetScale(),a({x:0,y:0})}function we(se){c(!1),a(se)}function Je(){R&&I(!w)}function $e(){!R||(w&&I(!1),l.imageScale>=Zr/2?J():(c(!0),l.setScale(Zr/2)))}Se(h,"click",se=>se.preventDefault()),Se(d,"click",se=>{se.defaultPrevented||(se.preventDefault(),n())}),qg(S,$e,Je),ey(S,l.imageScale,v,i,we),Jg(d,S,l.imageScale,i,we,T,N,n),H(()=>{let se=Za(S,l.imageScale),jr=se.horizontalOverflow||se.verticalOverflow,Lo=S.current.offsetWidth/2,$o=S.current.offsetHeight/2;S.current.style.cursor=jr?"move":"default",S.current.style.transformOrigin=`${Lo-i.x}px ${$o-i.y}px`,S.current.style.transform=`translate(${i.x}px, ${i.y}px) scale(${l.imageScale})`},[S,l.imageScale,i,a]),_e(()=>{d.current.style.height=`${window.innerHeight}px`});let Pt={ref:S};return e`
<div
	class=${Fo.preview}
	save-ref=${d}
>
	<div class=${Fo.imageContainer.withMods({touchscreen:R})}
	>
		${e.renderIf(zx,()=>!o&&{src:r,hasImageTransition:s,isTouchscreenDevice:R},Pt)}
		${e.renderIf(Cr,()=>o&&{image:o,withSize:!0,containerRef:d},Pt)}
	</div>
	${e(Ux,{style:t,increaseScale:T,decreaseScale:N,resetScale:J,scale:l.imageScale,ref:h})}
	${e(Hx,{style:t,onClose:n},{ref:u})}
</div>`}function ry(e,{style:t}){let r=Gg({html:e,side:"center",component:ty,closeOnOverlayClick:!0,modalOverlayType:t});return j((o,n=void 0)=>r.open({imageSrc:o,imageCrop:n&&n.crop?{...n,crop:n.crop}:void 0,closeZoomFn:r.close,style:t}),[r,t])}var Gx={},Po=class extends ha{constructor({block:t,contentRendererFn:r,direction:o}){super({block:t,contentRendererFn:r,direction:o}),this.updateModifier("hide-caption",!t.characters.length)}_renderCaption(t){let r=k.create({key:t.key,characters:t.characters});return At(new mt({paragraph:r,bemInfo:this.createChildBemInfo("caption"),idPrefix:"caption"}),()=>{},!0)}_getWrapperInlineStyles(){let t=this.getBlock();return t.type===p.IMAGE&&t.alignment==="inner"?{"max-width":`${t.width}px`,"max-height":`${t.height}px`}:null}_render(){let t=this.getBlock();return M(Gx,`:media-block-${t.key}`)`
<figure
	class=${this._getCssClasses()}
	style=${this._getInlineStyles()}
>
	<div class=${this._wrapperClassName} style=${this._getWrapperInlineStyles()}>
		${this._contentRendererFn(t,this._contentClassName,this._onContentSizeChange.bind(this))}
		<div class=${this._placeholderClassName} style=${this._getPlaceholderStyles()}></div>
	</div>
	<figcaption class="caption-wrapper">
		${this._renderCaption(t)}
	</figcaption>
</figure>`}};var ll={},qx={};function Qx(e,{imageBlock:t,className:r}){let o=ry(e,{style:"light"});return Rt(e,f(Cr,{image:t,withImageSelection:!0,className:r,onClick:()=>o(kt(t.src),t)}))}function Yx(e,t){let r=m(Oc.toCollagedImageBlock(e));return M(qx,`:collaged-image-${r.key}`)`
			${Ce(Qx)({imageBlock:r,className:t+" image-block"})}
		`}var dl=class extends Po{constructor({block:t,contentRendererFn:r,direction:o}){super({block:t,contentRendererFn:r,direction:o}),this.updateModifier("hide-caption",!t.characters.length),this._grow=null,this._preventCollaging=!1}setGrow(t){this._grow=t}setPreventCollaging(t){this._preventCollaging=t,this.updateModifier("prevent-collaging",this._preventCollaging)}getGrow(){return this._grow}setBlock(t){super.setBlock(t);let r=Oc.toCollagedImageBlock(t);r&&(this.updateModifier("align",!1),this.updateModifier("blob",r.isBlob),this.updateModifier("collaged",!!r.parentCollageKey),this.updateModifier("prevent-collaging",this._preventCollaging))}_getInlineStyles(){return this._grow?{flex:`${this._grow} 0 0`}:null}_getPlaceholderStyles(){let t=this.getBlock();if(!t.width)return{width:"100%",height:`${t.height}px`};let{width:r,height:o}=Ue(t);return{"padding-bottom":`${(this.fixedRatio?this.fixedRatio:o/r)*100}%`}}_getWrapperInlineStyles(){let t=this.getBlock();if(this._preventCollaging){let{width:r}=Ue(t);return{"max-width":`${r}px`}}return null}};function oy(e,t){let r;return ll[e.key]?(r=ll[e.key],r.setBlock(e),r.setDirection(t)):(r=new dl({block:e,contentRendererFn:Yx,direction:t}),ll[e.key]=r),r}function ny(e,t){let r=e.map(n=>{let i=Ue(n);return i.crop?i.width/i.height:n.width/n.height}),o=Math.min(...r);return t.forEach((n,i)=>{n.setGrow(r[i]/o)}),o}var Xx=740,ml={},Zx={},jx="collage-block",ul=class extends E{constructor({block:t,direction:r}){super({blockName:jx,direction:r}),this._block=t,this.updateModifier("align",this._block.alignment),this.updateModifier("dir",this._direction)}setBlock(t){this._block!==t&&(this._block=t,this.updateModifier("align",this._block.alignment),this._sheduleRender())}setDirection(t){this._direction!==t&&(super.setDirection(t),this.updateModifier("dir",this._direction),this._sheduleRender())}getBlock(){return this._block}_getInlineStyles(){if(this._block.images.length===1&&(document.body.clientWidth<=Xx||this._block.alignment==="float-left")){let{width:t}=Ue(this._block.images[0]);return{display:"flex",width:`${t}px`}}return null}_renderImagesBlocks(t){let r=t.map(o=>{let n=oy(o,this._direction);return n.setPreventCollaging(t.length===1&&this._block.alignment!=="float-left"),n});return ny(t,r),r.map(o=>o._render())}_render(){let t=this.getBlock();return M(Zx,`:collage-block-${t.key}`)`
<figure
	class=${this._getCssClasses()}
	style=${this._getInlineStyles()}
>
	${this._renderImagesBlocks(t.images)}
</figure>`}};function iy({block:e,blockBeforeType:t,blockAfterType:r,direction:o}){let n;return ml[e.key]?(n=ml[e.key],n.setBlock(e),n.setDirection(o)):(n=new me({block:e,blockBeforeType:t,blockAfterType:r,direction:o,blockRenderer:new ul({block:e,direction:o})}),ml[e.key]=n),n}var Jx={},pl={},fl=class extends E{constructor({onHyperlinkOverFn:t,block:r,direction:o,onContinueClick:n,scrollToContinueGroupFn:i}){super({relatedData:Jx,blockName:"continue-block",direction:o}),this._block=r,this._onHyperlinkOverFn=t,this._scrollToContinueGroupFn=i,this._onContinueClick=n}_scrollToNextGroup(){let t=this._getNextContinueGroupElement();t&&this._scrollToContinueGroupFn(t)}_getNextContinueGroupElement(){let t=this.domElement().parentElement,r=t&&t.parentElement;return r&&r.nextElementSibling}setBlock(t){this._block!==t&&(this._block=t,this._sheduleRender())}_render(){let t=this._renderFunctionEx(`:continue-block-${this._block.key}`);return t`
<figure
	data-key=${this._block.key}
	class=${this._getCssClasses()}
	contenteditable="false"
>
	${t(Uh,{block:this._block,readonlyMode:!0,isLock:!1,onHyperlinkOverFn:this._onHyperlinkOverFn,direction:this._direction,onClick:()=>{this._onContinueClick(this._block.key),this._scrollToNextGroup()}})}
</figure>
		`}};function ay({block:e,blockBeforeType:t,blockAfterType:r,onHyperlinkOverFn:o,direction:n,onContinueClick:i,isHidden:a,scrollToContinueGroupFn:s}){let c;return pl[e.key]?(c=pl[e.key],c.setBlock(e),c.setDirection(n),c.setHidden(a)):(c=new me({block:e,isHidden:a,blockBeforeType:t,blockAfterType:r,direction:n,blockRenderer:new fl({block:e,onHyperlinkOverFn:o,direction:n,onContinueClick:i,scrollToContinueGroupFn:s})}),pl[e.key]=c),c}var hl={},gl=class extends Oa{constructor({onHyperlinkOverFn:t,block:r,direction:o}){super({block:r,onHyperlinkOverFn:t,direction:o})}_render(){let t=this._renderFunctionEx(`:divider-block-${this._block.key}`);return t`
<figure
	data-key=${this._block.key}
	class=${this._getCssClasses()}
	contenteditable="false"
>
	${t(rg,{block:this._block,readonlyMode:!0,isLock:!1,onHyperlinkOverFn:this._onHyperlinkOverFn,direction:this._direction})}
</figure>
		`}};function sy({block:e,blockBeforeType:t,blockAfterType:r,onHyperlinkOverFn:o,direction:n}){let i;return hl[e.key]?(i=hl[e.key],i.setBlock(e),i.setDirection(n)):(i=new me({block:e,blockBeforeType:t,blockAfterType:r,direction:n,blockRenderer:new gl({block:e,onHyperlinkOverFn:o,direction:n})}),hl[e.key]=i),i}var yl={};function cy({block:e,blockBeforeType:t,blockAfterType:r,direction:o}){let n;return yl[e.key]?(n=yl[e.key],n.setBlock(e),n.setDirection(o)):(n=new me({block:e,blockBeforeType:t,blockAfterType:r,direction:o,blockRenderer:new Po({block:e,contentRendererFn:og,direction:o})}),yl[e.key]=n),n}var e2="exercise-block",t2="wrapper",_l={},r2={},Cl=class extends E{constructor(t,r,o,n){super({blockName:e2}),this._relatedObject={},this._state=r,this._block=t;let{dispatch:i}=dg(o);this._dispatch=i,this._scrollToElementFn=n,this._exerciseElement=null}setBlock(t){this._block!==t&&(this._block=t,this._sheduleRender())}setState(t){this._state!=t&&(this._exerciseElement=null,this._state=t,this._sheduleRender())}_render(){this._exerciseElement||vp(Mg,n=>{this._exerciseElement=n},this._relatedObject)({state:this._state,dispatch:this._dispatch,mode:"player",scrollToElementFn:this._scrollToElementFn,direction:Fe()});let t=X([this.createChildBemInfo(t2)]);return qt(r2,`:exercise-block-${this._state.exercise.key}`)`
<figure class=${this._getCssClasses()}>
	<div class=${t}>
		${this._exerciseElement}
	</div>
</figure>`}};function ly({block:e,state:t,direction:r,updateStateFn:o,blockBeforeType:n,blockAfterType:i,scrollToElementFn:a}){let s=t.exercise.key,c;if(_l[s]){c=_l[s];let l=c.blockRenderer();l.setState(t),l.setDirection(r)}else c=new me({block:e,blockBeforeType:n,blockAfterType:i,direction:r,blockRenderer:new Cl(e,t,o,a)}),_l[s]=c;return c}var kl={},o2={},Sl=class extends wa{constructor({block:t,onHyperlinkOverFn:r,direction:o}){super({block:t,onHyperlinkOverFn:r,readonlyMode:!0,isLock:!1,direction:o}),this._addSignal(this._cardsListRenderer.onCardClickSignal,n=>{let i=_h();if(i&&i.startOffset!==i.endOffset)return;let a=this._cardsListRenderer.getCardRendererByKey(n);if(a){let s=a.activeSide()==="front"?"back":"front";a.setActiveSide(s)}})}_render(){let t=this._block;return M(o2,`:flip-cards-block-${t.key}`)`
<figure
	class=${this._getCssClasses()}
	contenteditable="false"
	draggable="false"
>
	${this._cardsListRenderer.domElement()}
</figure>`}};function dy({block:e,blockBeforeType:t,blockAfterType:r,onHyperlinkOverFn:o,direction:n=Fe()}){let i;return kl[e.key]?(i=kl[e.key],i.setBlock(e),i.setDirection(n)):(i=new me({block:e,blockBeforeType:t,blockAfterType:r,direction:n,blockRenderer:new Sl({block:e,onHyperlinkOverFn:o,direction:n})}),kl[e.key]=i),i}var Bl=class extends Wa{constructor({block:t,onHyperlinkOverFn:r}){super({block:t,onHyperlinkOverFn:r,readonlyMode:!0,isLock:!1})}_render(){let t=this._block,r=this._renderFunctionEx(`:note-block-${t.key}`);return r`
<figure
	class=${this._getCssClasses()}
	contenteditable="false"
	data-key="${t.key}"
	tabindex="-1"
>
	${r(Vg,{block:t,isLock:this._isLock,onHyperlinkOverFn:this._onHyperlinkOverFn,readonlyMode:this._readonlyMode})}
</figure>`}},xl={};function my({block:e,direction:t,blockBeforeType:r,blockAfterType:o,onHyperlinkOverFn:n}){let i;return xl[e.key]?(i=xl[e.key],i.setBlock(e),i.setDirection(t)):(i=new me({block:e,blockBeforeType:r,blockAfterType:o,direction:t,blockRenderer:new Bl({block:e,onHyperlinkOverFn:n})}),xl[e.key]=i),i}var vl={},n2="table-block",uy={},bl=class extends Qa{constructor({tableBlock:t,tableRenderer:r}){super({tableBlock:t,tableRenderer:r})}_render(){let t=this._tableBlock;return M(uy,`:table-block-scroll-container-${t.key}`)`
		<div
			class="${this._getCssClasses()}"
			contenteditable="false"
			onscroll=${()=>this._onTableScroll()}
		>
			${this._tableRenderer.domElement()}
		</div>`}},Tl=class extends E{constructor({block:t,onHyperlinkOverFn:r,direction:o=Fe()}){super({blockName:n2}),this._direction=o,this.updateModifier("dir",this._direction),this._block=t,this._tableRenderer=new qa({block:t,onHyperlinkOverFn:r,readonlyMode:!0,isLock:!1,direction:this._direction}),this._tableScrollContainer=new bl({tableRenderer:this._tableRenderer,tableBlock:this._block}),this._tableShadowContainer=new Ya({tableBlock:this._block,tableRenderer:this._tableRenderer,tableScrollContainer:this._tableScrollContainer,direction:this._direction}),this._invalidateModifiers()}setBlock(t){this._block!==t&&(this._block=t,this._invalidateModifiers(),this._tableRenderer.setBlock(t),this._sheduleRender())}_invalidateModifiers(){this.updateModifier("align",this._block.alignment)}_render(){let t=this._block;return M(uy,`:table-block-${this._block.key}`)`
			<figure
				class=${this._getCssClasses()}
				contenteditable="false"
				draggable="false"
				data-key=${t.key}
				tabindex="-1"
			>
				${this._tableScrollContainer.domElement()}
				${this._tableShadowContainer.domElement()}
			</figure>`}};function py({block:e,blockBeforeType:t,blockAfterType:r,onHyperlinkOverFn:o,direction:n}){let i;return vl[e.key]?(i=vl[e.key],i.setBlock(e),i.setDirection(n)):(i=new me({block:e,blockBeforeType:t,blockAfterType:r,direction:n,blockRenderer:new Tl({block:e,onHyperlinkOverFn:o})}),vl[e.key]=i),i}var wl={},Dl=class extends Ua{constructor({onHyperlinkOverFn:t,block:r,direction:o}){super({block:r,onHyperlinkOverFn:t,direction:o}),this.updateModifier("empty",!r.paragraph.characters.length)}_render(){let t=this._renderFunctionEx(`:video-block-${this._block.key}`);return t`
			<figure
				data-key=${this._block.key}
				class=${this._getCssClasses()}
				contenteditable="false"
			>
				${t(Wg,{content:f(Hg,{src:this._block.src,posterSrc:this._block.posterSrc}),width:this._block.width,height:this._block.height})}
				${t(xr,{paragraph:this._block.paragraph,idPrefix:"caption",onHyperlinkOverFn:this._onHyperlinkOverFn,readonlyMode:!0,isLock:!1})}
			</figure>
		`}};function fy({block:e,blockBeforeType:t,blockAfterType:r,onHyperlinkOverFn:o,direction:n}){let i;return wl[e.key]?(i=wl[e.key],i.setBlock(e),i.setDirection(n)):(i=new me({block:e,blockAfterType:r,blockBeforeType:t,direction:n,blockRenderer:new Dl({block:e,onHyperlinkOverFn:o,direction:n})}),wl[e.key]=i),i.updateModifier("after",t),i}function gy({getState:e,updateStateFn:t,scrollToElementFn:r,scrollToContinueGroupFn:o}){let n=fe.selectedSection(e()),i=n.contentState,a=n.continueButtonKey,s=new ma(i,a);return s.registerRenderer(p.COLLAGE,iy),s.registerRenderer(p.EMBED,cy),s.registerRenderer(p.EXERCISE,({block:c,blockBeforeType:l,blockAfterType:d,direction:u})=>ly({block:c,state:m(hy(e(),c.key)),updateStateFn:h=>t(S=>{let R=m(hy(S,c.key));h(R)}),blockBeforeType:l,blockAfterType:d,scrollToElementFn:r,direction:u})),s.registerRenderer(p.ATTACHMENT,ch),s.registerRenderer(p.NOTE,my),s.registerRenderer(p.TABLE,py),s.registerRenderer(p.FLIP_CARD,dy),s.registerRenderer(p.DIVIDER,sy),s.registerRenderer(p.CONTINUE,({block:c,blockBeforeType:l,blockAfterType:d,direction:u,onHyperlinkOverFn:h,isHidden:S})=>ay({block:c,blockBeforeType:l,blockAfterType:d,onHyperlinkOverFn:h,direction:u,onContinueClick:R=>t(w=>{fe.selectedSection(w).continueButtonKey=R}),isHidden:S,scrollToContinueGroupFn:o})),s.registerRenderer(p.VIDEO,fy),s}function hy(e,t){let n=fe.selectedSection(e).contentState.blocksState.find(i=>t===i.key);return n&&n.type===p.EXERCISE?n:null}function yy(e,t){return{animate:r=>{e.style.transform=`${t} scaleX(${r})`},complete:()=>{e.style.transform=t||""},changedProperties:["transform"]}}var Ja=class extends Da{constructor(t,r){super(r),this._tooltipText=t}_renderContent(){let t=X([this.createChildBemInfo("text")]);return this._childHtml("content")`
<div class=${t}>
	${this._tooltipText}
</div>`}};function _y(e,t){let[,r]=ji(e,t);return r}function Cy(e,{articleTitle:t,articleTitleClass:r}){let o=de(),n=_y(o);return Mt({html:e,elementRef:o,text:t,show:n}),e`
<div class=${r} save-ref=${o}>${t}</div>`}var{getCssClass:Oo}=Re`/src/roll/player/renderer/navigation/NavigationItemRenderer.css`;function i2(e,{progress:t}){let r=t==0?Oo("not-started",{dir:Fe()}):Oo("complete");return e`
<div class=${r}></div>`}function a2(e,{progress:t}){let o=Math.PI*18,n=(100-t*100)/100*o;return e`
<div class=${Oo("progress-bar")}>
	<svg width="22" height="22" viewPort="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg">
		<circle r="${9}" cx="11" cy="11" fill="transparent" stroke-dasharray="56.5" stroke-dashoffset="0"></circle>
		<circle class=${Oo("bar")} r="${9}" cx="11" cy="11" fill="transparent" stroke-dasharray="56.5" stroke-dashoffset="${n}"></circle>
	</svg>
</div>`}function ky(e,t){let r={selected:t.selected,intro:t.isIntro,dir:Fe()},o=t.progress,n=fn(),i=t.disabled,a=i?t.onHoverDisabledState:null,s=n?null:a,c=n?a:null,l=i?null:t.onClick;return e`
<div
	class=${Oo("navigation-item",r)}
	disabled=${i?!0:null}
	onclick=${l}
	onmouseover=${s}
	passive-events=${{ontouchstart:c}}
>
	${e.switch(()=>o==0||o==1?f(i2,{progress:o}):f(a2,{progress:o}))}
	<div class=${Oo("label")}>${Ug(t.label)}</div>
</div>`}var es=class extends E{constructor(){super({blockName:"total-progress"}),this._progress=0}setProgress(t){this._progress=t,this._sheduleRender()}_render(){let t=Math.floor(this._progress*100)+"%";return this._html`
<div class=${this._getCssClasses()}>
	<div class=${this._getChildClass("numeric")}>${t}</div>
	<div class=${this._getChildClass("indicator-container")}>
		<div class=${this._getChildClass("indicator-progress")} style=${`width: ${t}`}></div>
	</div>
</div>`}};var ts=class extends E{constructor(t,r,o){super({blockName:"navigation-panel"}),this._state=t,this._settings=r,this._topLayer=o,this._totalProgress=new es,this._totalProgress.addBemInfo(this.createChildBemInfo("progress")),this._sections=this._createSections(t),this.onSectionClick=this._createSignal(),this._ignoreNextAnimation=!1,this._articleTitle=this._state.intro.header.title||B("Roll.Common.IntroDefaultTitle")}setState(t){this._state=t,this._updateRenderers()}ignoreNextShowPanelAnimation(){this._ignoreNextAnimation=!0}onTransitionEnd(){return this._getBrowserEventSignal(U.TRANSITIONEND)}redrawOverlay(){this._updateRenderers()}_updateRenderers(){this.updateModifier("showed",this._state.navigationPanelShowed),this.updateModifier("in-overlay",fr()||ct()),this._totalProgress.setProgress(fe.progress(this._state)),this._sections=this._createSections(this._state),this._ignoreNextAnimation?(this._ignoreNextAnimation=!1,this.updateModifier("ignore-transition",!0)):this.hasModifier("ignore-transition")&&this.updateModifier("ignore-transition",!1),this._sheduleRender()}_createSections(t){let r=[],o=-1,n=this._settings.navigationType=="sequence",i=B("Roll.Common.ChapterDefaultTitle");return fe.sections(t).forEach((a,s)=>{let c=a==t.intro?B("Roll.Common.NavigationPanel.IntroTitle"):a.header.title||i,l=a.progress,d=a==fe.selectedSection(t);d&&(o=l<1?s:s+1);let u=n&&o!=-1&&s>o&&l==0,h=()=>{let R=new Ja(B("Roll.Player.LockedNavigationItemTooltipText"),S);this._topLayer.showTooltip({tooltip:R,relatedElement:S,showBelow:!1,enableAnimation:!0})},S=Ce(ky)({label:c,progress:a.progress,selected:d,isIntro:a==t.intro,disabled:u,onClick:()=>this.onSectionClick.dispatch(a),onHoverDisabledState:h},this._renderFunctionEx(a.key));r.push(S)}),r}_renderArticleTitle(){let t=X([this.createChildBemInfo("article-title")]);return Ce(Cy)({articleTitle:this._articleTitle,articleTitleClass:t},this._renderFunctionEx("article-title"))}_renderMainPanel(){return this._childHtml("main-panel")`
<div class='main-panel'>
	${this._renderArticleTitle()}
	${this._totalProgress}
	${this._sections}
</div>`}_render(){return this._html`
<div
	class=${this._getCssClasses()}
	ontransitionend=${this}
	onscroll=${()=>this._topLayer.hide()}
>
	${this._renderMainPanel()}
</div>`}};var hn=new Map,Sy=!1;function s2(e){hn.delete(e)}function c2(e,t,r){hn.has(t)||(hn.set(t,{}),t.addDestructHandler(()=>{s2(t)}));let o=m(hn.get(t));m(!o[e]),o[e]=r}function l2(e){hn.forEach(t=>{t.hasOwnProperty(e)&&t[e]()})}function d2(e,t){return function(){let r=typeof t=="function"?t():t;return B(e,r)}}function m2({id:e,renderer:t,updateFn:r,parameters:o}){!Sy&&Bs&&(Bs.add(l2),Sy=!0);let n=o?d2(e,o):()=>B(e),i=null;if(r){let a=r.bind(t);i=()=>a(n()),i()}else i=()=>t._sheduleRender();return c2(e.toString(),t,i),{getMessageFn:n,forceUpdateFn:i}}function xy(e,t,r){let{getMessageFn:o}=m2({id:e,renderer:t,parameters:r});return o}var rs=class extends E{constructor({header:t,chapterIndex:r,chaptersCount:o,numberingEnabled:n,defaultTitle:i,marginTop:a,paddingTop:s}){super({blockName:"chapter-header",relatedData:t}),this._header=t,this._defaultTitle=i,this._marginTop=a,this._paddingTop=s,this._labelMessageFn=xy(id("Roll.Common.CurrentChapterFromTotal"),this,{current:r+1,total:o}),this._numberingEnabled=n}title(){return m(this._getChildElement("chapter-title"))}_render(){let t=X(["text-chapter-number",this.createChildBemInfo("chapter-number")]),r=X(["text-title",this.createChildBemInfo("title")]),o=X(["text-subtitle",this.createChildBemInfo("subtitle")]),n=this._header.title||this._defaultTitle||B("Roll.Common.ChapterDefaultTitle");return this._html`
<div
	class=${this._getCssClasses()}
	style=${{"margin-top":this._marginTop,"padding-top":this._paddingTop}}
>
	${this._numberingEnabled?this._childHtml("numbering")`<p class=${t}>${this._labelMessageFn()}</p>`:null}
	${this._childHtml("chapter-title")`
		<p class=${r}>${n}</p>
	`}
	${this._header.subtitle?this._childHtml("chapter-subtitle")`<p class=${o}>${this._header.subtitle}</p>`:null}
</div>`}};var os=class extends E{constructor(t){super({blockName:"intro-header",relatedData:t}),this._header=t,this.updateModifier("with-cover",!!this._header.coverInfo),this.updateModifier("without-kicker",this._header.kicker=="")}kickerElement(){return this._getChildElement("kicker")}titleElement(){return m(this._getChildElement("intro-title"))}stripElement(){return this._getChildElement("strip")}_coverImage(){let t=this._header.coverInfo;if(!t)return null;let r={"background-image":`url(${t.src})`},o=Y(t.color),n=t.opacity,i={"background-color":`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${n})`},a=X(["intro-cover",this.createChildBemInfo("cover")]),s=X(["intro-cover-overlay",this.createChildBemInfo("cover-overlay")]);return this._childHtml("cover")`
<div style=${r} class=${a}>
	<div style=${i} class="${s}">
</div>`}_render(){let t=X(["intro-container"]),r=X(["text-kicker",this.createChildBemInfo("kicker")]),o=X(["text-title",this.createChildBemInfo("title")]),n=X([this.createChildBemInfo("strip")]),i=this._header.coverInfo?null:this._childHtml("strip")`
				<div class=${n}></div>`;return this._html`
<div class=${this._getCssClasses()}>
	${this._coverImage()}
	<div class=${t}>
		${this._header.kicker?this._childHtml("kicker")`<p class=${r}>${this._header.kicker.trim()||dt.ZERO_WIDTH_SPACE}</p>`:null}
		${this._childHtml("intro-title")`
			<p class=${o}>${this._header.title?this._header.title.trim()||dt.ZERO_WIDTH_SPACE:B("Roll.Common.IntroDefaultTitle")}</p>
		`}
		${i}
	</div>
</div>`}};var ns=class extends gr{constructor({bemInfo:t,blockName:r,autotestData:o}){super({bemInfo:t,blockName:r}),this._pressed=!1,this._disabled=!1,this._autotestData=o}onClick(){return this._getBrowserEventSignal(U.CLICK)}onMouseDown(){return this._getBrowserEventSignal(U.MOUSEDOWN)}onMouseOver(){return this._getBrowserEventSignal(U.MOUSEOVER)}onMouseOut(){return this._getBrowserEventSignal(U.MOUSEOUT)}setDisabled(t){this._disabled=t,this._sheduleRender()}pressed(){return this._pressed}setPressed(t){this._pressed=t,this.updateModifier("pressed",this._pressed)}_render(){return this._html`
			<button class=${this._getCssClasses()}
					disabled=${this._disabled}
					style=${this._getBaseStyles()}
					onclick=${this._getHandler(U.CLICK)}
					data-at=${he(this._autotestData)}
					onmousedown=${this._getHandler(U.MOUSEDOWN)}
					onmouseover=${this._getHandler(U.MOUSEOVER)}
					onmouseout=${this._getHandler(U.MOUSEOUT)}>
				${this._getText()}
			</button>`}};var is=class extends gr{constructor({previewMode:t}){super({blockName:"top-panel"}),this._previewMode=t,this.onClosePlayerRequest=this._createSignal(),this._showNavigationButton=new ns({bemInfo:this.createChildBemInfo("show-navigation")}),this._showNavigationButton.updateModifier("dir",Fe()),this._progress=0,this._animationRunning=!1,this._ignoreProgressTransition=!1,this._addSignal(this.onDidRedraw(),()=>{this._ignoreProgressTransition=!1})}onShowNavigationButtonClick(){return this._showNavigationButton.onClick()}setState(t){this._showNavigationButton.setPressed(t.navigationPanelShowed);let r=fe.selectedSection(t);this._progress=r.progress,this._ignoreProgressTransition=r.progress<this._progress,this.updateModifier("floating",fr()||ct()),this._sheduleRender()}setAnimationRunning(t){this._animationRunning=t}getProgressElement(){return m(this._getChildElement("progress"))}_renderCrossIcon(){if(this._previewMode)return null;let t=Ce(go)({}),r=this._getChildClass("close");if(Dn()){let o=t.getAttribute("class")||"";o=o.split(" ").includes(r)?o:`${t.className} ${r}`,t.setAttribute("class",o)}else t.classList.add(r);return pt(t,"click",()=>this.onClosePlayerRequest.dispatch()),t}_render(){let t=X(["top-panel-progress"]),r={width:`calc(100% * ${this._progress})`,transition:this._ignoreProgressTransition?"none":""};return this._html`
<div class=${this._getCssClasses()} style=${this._getBaseStyles()}>
	${this._showNavigationButton}
	${this._childHtml("progress")`<div class=${t} style=${r}></div>`}
	${this._renderCrossIcon()}
</div>`}};var By=500,El=56,Rl=53,u2=600,p2=Yi(_c(hr,.14)),f2=_c(hr,.64),h2=850,as=class extends E{constructor({state:t,settings:r,previewMode:o,updateStateFn:n,showWatermark:i}){super({blockName:"roll-player"}),this._showWatermark=i,this._topLayer=new Fa,this._topWindow=window;try{window.top.location.href&&(this._topWindow=window.top)}catch(a){}this._state=t,this._settings=r,this._isOnePageLongread=r.longreadType==="onePage",this._topPanel=new is({previewMode:o}),this._navigationPanel=new ts(t,r,this._topLayer),this._navigationPanel.addBemInfo(this.createChildBemInfo("navigation")),this._labelText="",this._iconMeta={},this._introHeaderRenderer=null,this._chapterHeaderRenderer=null,this._richTextRenderer=gy({getState:()=>this._state,updateStateFn:n,scrollToElementFn:(a,s)=>{let l={top:El+15,bottom:m(this._topWindow).innerHeight-15};Cc({element:a,container:this._content(),duration:By,scrollDirection:s,bounds:l})},scrollToContinueGroupFn:a=>{let s={top:0,bottom:El};Cc({element:a,container:this._content(),duration:By,scrollDirection:"bottom",bounds:s})}}),this._contentBlockClassName=this.createChildBemInfo("content").className(),this._navigationButtonClassName=this.createChildBemInfo("next").className(),this._mainBlockClassName=this.createChildBemInfo("main").className(),this._state=t,this._invalidateRenderer(),this.onToggleNavigationButtonClick=this._createSignal(this._topPanel.onShowNavigationButtonClick()),this.onSectionClick=this._createSignal(),this._addSignal(this._navigationPanel.onSectionClick,a=>{let s=fe.selectedSection(this._state);a==s?this._hideNavigationPanel(!1):(this._navigationPanel.ignoreNextShowPanelAnimation(),this._hideNavigationPanel(!0)),this.onSectionClick.dispatch(a)}),this.onGotoNextChapter=this._createSignal(),this.onSelectedSectionProgress=this._createSignal(),this.onClosePlayerRequest=this._createSignal(this._topPanel.onClosePlayerRequest),this._selectedChapterIndex=this._state.selectedSectionIndex,this._navigationPanelHideTransitionFinished=!0,this._prevScrollTop=0,this._abortContentAnimationSignal=new Ae,this._abortProgressAnimationSignal=new Ae,this._abortNextButtonIconSignal=new Ae,this._nextButtonIconAnimationCompleted=!0,No()&&(this._listen(m(this._topWindow),U.RESIZE,()=>{this._invalidateHeight()}),this._listen(m(this._topWindow),U.SCROLL,()=>{this._invalidateHeight()}),this._listen(m(this._topWindow),U.ORIENTATIONCHANGE,()=>{setTimeout(()=>m(this._topWindow).scrollTo(0,0),500)})),this._listen(m(this._topWindow),U.ORIENTATIONCHANGE,()=>{this._topLayer.hide()}),this._resizeObserver=new ResizeObserver(()=>{this._onResize()})}redrawNavigation(){this._sheduleRender(),this._navigationPanel.redrawOverlay()}state(){return this._state}updateState(t){this._state=t;let r=this._state.selectedSectionIndex,o=this._selectedChapterIndex!=r;if(this._invalidateRenderer(),o){this._selectedChapterIndex=r;let n=this._content();n.scrollTop=0}this._invalidateContentProgress(),o&&(this._runContentAnimation(),this._runProgressAnimation())}ignoreNextShowPanelAnimation(){this._navigationPanel.ignoreNextShowPanelAnimation()}_onResize(){this._topPanel.updateModifier("without-transition",!0),this._topPanel.move(null,0),this._prevScrollTop=0,this._invalidateRenderer()}_runContentAnimation(){let t=this._content();this.updateModifier("hide-content-scroll",t.scrollHeight==t.clientHeight);let r=[];if(this._introHeaderRenderer){let i=this._introHeaderRenderer.domElement();r.push(Wr(i),Zi(i))}if(this._chapterHeaderRenderer){let i=this._chapterHeaderRenderer.domElement();r.push(Wr(i),Zi(i))}let o=this._richTextRenderer.domElement();r.push(Wr(o),Zi(o));let n=Xi(r);this._abortContentAnimationSignal.dispatch(),Qt({reducer:n,timingFn:p2,duration:u2,abortSignal:this._abortContentAnimationSignal}).addCallOnce(()=>{this.updateModifier("hide-content-scroll",!1)})}_runProgressAnimation(){this._abortProgressAnimationSignal&&this._abortProgressAnimationSignal.dispatch();let t=this._topPanel.getProgressElement(),r=yy(t);this._abortProgressAnimationSignal.dispatch(),this._topPanel.setAnimationRunning(!0),Qt({reducer:r,timingFn:f2,duration:h2,abortSignal:this._abortProgressAnimationSignal,beforeAnimation:()=>{t.style.transformOrigin="0 50%"},afterAnimation:()=>{t.style.transformOrigin=""}}).addCallOnce(()=>{this._topPanel.setAnimationRunning(!1)})}_getSelectedContent(){return fe.selectedSection(this._state).contentState}_getCurrentContinueKey(){return fe.selectedSection(this._state).continueButtonKey}_getIntroHeader(){let t=this._state;return t.selectedSectionIndex==-1?t.intro.header:null}_getChapterHeader(){return this._state.selectedSectionIndex==-1?null:fe.selectedSection(this._state).header}_getSelectedSectionIndex(){return this._state.selectedSectionIndex}_getChaptersCount(){return this._state.chapters.length}_invalidateRenderer(){this._topPanel.setState(this._state),this._navigationPanel.setState(this._state);let t=(fr()||ct())&&!this._isOnePageLongread;this.updateModifier("with-floating-top-panel",t);let r=this._getIntroHeader();this._introHeaderRenderer=r?new os(r):null;let o=this._getChapterHeader();this._removeDisposable(this._chapterHeaderRenderer),this._chapterHeaderRenderer=null,o&&(this._chapterHeaderRenderer=new rs({header:o,chapterIndex:this._getSelectedSectionIndex(),chaptersCount:this._getChaptersCount(),numberingEnabled:this._settings.numberingEnabled}));let n=this._getSelectedContent(),i=this._getCurrentContinueKey();this._richTextRenderer.updateState(n,i);let a=this._getNextSection();a?this._labelText=this._getNextSectionLabel(a):this._labelText="",this._sheduleRender()}_content(){return m(this.domElement().querySelector(`.${this._contentBlockClassName}`))}_invalidateContentProgress(){let t=this._content(),r=this._getContentHeight(),o=Lt(Math.ceil(t.scrollTop+t.clientHeight)/r,0,1);this.onSelectedSectionProgress.dispatch(o)}_getContentHeight(){let t=this._content(),r=this._richTextRenderer.domElement(),o=this._getChildElement("next"),n=o?o.clientHeight:0,i=r.children,a=t.scrollHeight-r.scrollHeight-n;for(let s of i)a+=s.scrollHeight;return a}_invalidateHeight(){let t=m(this._topWindow).innerHeight;this.domElement().style.height=`${t}px`,this._navigationPanel.domElement().style.height=`${t}px`}_onScroll(t){if(this._invalidateContentProgress(),fr()||ct()){t.preventDefault(),this._topPanel.updateModifier("without-transition",!1);let r=Math.max(t.target.scrollTop,0);if(r>=this._prevScrollTop){if(r>Rl){let o=-Math.min(r,Rl);this._topPanel.move(null,o),this._prevScrollTop=r}}else if(r<this._prevScrollTop){if(r<=Rl){this._topPanel.updateModifier("without-transition",!0);let o=Math.abs(parseFloat(m(this._topPanel.domElement().style.top)))||0,n=-Math.min(r,o);this._topPanel.move(null,n),this._prevScrollTop=r}this._prevScrollTop-r>El&&(this._topPanel.move(null,0),this._prevScrollTop=r)}}}_onConnected(){if(this._resizeObserver.observe(this.domElement()),No()&&this._invalidateHeight(),this._invalidateContentProgress(),wn()){let t=()=>{Oe(()=>{this._invalidateContentProgress(),t()})};t()}}_hideNavigationPanel(t=!1){Ni()||!this._navigationPanelHideTransitionFinished||(this._navigationPanelHideTransitionFinished=t,this._addSignal(this._navigationPanel.onTransitionEnd(),()=>{this._navigationPanelHideTransitionFinished=!0,this._sheduleRender()}),this.onToggleNavigationButtonClick.dispatch())}_animateNextButtonIcon(t){let r=this._iconMeta.current;if(r){this._abortNextButtonIconSignal.dispatch();let{y:o}=Ln(r),n=t?"":"translateY(4px)",i=this._nextButtonIconAnimationCompleted?t?4:0:Math.abs(o),s=tf({element:r,initialTransform:n,from:i,to:t?0:4});Qt({reducer:s,timingFn:ef,duration:150,abortSignal:this._abortNextButtonIconSignal,afterAnimation:()=>{this._nextButtonIconAnimationCompleted=!0}}),this._nextButtonIconAnimationCompleted=!1}}_getNextSection(){return this._settings.nextButtonEnabled?fe.nextSection(this._state):null}_getNextSectionLabel(t){return B("Roll.Player.GotoNextChapterLink",{title:t.header.title||B("Roll.Common.ChapterDefaultTitle")})}_renderCompleteButton(){let t=X(["complete-section-content-container"]),r=Ce(Qe)({style:"primary",structure:"text",text:B("Roll.Player.Complete"),onClick:()=>this.onClosePlayerRequest.dispatch(),size:"xLarge",minWidth:!1});return r.classList.add(this._navigationButtonClassName),this._childHtml("complete")`
<div class=${t}>
	${r}
</div>
`}_renderNextButton(){if(!this._getNextSection())return this._renderCompleteButton();let r=X(["next-section-content-container"]),o=X(["next-section-label"]),n=Ce(Qe)({style:"primary",structure:"text",text:B("Roll.Player.Continue"),onClick:()=>this.onGotoNextChapter.dispatch(),size:"xLarge",minWidth:!1});return n.classList.add(this._navigationButtonClassName),this._childHtml("next")`
<div class=${r}>
	<div class=${o}>
		${this._labelText}
	</div>
	${n}
</div>`}_nextButtonEnabled(){let t=fe.getLastContinueButtonKey(this._state),r=!!t&&t!==this._getCurrentContinueKey();return this._settings.nextButtonEnabled&&!r}_render(){let t=X(["overlay"]),r=X(["copying-disabled"]),o=X(["with-watermark"]),n=this._getCssClasses();return this._settings.copyingEnabled||(n=`${n} ${r}`),this._showWatermark&&(n=`${n} ${o}`),this._html`
<div class=${n} onconnected=${this._onConnected}>
	${this._isOnePageLongread?null:this._navigationPanel}
	<div class=${this._mainBlockClassName}>
		${this._isOnePageLongread?null:this._topPanel}
		<div class=${this._contentBlockClassName} onscroll=${this._onScroll}>
			${this._introHeaderRenderer}
			${this._chapterHeaderRenderer}
			${this._richTextRenderer}
			${this._nextButtonEnabled()?this._renderNextButton():null}
		</div>
	</div>
	${(fr()||ct())&&this._state.navigationPanelShowed||!this._navigationPanelHideTransitionFinished?this._childHtml("overlay")`<div class=${t} passive-events=${{ontouchstart:this._hideNavigationPanel}} onmousedown=${this._hideNavigationPanel}></div>`:null}
	${this._topLayer}
</div>`}};var ss=class extends Ye{constructor({playerData:t,previewMode:r=!1,resumeState:o,showWatermark:n}){super(),this._state=Xp(t,o);let i=new Qi(t.settings);this.onSelectedSectionChange=this._createSignal(),this.onSectionProgressChange=this._createSignal(),this._renderer=this._addDisposable(new as({state:this._state,updateStateFn:s=>this._updateState(s),previewMode:r,settings:i,showWatermark:n})),this.onClosePlayerRequest=this._createSignal(this._renderer.onClosePlayerRequest),this._addSignal(this._renderer.onToggleNavigationButtonClick,()=>this._toggleNavigationPanel()),this._addSignal(this._renderer.onSectionClick,s=>this._selectSection(s)),this._addSignal(this._renderer.onGotoNextChapter,()=>this._gotoNextChapter()),this._addSignal(this._renderer.onSelectedSectionProgress,s=>{this._setSelectedSectionProgress(s),this.onSectionProgressChange.dispatch()});let a=Tp(()=>this.setInitialNavigationToggleState(),100);this._lastWindowWidth=0,this._listen(window,U.RESIZE,a.call),this.setInitialNavigationToggleState()}getTitle(){return this._state.intro.header.title||B("Roll.Common.IntroDefaultTitle")}getChaptersCount(){return this._state.chapters.length}getCurrentSectionIndex(){return this._state.selectedSectionIndex}getCurrentSectionProgress(){return fe.selectedSection(this._state).progress}getCurrentSectionsStateProgress(){return this._state.chapters.map(t=>t.progress===1)}getSuspendData(){return Mp(1,Jp(this._renderer.state()),qi)}getArticle(){let t=this._state.chapters.map(r=>({key:r.key,title:r.header.title}));return{intro:{key:this._state.intro.key,title:this._state.intro.header.title},chapters:t}}setInitialNavigationToggleState(t=!0){let r=window.innerWidth;if(this._lastWindowWidth>Hr.FULL&&Ni())return;this._lastWindowWidth=r;let o=r>Hr.FULL;this._updateState(n=>{if(o==n.navigationPanelShowed){o&&this._renderer.redrawNavigation();return}t||this._renderer.ignoreNextShowPanelAnimation(),n.navigationPanelShowed!=o&&(n.navigationPanelShowed=o)})}_updateState(t){let r=ir(this._state,o=>{t(o)});this._state!=r&&(this._state=r,this._renderer.updateState(r),this.onSelectedSectionChange.dispatch())}_selectSection(t){this._updateState(r=>{r.selectedSectionIndex=t.key==r.intro.key?-1:r.chapters.findIndex(o=>o.key==t.key)})}_gotoNextChapter(){this._updateState(t=>{let r=fe.nextSection(t);r&&(t.selectedSectionIndex=r.key==t.intro.key?-1:t.chapters.findIndex(o=>o.key==r.key))})}_setSelectedSectionProgress(t){this._updateState(r=>{let o=fe.selectedSection(r);isNaN(t)||o.progress>=t||(o.progress=t)})}_toggleNavigationPanel(){this._updateState(t=>{t.navigationPanelShowed=!t.navigationPanelShowed})}domElement(){return this._renderer.domElement()}};async function g2(){let e=await _s(ku);return e||(e=await Ql(Cu),e)?e:null}function y2(e,t,r,o,n,i,a=!1){Promise.all([_s(e),g2()]).then(([s,c])=>{if(!c)throw new Error;tp(c).then(l=>{if(!l)throw new Error;Id({settings:l.settings,i18nData:s});let d=Ml(a,!0),u=new ss({playerData:l,resumeState:o,showWatermark:d});r(u),bp(document.body,d,n,i),document.body.appendChild(u.domElement());let h=xs("popup");document.body.appendChild(h);let S=xs("tooltip");document.body.appendChild(S)})})}function _2(e,t,r,o,n,i){return new Promise((a,s)=>{y2(e,t,a,r,o,n,i)})}Wl("start",_2);})();
